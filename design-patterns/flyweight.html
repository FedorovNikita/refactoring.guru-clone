<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from refactoring.guru/design-patterns/flyweight by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 07 Jun 2022 19:14:02 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# website: http://ogp.me/ns/website#">
    <meta charset="utf-8">
    <title>Flyweight</title>

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="alternate" href="flyweight.html" hreflang="x-default"/>
    <link rel="alternate" href="../es/design-patterns/flyweight.html" hreflang="es"/>
    <link rel="alternate" href="../fr/design-patterns/flyweight.html" hreflang="fr"/>
    <link rel="alternate" href="../ja/design-patterns/flyweight.html" hreflang="ja"/>
    <link rel="alternate" href="../ko/design-patterns/flyweight.html" hreflang="ko"/>
    <link rel="alternate" href="../pl/design-patterns/flyweight.html" hreflang="pl"/>
    <link rel="alternate" href="../pt-br/design-patterns/flyweight.html" hreflang="pt-br"/>
    <link rel="alternate" href="../ru/design-patterns/flyweight.html" hreflang="ru"/>
    <link rel="alternate" href="../uk/design-patterns/flyweight.html" hreflang="uk"/>
    <link rel="alternate" href="https://refactoringguru.cn/design-patterns/flyweight" hreflang="zh"/>

    <meta name="description" content="Flyweight is a structural design pattern that lets you fit more objects into the available amount of RAM by sharing common parts of state between multiple objects instead of keeping all of the data in each object.">

    <link rel="canonical" href="flyweight.html"/>

    <link rel="icon" type="image/x-icon" href="../favicon.png"/>

<script type="application/ld+json">
{"@context": "http://schema.org", "@graph": [{"@type":"Person","@id":"https://refactoring.guru/#founder","name":"Alexander Shvets"},{"@type":"Organization","@id":"https://refactoring.guru/#organization","name":"Refactoring.Guru","description":"Refactoring.Guru makes it easy for you to discover everything you need to know about refactoring, design patterns, SOLID principles, and other smart programming topics.","image":{"@type":"ImageObject","@id":"https://refactoring.guru/#organizationlogo","url":"https://refactoring.guru/images/content-public/logos/logo-plain.png","caption":"Refactoring.Guru"},"logo":{"@id":"https://refactoring.guru/#organizationlogo"},"founder":{"@id":"https://refactoring.guru/#founder"},"sameAs":["https://www.facebook.com/refactoring.guru","https://twitter.com/RefactoringGuru","https://github.com/RefactoringGuru"]},{"@type":"WebSite","@id":"https://refactoring.guru/#website","url":"https://refactoring.guru/","name":"Refactoring.Guru","description":"Refactoring.Guru makes it easy for you to discover everything you need to know about refactoring, design patterns, SOLID principles, and other smart programming topics.","author":{"@id":"https://refactoring.guru/#founder"},"publisher":{"@id":"https://refactoring.guru/#organization"},"copyrightYear":2014},{"@type":"WebPage","@id":"https://refactoring.guru/design-patterns/flyweight#webpage","url":"https://refactoring.guru/design-patterns/flyweight","inLanguage":"en","name":"Flyweight","description":"Flyweight is a structural design pattern that lets you fit more objects into the available amount of RAM by sharing common parts of state between multiple objects instead of keeping all of the data in each object.","isPartOf":{"@id":"https://refactoring.guru#website"},"breadcrumb":{"@id":"https://refactoring.guru/design-patterns/flyweight#breadcrumb"},"primaryImageOfPage":{"@id":"https://refactoring.guru/design-patterns/flyweight#primaryimage"},"image":{"@type":"ImageObject","@id":"https://refactoring.guru/design-patterns/flyweight#primaryimage","url":"https://refactoring.guru/images/patterns/content/flyweight/flyweight-3x.png","width":1920,"height":1200}},{"@type":"Article","@id":"https://refactoring.guru/design-patterns/flyweight#article","isPartOf":{"@id":"https://refactoring.guru/design-patterns/flyweight#webpage"},"mainEntityOfPage":{"@id":"https://refactoring.guru/design-patterns/flyweight#webpage"},"author":{"@id":"https://refactoring.guru#founder"},"publisher":{"@id":"https://refactoring.guru#organization"},"headline":"Flyweight","datePublished":"2021-01-01","dateModified":"2022-01-01","articleSection":"Design Patterns","image":{"@id":"https://refactoring.guru/design-patterns/flyweight#primaryimage"}},{"@type":"BreadcrumbList","@id":"https://refactoring.guru/design-patterns/flyweight#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://refactoring.guru"},{"@type":"ListItem","position":2,"name":"Design Patterns","item":"https://refactoring.guru/design-patterns"},{"@type":"ListItem","position":3,"name":"Structural Patterns","item":"https://refactoring.guru/design-patterns/structural-patterns"}]}] }
</script>

<meta property="fb:app_id" content="666819623386327" />
<meta property="og:type"  content="website" />
<meta property="og:image" content="https://refactoring.guru/images/refactoring/social/facebook-share-preview.png?id=dbf9e98269595be86eb668f365be6868"/>

        <link rel="stylesheet" href="../css/public-packed.min29c2.css?id=72df70415a2662bdd8f64ffd40983c30">

<style type="text/css">
    @font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:local("PT Sans"),local("PTSans-Regular"),url(../fonts/PTSans/ptsans-regular_cyrillic-extc4ca.woff2?1) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:local("PT Sans"),local("PTSans-Regular"),url(../fonts/PTSans/ptsans-regular_cyrillicc4ca.woff2?1) format("woff2");unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:local("PT Sans"),local("PTSans-Regular"),url(../fonts/PTSans/ptsans-regular_latin-extc4ca.woff2?1) format("woff2");unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:local("PT Sans"),local("PTSans-Regular"),url(../fonts/PTSans/ptsans-regular_latinc4ca.woff2?1) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:local("PT Sans"),local("PTSans-Regular"),url(../fonts/PTSans/ptsans-regular_enc4ca.woff2?1) format("woff2");unicode-range:U+0-FF,U+131,U+142,U+152,U+153,U+2BB,U+2BC,U+2C6,U+2DA,U+2DC,U+420,U+423,U+430,U+438-43A,U+43D,U+440,U+441,U+443,U+44C,U+457,U+2000-206F,U+2074,U+20AA-20AC,U+20B4,U+20B9,U+20BA,U+20BD,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:local("PT Sans Bold"),local("PTSans-Bold"),url(../fonts/PTSans/ptsans-bold_cyrillic-extc4ca.woff2?1) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:local("PT Sans Bold"),local("PTSans-Bold"),url(../fonts/PTSans/ptsans-bold_cyrillicc4ca.woff2?1) format("woff2");unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:local("PT Sans Bold"),local("PTSans-Bold"),url(../fonts/PTSans/ptsans-bold_latin-extc4ca.woff2?1) format("woff2");unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:local("PT Sans Bold"),local("PTSans-Bold"),url(../fonts/PTSans/ptsans-bold_latinc4ca.woff2?1) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:local("PT Sans Bold"),local("PTSans-Bold"),url(../fonts/PTSans/ptsans-bold_enc4ca.woff2?1) format("woff2");unicode-range:U+0-FF,U+131,U+142,U+152,U+153,U+2BB,U+2BC,U+2C6,U+2DA,U+2DC,U+420,U+423,U+430,U+438-43A,U+43D,U+440,U+441,U+443,U+44C,U+457,U+2000-206F,U+2074,U+20AA-20AC,U+20B4,U+20B9,U+20BA,U+20BD,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}
</style>
<link rel="preload" href="../fonts/PTSans/ptsans-regular_enc4ca.woff2?1" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="../fonts/PTSans/ptsans-bold_enc4ca.woff2?1" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="../fonts/fontello/fontawesomea92a.woff2?15843843" as="font" type="font/woff2" crossorigin>


<script defer src="../js/public.min1749.js?id=77d40430343920ca57d184f85668a382"></script>



</head>
<body class="locale-en    announcement   flyweight" data-body_class="flyweight">

<div class="body-holder">


            <div class="announcement-block prom" data-id="DIDP-announcement" data-creative-id="en" data-position="top"><div class="announcement-block-inner">
            <img src="../images/content-public/announcement-en-17032.svg?id=2b6bba0470947f2a60cdac20b809cf3d" loading="lazy" style="width: 36px; height:36px;">
                Hey, I have just reduced the price for all products. Let's prepare our programming skills for the post-COVID era. <a href="../store.html">Check it out »</a>
            <img src="../images/content-public/announcement-en-26d3b.svg?id=d0c7bf36cfcc7c733fad50a30fd99920" loading="lazy" style="width: 36px; height:36px;">
        </div></div>
    
    <div class="cart-placeholder">
    <div class="cart-block-container" style="display:none">
        <div class="cart-block btn-group">
            <a href="#checkout" class="btn cart open-checkout">
                <span class="cart-text"></span>&nbsp;<strong class="cart-total font-money"></strong>
            </a><a href="#checkout" class="btn btn-secondary checkout open-checkout"><i class="fa fa-shopping-cart" aria-hidden="true"></i> <span class="btn-text-span d-none d-sm-inline-block d-lg-none d-hg-inline-block"></span></a>
        </div>
    </div>
</div>
    <main role="main" class="main-content top-content center-content " data-page_class="">
        <div class="main-content-container center-content-container">
                        <div class="pattern page text">
<article>
    <div class="breadcrumb">
                                    <a class="home" href="../index.html"><i class="fa fa-home" aria-hidden="true"></i></a>
                                                / <a class="type" href="../design-patterns.html">Design Patterns</a>
                                                / <a class="type" href="structural-patterns.html">Structural Patterns</a>
                        </div>
    <h1 class="title">Flyweight</h1>

    <script type="text/javascript">
        // Shorten examples titles for users.
        var h1 = document.getElementsByTagName("H1")[0];
        if (h1.offsetHeight > 160) {
            h1.className += ' smaller';
        }

        // Small beautification for pattern examples.
        var title = h1.innerHTML;
        title = title.replace(/^(Java|C\+\+|C#|PHP|Python|Ruby|Delphi): (.*)$/, '<strong>$1:</strong> $2');
        h1.innerHTML = title;
    </script>

            <div class="aka">
            Also known as: <span style="display:inline-block">Cache</span>
        </div>
    
    

    <div class="section intent">
<h2 id="intent"><i class="fa fa-flip-horizontal fa-comment-alt-dots" aria-hidden="true"></i> Intent</h2>
<p><strong>Flyweight</strong> is a structural design pattern that lets you fit more objects into the available amount of RAM by sharing common parts of state between multiple objects instead of keeping all of the data in each object.</p>
<figure class="image"><img src="../images/patterns/content/flyweight/flyweight7be2.png?id=e34fbacb847dd609b5e68aaf252c4db0" alt="Flyweight design&amp;nbsp;pattern" width="640" srcset="/images/patterns/content/flyweight/flyweight-2x.png?id=6a8f17d9550c75c3d648a605c4d31b45 2x" /></figure>
</div>
<div class="section problem">
<h2 id="problem"><i class="fa fa-frown" aria-hidden="true"></i> Problem</h2>
<p>To have some fun after long working hours, you decided to create a simple video game: players would be moving around a map and shooting each other. You chose to implement a realistic particle system and make it a distinctive feature of the game. Vast quantities of bullets, missiles, and shrapnel from explosions should fly all over the map and deliver a thrilling experience to the player.</p>
<p>Upon its completion, you pushed the last commit, built the game and sent it to your friend for a test drive. Although the game was running flawlessly on your machine, your friend wasn’t able to play for long. On his computer, the game kept crashing after a few minutes of gameplay. After spending several hours digging through debug logs, you discovered that the game crashed because of an insufficient amount of RAM. It turned out that your friend’s rig was much less powerful than your own computer, and that’s why the problem emerged so quickly on his machine.</p>
<p>The actual problem was related to your particle system. Each particle, such as a bullet, a missile or a piece of shrapnel was represented by a separate object containing plenty of data. At some point, when the carnage on a player’s screen reached its climax, newly created particles no longer fit into the remaining RAM, so the program crashed.</p>
<figure class="image"><img src="../images/patterns/diagrams/flyweight/problem-enfde7.png?id=1ab15b46781c548e3e7c55dddbee72de" alt="Flyweight pattern problem" width="640" srcset="/images/patterns/diagrams/flyweight/problem-en-2x.png?id=0728488af118d8ee99c8c58878749f2a 2x" loading="lazy" /></figure>
</div>
<div class="section solution">
<h2 id="solution"><i class="fa fa-smile-beam" aria-hidden="true"></i> Solution</h2>
<p>On closer inspection of the <code>Particle</code> class, you may notice that the color and <abbr title="An image that represents the particle.">sprite</abbr> fields consume a lot more memory than other fields. What’s worse is that these two fields store almost identical data across all particles. For example, all bullets have the same color and sprite.</p>
<figure class="image"><img src="../images/patterns/diagrams/flyweight/solution1-en7ebd.png?id=4b962ce51832e49a24f16f36be79ec45" alt="Flyweight pattern solution" width="640" srcset="/images/patterns/diagrams/flyweight/solution1-en-2x.png?id=89d70cf5947b93412fe48750a398d8c3 2x" loading="lazy" /></figure>
<p>Other parts of a particle’s state, such as coordinates, movement vector and speed, are unique to each particle. After all, the values of these fields change over time. This data represents the always changing context in which the particle exists, while the color and sprite remain constant for each particle.</p>
<p>This constant data of an object is usually called the <em>intrinsic state</em>. It lives within the object; other objects can only read it, not change it. The rest of the object’s state, often altered “from the outside” by other objects, is called the <em>extrinsic state</em>.</p>
<p>The Flyweight pattern suggests that you stop storing the extrinsic state inside the object. Instead, you should pass this state to specific methods which rely on it. Only the intrinsic state stays within the object, letting you reuse it in different contexts. As a result, you’d need fewer of these objects since they only differ in the intrinsic state, which has much fewer variations than the extrinsic.</p>
<figure class="image"><img src="../images/patterns/diagrams/flyweight/solution3-en6fbc.png?id=e861e35c1214c46ac7333a127462de68" alt="Flyweight pattern solution" width="424" srcset="/images/patterns/diagrams/flyweight/solution3-en-2x.png?id=a8679f0aa03f6521dd206fcbc5ed9176 2x" loading="lazy" /></figure>
<p>Let’s return to our game. Assuming that we had extracted the extrinsic state from our particle class, only three different objects would suffice to represent all particles in the game: a bullet, a missile, and a piece of shrapnel. As you’ve probably guessed by now, an object that only stores the intrinsic state is called <abbr title="The term comes from boxing and stands for a fighter who weighs less than 111 lbs.">a flyweight</abbr>.</p>
<h4>Extrinsic state storage</h4>
<p>Where does the extrinsic state move to? Some class should still store it, right? In most cases, it gets moved to the container object, which aggregates objects before we apply the pattern.</p>
<p>In our case, that’s the main <code>Game</code> object that stores all particles in the <code>particles</code> field. To move the extrinsic state into this class, you need to create several array fields for storing coordinates, vectors, and speed of each individual particle. But that’s not all. You need another array for storing references to a specific flyweight that represents a particle. These arrays must be in sync so that you can access all data of a particle using the same index.</p>
<figure class="image"><img src="../images/patterns/diagrams/flyweight/solution2-en0491.png?id=3e4154df627d99ecd099e07301f8eb81" alt="Flyweight pattern solution" width="640" srcset="/images/patterns/diagrams/flyweight/solution2-en-2x.png?id=64debda3b847213b134d303bd32613cb 2x" loading="lazy" /></figure>
<p>A more elegant solution is to create a separate context class that would store the extrinsic state along with reference to the flyweight object. This approach would require having just a single array in the container class.</p>
<p>Wait a second! Won’t we need to have as many of these contextual objects as we had at the very beginning? Technically, yes. But the thing is, these objects are much smaller than before. The most memory-consuming fields have been moved to just a few flyweight objects. Now, a thousand small contextual objects can reuse a single heavy flyweight object instead of storing a thousand copies of its data.</p>
<h4>Flyweight and immutability</h4>
<p>Since the same flyweight object can be used in different contexts, you have to make sure that its state can’t be modified. A flyweight should initialize its state just once, via constructor parameters. It shouldn’t expose any setters or public fields to other objects.</p>
<h4>Flyweight factory</h4>
<p>For more convenient access to various flyweights, you can create a factory method that manages a pool of existing flyweight objects. The method accepts the intrinsic state of the desired flyweight from a client, looks for an existing flyweight object matching this state, and returns it if it was found. If not, it creates a new flyweight and adds it to the pool.</p>
<p>There are several options where this method could be placed. The most obvious place is a flyweight container. Alternatively, you could create a new factory class. Or you could make the factory method static and put it inside an actual flyweight class.</p>
</div>
<div class="section structure-container">
<h2 id="structure"><i class="fa fa-sitemap" aria-hidden="true"></i> Structure</h2>
<div class="structure">
<div class="struct-image1 struct-image">
<figure class="image"><img class="structure-img-non-indexed d-none d-xl-block" src="../images/patterns/diagrams/flyweight/structure7b00.png?id=c1e7e1748f957a4792822f902bc1d420" alt="Structure of the Flyweight design pattern" width="640" srcset="/images/patterns/diagrams/flyweight/structure-2x.png?id=a7c8347421bde16435fc90a706f5dd34 2x" loading="lazy" /><img class="structure-img-indexed d-xl-none" src="../images/patterns/diagrams/flyweight/structure-indexed086a.png?id=aa490792baa26b04464dacbc1f4a19cd" alt="Structure of the Flyweight design pattern" width="630" srcset="/images/patterns/diagrams/flyweight/structure-indexed-2x.png?id=205e2f7d08b4ac0695f445a9db8989c4 2x" loading="lazy" /></figure>
</div>
<ol><li class="struct-li1">
<p>The Flyweight pattern is merely an optimization. Before applying it, make sure your program does have the RAM consumption problem related to having a massive number of similar objects in memory at the same time. Make sure that this problem can’t be solved in any other meaningful way.</p>
</li>
<li class="struct-li2">
<p>The <strong>Flyweight</strong> class contains the portion of the original object’s state that can be shared between multiple objects. The same flyweight object can be used in many different contexts. The state stored inside a flyweight is called <em>intrinsic.</em> The state passed to the flyweight’s methods is called <em>extrinsic.</em></p>
</li>
<li class="struct-li3">
<p>The <strong>Context</strong> class contains the extrinsic state, unique across all original objects. When a context is paired with one of the flyweight objects, it represents the full state of the original object.</p>
</li>
<li class="struct-li4">
<p>Usually, the behavior of the original object remains in the flyweight class. In this case, whoever calls a flyweight’s method must also pass appropriate bits of the extrinsic state into the method’s parameters. On the other hand, the behavior can be moved to the context class, which would use the linked flyweight merely as a data object.</p>
</li>
<li class="struct-li5">
<p>The <strong>Client</strong> calculates or stores the extrinsic state of flyweights. From the client’s perspective, a flyweight is a template object which can be configured at runtime by passing some contextual data into parameters of its methods.</p>
</li>
<li class="struct-li6">
<p>The <strong>Flyweight Factory</strong> manages a pool of existing flyweights. With the factory, clients don’t create flyweights directly. Instead, they call the factory, passing it bits of the intrinsic state of the desired flyweight. The factory looks over previously created flyweights and either returns an existing one that matches search criteria or creates a new one if nothing is found.</p>
</li></ol>
<style structure type="text/css" >
@media (min-width: 1200px) {
.structure {
margin: 0;
width: auto;
height: 740px;
}

.struct-image1 {
left: 210px;
top: 160px;
}

.struct-li1 {
left: 50px;
top: 10px;
width: 400px;
height: 130px;
}

.struct-li2 {
left: 0px;
top: 570px;
width: 270px;
height: 190px;
}

.struct-li3 {
left: 310px;
top: 570px;
width: 190px;
height: 190px;
}

.struct-li4 {
left: 540px;
top: 570px;
width: 300px;
height: 190px;
}

.struct-li5 {
left: 510px;
top: 10px;
width: 350px;
height: 130px;
}

.struct-li6 {
left: 0px;
top: 170px;
width: 200px;
height: 330px;
}
}

</style>
</div></div>
<div class="section pseudocode">
<h2 id="pseudocode"><i class="fa fa-hashtag" aria-hidden="true"></i> Pseudocode</h2>
<p>In this example, the <strong>Flyweight</strong> pattern helps to reduce memory usage when rendering millions of tree objects on a canvas.</p>
<figure class="image"><img src="../images/patterns/diagrams/flyweight/example5053.png?id=0818d078c1a79f373e96397f37b7ee06" alt="Flyweight pattern example" width="540" srcset="/images/patterns/diagrams/flyweight/example-2x.png?id=9423640fe3688a64201389b6e7aa1f48 2x" loading="lazy" /></figure>
<p>The pattern extracts the repeating intrinsic state from a main <code>Tree</code> class and moves it into the flyweight class <code>TreeType</code>.</p>
<p>Now instead of storing the same data in multiple objects, it’s kept in just a few flyweight objects and linked to appropriate <code>Tree</code> objects which act as contexts. The client code creates new tree objects using the flyweight factory, which encapsulates the complexity of searching for the right object and reusing it if needed.</p>
<figure class="code">
<pre class="code" lang="pseudocode">// The flyweight class contains a portion of the state of a
// tree. These fields store values that are unique for each
// particular tree. For instance, you won't find here the tree
// coordinates. But the texture and colors shared between many
// trees are here. Since this data is usually BIG, you'd waste a
// lot of memory by keeping it in each tree object. Instead, we
// can extract texture, color and other repeating data into a
// separate object which lots of individual tree objects can
// reference.
class TreeType is
    field name
    field color
    field texture
    constructor TreeType(name, color, texture) { ... }
    method draw(canvas, x, y) is
        // 1. Create a bitmap of a given type, color &amp; texture.
        // 2. Draw the bitmap on the canvas at X and Y coords.

// Flyweight factory decides whether to re-use existing
// flyweight or to create a new object.
class TreeFactory is
    static field treeTypes: collection of tree types
    static method getTreeType(name, color, texture) is
        type = treeTypes.find(name, color, texture)
        if (type == null)
            type = new TreeType(name, color, texture)
            treeTypes.add(type)
        return type

// The contextual object contains the extrinsic part of the tree
// state. An application can create billions of these since they
// are pretty small: just two integer coordinates and one
// reference field.
class Tree is
    field x,y
    field type: TreeType
    constructor Tree(x, y, type) { ... }
    method draw(canvas) is
        type.draw(canvas, this.x, this.y)

// The Tree and the Forest classes are the flyweight's clients.
// You can merge them if you don't plan to develop the Tree
// class any further.
class Forest is
    field trees: collection of Trees

    method plantTree(x, y, name, color, texture) is
        type = TreeFactory.getTreeType(name, color, texture)
        tree = new Tree(x, y, type)
        trees.add(tree)

    method draw(canvas) is
        foreach (tree in trees) do
            tree.draw(canvas)
</pre>
</figure>
</div>
<div class="section applicability-container">
<h2 id="applicability"><i class="fa fa-lightbulb-on" aria-hidden="true"></i> Applicability</h2>
<div class="applicability">
<div class="applicability-problem">
<p><i class="fa fa-fw fa-bug" aria-hidden="true"></i> Use the Flyweight pattern only when your program must support a huge number of objects which barely fit into available RAM.</p>
</div><div class="applicability-solution">
<p><i class="fa fa-fw fa-bolt" aria-hidden="true"></i> The benefit of applying the pattern depends heavily on how and where it’s used. It’s most useful when:</p>
<ul>
<li>an application needs to spawn a huge number of similar objects</li>
<li>this drains all available RAM on a target device</li>
<li>the objects contain duplicate states which can be extracted and shared between multiple objects</li>
</ul>
</div>
</div></div>
<div class="section checklist">
<h2 id="checklist"><i class="fa fa-clipboard-list-check" aria-hidden="true"></i> How to Implement</h2>
<ol>
<li>
<p>Divide fields of a class that will become a flyweight into two parts:</p>
<ul>
<li>the intrinsic state: the fields that contain unchanging data duplicated across many objects</li>
<li>the extrinsic state: the fields that contain contextual data unique to each object</li>
</ul>
</li>
<li>
<p>Leave the fields that represent the intrinsic state in the class, but make sure they’re immutable. They should take their initial values only inside the constructor.</p>
</li>
<li>
<p>Go over methods that use fields of the extrinsic state. For each field used in the method, introduce a new parameter and use it instead of the field.</p>
</li>
<li>
<p>Optionally, create a factory class to manage the pool of flyweights. It should check for an existing flyweight before creating a new one. Once the factory is in place, clients must only request flyweights through it. They should describe the desired flyweight by passing its intrinsic state to the factory.</p>
</li>
<li>
<p>The client must store or calculate values of the extrinsic state (context) to be able to call methods of flyweight objects. For the sake of convenience, the extrinsic state along with the flyweight-referencing field may be moved to a separate context class.</p>
</li>
</ol>
</div>
<div class="section pros-cons">
<h2 id="pros-cons"><i class="fa fa-balance-scale" aria-hidden="true"></i> Pros and Cons</h2>
<div class="row"><div class="col-sm-6">
<ul>
<li>
<i class="fa fa-fw fa-check" aria-hidden="true"></i> You can save lots of RAM, assuming your program has tons of similar objects.</li>
</ul>
</div><div class="col-sm-6">
<ul>
<li>
<i class="fa fa-fw fa-times" aria-hidden="true"></i> You might be trading RAM over CPU cycles when some of the context data needs to be recalculated each time somebody calls a flyweight method.</li>
<li>
<i class="fa fa-fw fa-times" aria-hidden="true"></i> The code becomes much more complicated. New team members will always be wondering why the state of an entity was separated in such a way.</li>
</ul>
</div></div></div>
<div class="section relations">
<h2 id="relations"><i class="fa fa-exchange-alt" aria-hidden="true"></i> Relations with Other Patterns</h2>
<ul>
<li>
<p>You can implement shared leaf nodes of the <a href="composite.html">Composite</a> tree as <a href="flyweight.html">Flyweights</a> to save some RAM.</p>
</li>
<li>
<p><a href="flyweight.html">Flyweight</a> shows how to make lots of little objects, whereas <a href="facade.html">Facade</a> shows how to make a single object that represents an entire subsystem.</p>
</li>
<li>
<p><a href="flyweight.html">Flyweight</a> would resemble <a href="singleton.html">Singleton</a> if you somehow managed to reduce all shared states of the objects to just one flyweight object. But there are two fundamental differences between these patterns:</p>
<ol>
<li>There should be only one Singleton instance, whereas a <em>Flyweight</em> class can have multiple instances with different intrinsic states.</li>
<li>The <em>Singleton</em> object can be mutable. Flyweight objects are immutable.</li>
</ol>
</li>
</ul>
</div>
<div class="section implementations">
<h2 id="implementations"><i class="fa fa-code" aria-hidden="true"></i> Code Examples</h2>
<p><a href="flyweight/java/example.html" title="Design Patterns: Flyweight in Java" class="prog-lang-link"><img width="53" height="53" loading="lazy" src="../images/patterns/icons/java9ca9.svg?id=e6d87e2dca08c953fe3acd1275ed4f4e" alt="Design Patterns: Flyweight in Java"></a>
<a href="flyweight/csharp/example.html" title="Design Patterns: Flyweight in C#" class="prog-lang-link"><img width="53" height="53" loading="lazy" src="../images/patterns/icons/csharp8c8a.svg?id=da64592defc6e86d57c39c66e9de3e58" alt="Design Patterns: Flyweight in C#"></a>
<a href="flyweight/cpp/example.html" title="Design Patterns: Flyweight in C++" class="prog-lang-link"><img width="53" height="53" loading="lazy" src="../images/patterns/icons/cpp9770.svg?id=f7782ed8b8666246bfcc3f8fefc3b858" alt="Design Patterns: Flyweight in C++"></a>
<a href="flyweight/php/example.html" title="Design Patterns: Flyweight in PHP" class="prog-lang-link"><img width="53" height="53" loading="lazy" src="../images/patterns/icons/phpb8be.svg?id=be1906eb26b71ec1d3b93720d6156618" alt="Design Patterns: Flyweight in PHP"></a>
<a href="flyweight/python/example.html" title="Design Patterns: Flyweight in Python" class="prog-lang-link"><img width="53" height="53" loading="lazy" src="../images/patterns/icons/python25f6.svg?id=6d815d43c0f7050a1151b43e51569c9f" alt="Design Patterns: Flyweight in Python"></a>
<a href="flyweight/ruby/example.html" title="Design Patterns: Flyweight in Ruby" class="prog-lang-link"><img width="53" height="53" loading="lazy" src="../images/patterns/icons/ruby3275.svg?id=b065b718c914bf8e960ef731600be1eb" alt="Design Patterns: Flyweight in Ruby"></a>
<a href="flyweight/swift/example.html" title="Design Patterns: Flyweight in Swift" class="prog-lang-link"><img width="53" height="53" loading="lazy" src="../images/patterns/icons/swift68dd.svg?id=0b716c2d52ec3a48fbe91ac031070c1d" alt="Design Patterns: Flyweight in Swift"></a>
<a href="flyweight/typescript/example.html" title="Design Patterns: Flyweight in TypeScript" class="prog-lang-link"><img width="53" height="53" loading="lazy" src="../images/patterns/icons/typescript325e.svg?id=2239d0f16cb703540c205dd8cb0c0cb7" alt="Design Patterns: Flyweight in TypeScript"></a>
<a href="flyweight/go/example.html" title="Design Patterns: Flyweight in Go" class="prog-lang-link"><img width="53" height="53" loading="lazy" src="../images/patterns/icons/go3287.svg?id=1a89927eb99b1ea3fde7701d97970aca" alt="Design Patterns: Flyweight in Go"></a></p>
</div>


    <div class="banner-set2" id="book-promo">
            <div class="prom banner-content banner-bg banner-striped banner-with-image" data-id="DP: 1: Support our free website and own the eBook!" data-creative-id="standard-en" data-position="content_bottom">
                <div class="banner-image">
                    <a href="book.html">
                        <img width="200" height="200" loading="lazy" src="../images/patterns/banners/patterns-book-banner-3a29e.png?id=7d445df13c80287beaab234b4f3b698c" srcset="/images/patterns/banners/patterns-book-banner-3-2x.png?id=0cc3f77ab421d1a5c02ee46488231c3a 2x">
                    </a>
                </div>

                <div class="banner-text">
                    <h3 class="title">Support our free website and own the eBook!</h3>
                    <ul style="font-size: 14px;">
                        <li style="margin: 0;">22 design patterns and 8 principles explained in depth.</li>
                        <li style="margin: 0;">409 well-structured, easy to read, jargon-free pages.</li>
                        <li style="margin: 0;">225 clear and helpful illustrations and diagrams.</li>
                        <li style="margin: 0;">An archive with code examples in 9 languages.</li>
                        <li style="margin: 0;">All devices supported: PDF/EPUB/MOBI/KFX formats.</li>
                    </ul>
                    <a class="btn btn-secondary" href="book.html"><i class="fa fa-book" aria-hidden="true"></i> Learn more…</a>
                </div>
            </div>
        </div>

    </article>

<nav class="prev-next">
                    <div class="next">
                <h4>Read next</h4>
                <a rel="next" href="proxy.html" class="btn btn-primary">Proxy&nbsp;<span class="fa fa-arrow-right"></span></a>
            </div>
                            <div class="prev">
                <h4>Return</h4>
                <a rel="prev" href="facade.html" class="btn btn-default"><span class="fa fa-arrow-left"></span>&nbsp;Facade </a>
            </div>
            </nav>
</div>

<aside class="feature content-secondary">
    <div class="prom banner-sidebar" data-id="DP: Sidebar" data-creative-id="standard-sidebar-en" data-position="sidebar">
        <div class="banner-inner">
            <div class="image3d-book-right">
                <div class="image3d-cover" style="background: #0b3752;">
                    <a href="book.html">
                        <img width="250" height="375" loading="lazy" src="../images/patterns/book/web-cover-en00eb.png?id=328861769fd11617674e3b8a7e2dd9e7" srcset="/images/patterns/book/web-cover-en-2x.png?id=02940141c5652ed5a426d87390b16366 2x">
                    </a>
                </div>
            </div>
            <div style="margin-top: 1rem">
                <p class="text-center">This article is a part of our eBook<br/><strong>Dive Into Design Patterns</strong>.</p>
                <a href="book.html" class="btn btn-secondary btn-block"><i class="fa fa-book" aria-hidden="true"></i> Learn more…</a>
            </div>
        </div>
    </div>


</aside>
                    </div>
    </main>

    <nav class="navigation" role="navigation">
    <div class="navigation-container">
        <a href="#menu" class="navigation-toggle"><i class="fa fa-bars"></i></a>
        <a class="navigation-brand" href="../index.html">
            <img alt="Refactoring.Guru" src="../images/content-public/logos/logo-military-mobile78b4.png?id=65ecbd1e688fc695bc20c22a1e8450d9" srcset="/images/content-public/logos/logo-military-mobile-2x.png?id=0f52141f57f67fb678da8407e254b0a3 2x"
                  width="94"                   height="64"             >
        </a>
        <div class="social-likes-block" data-url="../index.html">
    <div data-service="facebook" class="facebook" title="Share on Facebook">Facebook</div>
        <div data-service="twitter" class="twitter" title="Share on Twitter">Twitter</div>
</div>        <ul class="navigation-menu">
                        <li class="dropdown d-lg-none">
                <a class="dropdown-toggle" id="dropdownLanguage" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fa fa-globe" aria-hidden="true"></i> <span class="caption d-none d-xl-inline-block">Language</span>
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownLanguage">
                                                                                                        <a href="flyweight.html" class="dropdown-item locale-link active" data-locale="en" title="English">English</a>
                                                                                                                <a href="../es/design-patterns/flyweight.html" class="dropdown-item locale-link " data-locale="es" title="Español">Español</a>
                                                                                                                <a href="../fr/design-patterns/flyweight.html" class="dropdown-item locale-link " data-locale="fr" title="Français">Français</a>
                                                                                                                                                                                                                        <a href="../pl/design-patterns/flyweight.html" class="dropdown-item locale-link " data-locale="pl" title="Polski">Polski</a>
                                                                                                                <a href="../pt-br/design-patterns/flyweight.html" class="dropdown-item locale-link " data-locale="pt-br" title="Português Brasileiro">Português Brasileiro</a>
                                                                                                                <a href="../ru/design-patterns/flyweight.html" class="dropdown-item locale-link " data-locale="ru" title="Русский">Русский</a>
                                                                                                                <a href="../uk/design-patterns/flyweight.html" class="dropdown-item locale-link " data-locale="uk" title="Українська">Українська</a>
                                                                                                                <a href="https://refactoringguru.cn/design-patterns/flyweight" class="dropdown-item locale-link " data-locale="zh" title="中文">中文</a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </div>
            </li>
                        <li class="nav-contact">
                <a class="userecho-private" href="https://feedback.refactoring.guru/?show_feedback_form_private=true" rel="nofollow" title="Contact us">
                    <i class="fa fa-envelope"></i> <span class="caption d-none d-xl-inline-block">Contact us</span>
                </a>
            </li>
                                                <li class="nav-login">
                        <a href="../login.html" title="Log in"><i class="fa fa-user"></i> <span class="caption d-none d-xl-inline-block">Log in</span></a>
                    </li>
                                    </ul>
    </div>
    <div>
        <a class="russia-stop" href="../help-ukraine.html">
                            HELP UKRAINE <b>STOP RUSSIA</b>
                    </a>
    </div>
</nav>
    <aside class="sidebar main-menu nano">
    <a href="#menu-close" class="navigation-toggle"><i class="fa fa-fw fa-times"></i></a>
    <div class="nano-content">
                    <div class="main-menu-lang d-none d-lg-flex main-menu-lang-count-8">
                                                                                        <a href="flyweight.html" class="locale-link locale-link-en active" data-locale="en" title="English"><span class="d-lg-none">English</span><span class="d-none d-lg-inline">English</span></a>
                                                                                                <a href="../es/design-patterns/flyweight.html" class="locale-link locale-link-es " data-locale="es" title="Español"><span class="d-lg-none">Español</span><span class="d-none d-lg-inline">Español</span></a>
                                                                                                <a href="../fr/design-patterns/flyweight.html" class="locale-link locale-link-fr " data-locale="fr" title="Français"><span class="d-lg-none">Français</span><span class="d-none d-lg-inline">Français</span></a>
                                                                                                                                                                                        <a href="../pl/design-patterns/flyweight.html" class="locale-link locale-link-pl " data-locale="pl" title="Polski"><span class="d-lg-none">Polski</span><span class="d-none d-lg-inline">Polski</span></a>
                                                                                                <a href="../pt-br/design-patterns/flyweight.html" class="locale-link locale-link-pt-br " data-locale="pt-br" title="Português Brasileiro"><span class="d-lg-none">Português Brasileiro</span><span class="d-none d-lg-inline">Português-Br</span></a>
                                                                                                <a href="../ru/design-patterns/flyweight.html" class="locale-link locale-link-ru " data-locale="ru" title="Русский"><span class="d-lg-none">Русский</span><span class="d-none d-lg-inline">Русский</span></a>
                                                                                                <a href="../uk/design-patterns/flyweight.html" class="locale-link locale-link-uk " data-locale="uk" title="Українська"><span class="d-lg-none">Українська</span><span class="d-none d-lg-inline">Українська</span></a>
                                                                                                <a href="https://refactoringguru.cn/design-patterns/flyweight" class="locale-link locale-link-zh " data-locale="zh" title="中文"><span class="d-lg-none">中文</span><span class="d-none d-lg-inline">中文</span></a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </div>
        
        <a class="menu-brand" href="../index.html">
                            <img width=200 height=241 loading="lazy" alt="Refactoring.Guru" src="../images/content-public/logos/logo-militaryd1c3.png?id=3eaf203cb26279327252e2c5f5d37c7f" srcset="/images/content-public/logos/logo-military-2x.png?id=5af1a599d8a4170c9a42e6fa18148b98 2x">
                    </a>
        <div>
            <a class="russia-stop" href="../help-ukraine.html">
                                    HELP UKRAINE
                    <br><b>STOP RUSSIA</b>
                            </a>
        </div>


        <div class="menu-container" style="position: relative">
                        <ul class="menu-list trail">
                            <li class="featured">
            <a href="../store.html">
                <i class="fa fa-fw fa-star" aria-hidden="true"></i> Premium Content
            </a>
    
            <ul >
                            <li class="featured menu-fs15">
            <a href="book.html">
                <i class="fa fa-fw fa-book" aria-hidden="true"></i> Design Patterns eBook
            </a>
    
    
            </li>
                                <li class="featured menu-fs15">
            <a href="../refactoring/course.html">
                <i class="fa fa-fw fa-graduation-cap" aria-hidden="true"></i> Refactoring Course
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring.html">
                <i class="fa fa-fw fa-scissors" aria-hidden="true"></i> Refactoring
            </a>
    
            <ul >
                            <li class="">
            <a href="../refactoring/what-is-refactoring.html">
                What is Refactoring
            </a>
    
            <ul >
                            <li class="">
            <a href="../refactoring/what-is-refactoring.html">
                Clean code
            </a>
    
    
            </li>
                                <li class="">
            <a href="../refactoring/technical-debt.html">
                Technical debt
            </a>
    
    
            </li>
                                <li class="">
            <a href="../refactoring/when.html">
                When to refactor
            </a>
    
    
            </li>
                                <li class="">
            <a href="../refactoring/how-to.html">
                How to refactor
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/catalog.html">
                Catalog
            </a>
    
    
            </li>
                                <li class="">
            <a href="../refactoring/smells.html">
                Code Smells
            </a>
    
            <ul >
                            <li class="">
            <a href="../refactoring/smells/bloaters.html">
                Bloaters
            </a>
    
            <ul >
                            <li class="">
            <a href="../smells/long-method.html">
                Long Method
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/large-class.html">
                Large Class
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/primitive-obsession.html">
                Primitive Obsession
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/long-parameter-list.html">
                Long Parameter List
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/data-clumps.html">
                Data Clumps
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/smells/oo-abusers.html">
                Object-Orientation Abusers
            </a>
    
            <ul >
                            <li class="">
            <a href="../smells/switch-statements.html">
                Switch Statements
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/temporary-field.html">
                Temporary Field
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/refused-bequest.html">
                Refused Bequest
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/alternative-classes-with-different-interfaces.html">
                Alternative Classes with Different Interfaces
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/smells/change-preventers.html">
                Change Preventers
            </a>
    
            <ul >
                            <li class="">
            <a href="../smells/divergent-change.html">
                Divergent Change
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/shotgun-surgery.html">
                Shotgun Surgery
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/parallel-inheritance-hierarchies.html">
                Parallel Inheritance Hierarchies
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/smells/dispensables.html">
                Dispensables
            </a>
    
            <ul >
                            <li class="">
            <a href="../smells/comments.html">
                Comments
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/duplicate-code.html">
                Duplicate Code
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/lazy-class.html">
                Lazy Class
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/data-class.html">
                Data Class
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/dead-code.html">
                Dead Code
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/speculative-generality.html">
                Speculative Generality
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/smells/couplers.html">
                Couplers
            </a>
    
            <ul >
                            <li class="">
            <a href="../smells/feature-envy.html">
                Feature Envy
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/inappropriate-intimacy.html">
                Inappropriate Intimacy
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/message-chains.html">
                Message Chains
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/middle-man.html">
                Middle Man
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/smells/other.html">
                Other Smells
            </a>
    
            <ul >
                            <li class="">
            <a href="../smells/incomplete-library-class.html">
                Incomplete Library Class
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/techniques.html">
                Refactorings
            </a>
    
            <ul >
                            <li class="">
            <a href="../refactoring/techniques/composing-methods.html">
                Composing Methods
            </a>
    
            <ul >
                            <li class="">
            <a href="../extract-method.html">
                Extract Method
            </a>
    
    
            </li>
                                <li class="">
            <a href="../inline-method.html">
                Inline Method
            </a>
    
    
            </li>
                                <li class="">
            <a href="../extract-variable.html">
                Extract Variable
            </a>
    
    
            </li>
                                <li class="">
            <a href="../inline-temp.html">
                Inline Temp
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-temp-with-query.html">
                Replace Temp with Query
            </a>
    
    
            </li>
                                <li class="">
            <a href="../split-temporary-variable.html">
                Split Temporary Variable
            </a>
    
    
            </li>
                                <li class="">
            <a href="../remove-assignments-to-parameters.html">
                Remove Assignments to Parameters
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-method-with-method-object.html">
                Replace Method with Method Object
            </a>
    
    
            </li>
                                <li class="">
            <a href="../substitute-algorithm.html">
                Substitute Algorithm
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/techniques/moving-features-between-objects.html">
                Moving Features between Objects
            </a>
    
            <ul >
                            <li class="">
            <a href="../move-method.html">
                Move Method
            </a>
    
    
            </li>
                                <li class="">
            <a href="../move-field.html">
                Move Field
            </a>
    
    
            </li>
                                <li class="">
            <a href="../extract-class.html">
                Extract Class
            </a>
    
    
            </li>
                                <li class="">
            <a href="../inline-class.html">
                Inline Class
            </a>
    
    
            </li>
                                <li class="">
            <a href="../hide-delegate.html">
                Hide Delegate
            </a>
    
    
            </li>
                                <li class="">
            <a href="../remove-middle-man.html">
                Remove Middle Man
            </a>
    
    
            </li>
                                <li class="">
            <a href="../introduce-foreign-method.html">
                Introduce Foreign Method
            </a>
    
    
            </li>
                                <li class="">
            <a href="../introduce-local-extension.html">
                Introduce Local Extension
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/techniques/organizing-data.html">
                Organizing Data
            </a>
    
            <ul >
                            <li class="">
            <a href="../self-encapsulate-field.html">
                Self Encapsulate Field
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-data-value-with-object.html">
                Replace Data Value with Object
            </a>
    
    
            </li>
                                <li class="">
            <a href="../change-value-to-reference.html">
                Change Value to Reference
            </a>
    
    
            </li>
                                <li class="">
            <a href="../change-reference-to-value.html">
                Change Reference to Value
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-array-with-object.html">
                Replace Array with Object
            </a>
    
    
            </li>
                                <li class="">
            <a href="../duplicate-observed-data.html">
                Duplicate Observed Data
            </a>
    
    
            </li>
                                <li class="">
            <a href="../change-unidirectional-association-to-bidirectional.html">
                Change Unidirectional Association to Bidirectional
            </a>
    
    
            </li>
                                <li class="">
            <a href="../change-bidirectional-association-to-unidirectional.html">
                Change Bidirectional Association to Unidirectional
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-magic-number-with-symbolic-constant.html">
                Replace Magic Number with Symbolic Constant
            </a>
    
    
            </li>
                                <li class="">
            <a href="../encapsulate-field.html">
                Encapsulate Field
            </a>
    
    
            </li>
                                <li class="">
            <a href="../encapsulate-collection.html">
                Encapsulate Collection
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-type-code-with-class.html">
                Replace Type Code with Class
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-type-code-with-subclasses.html">
                Replace Type Code with Subclasses
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-type-code-with-state-strategy.html">
                Replace Type Code with State/Strategy
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-subclass-with-fields.html">
                Replace Subclass with Fields
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/techniques/simplifying-conditional-expressions.html">
                Simplifying Conditional Expressions
            </a>
    
            <ul >
                            <li class="">
            <a href="../decompose-conditional.html">
                Decompose Conditional
            </a>
    
    
            </li>
                                <li class="">
            <a href="../consolidate-conditional-expression.html">
                Consolidate Conditional Expression
            </a>
    
    
            </li>
                                <li class="">
            <a href="../consolidate-duplicate-conditional-fragments.html">
                Consolidate Duplicate Conditional Fragments
            </a>
    
    
            </li>
                                <li class="">
            <a href="../remove-control-flag.html">
                Remove Control Flag
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-nested-conditional-with-guard-clauses.html">
                Replace Nested Conditional with Guard Clauses
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-conditional-with-polymorphism.html">
                Replace Conditional with Polymorphism
            </a>
    
    
            </li>
                                <li class="">
            <a href="../introduce-null-object.html">
                Introduce Null Object
            </a>
    
    
            </li>
                                <li class="">
            <a href="../introduce-assertion.html">
                Introduce Assertion
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/techniques/simplifying-method-calls.html">
                Simplifying Method Calls
            </a>
    
            <ul >
                            <li class="">
            <a href="../rename-method.html">
                Rename Method
            </a>
    
    
            </li>
                                <li class="">
            <a href="../add-parameter.html">
                Add Parameter
            </a>
    
    
            </li>
                                <li class="">
            <a href="../remove-parameter.html">
                Remove Parameter
            </a>
    
    
            </li>
                                <li class="">
            <a href="../separate-query-from-modifier.html">
                Separate Query from Modifier
            </a>
    
    
            </li>
                                <li class="">
            <a href="../parameterize-method.html">
                Parameterize Method
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-parameter-with-explicit-methods.html">
                Replace Parameter with Explicit Methods
            </a>
    
    
            </li>
                                <li class="">
            <a href="../preserve-whole-object.html">
                Preserve Whole Object
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-parameter-with-method-call.html">
                Replace Parameter with Method Call
            </a>
    
    
            </li>
                                <li class="">
            <a href="../introduce-parameter-object.html">
                Introduce Parameter Object
            </a>
    
    
            </li>
                                <li class="">
            <a href="../remove-setting-method.html">
                Remove Setting Method
            </a>
    
    
            </li>
                                <li class="">
            <a href="../hide-method.html">
                Hide Method
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-constructor-with-factory-method.html">
                Replace Constructor with Factory Method
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-error-code-with-exception.html">
                Replace Error Code with Exception
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-exception-with-test.html">
                Replace Exception with Test
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/techniques/dealing-with-generalization.html">
                Dealing with Generalization
            </a>
    
            <ul >
                            <li class="">
            <a href="../pull-up-field.html">
                Pull Up Field
            </a>
    
    
            </li>
                                <li class="">
            <a href="../pull-up-method.html">
                Pull Up Method
            </a>
    
    
            </li>
                                <li class="">
            <a href="../pull-up-constructor-body.html">
                Pull Up Constructor Body
            </a>
    
    
            </li>
                                <li class="">
            <a href="../push-down-method.html">
                Push Down Method
            </a>
    
    
            </li>
                                <li class="">
            <a href="../push-down-field.html">
                Push Down Field
            </a>
    
    
            </li>
                                <li class="">
            <a href="../extract-subclass.html">
                Extract Subclass
            </a>
    
    
            </li>
                                <li class="">
            <a href="../extract-superclass.html">
                Extract Superclass
            </a>
    
    
            </li>
                                <li class="">
            <a href="../extract-interface.html">
                Extract Interface
            </a>
    
    
            </li>
                                <li class="">
            <a href="../collapse-hierarchy.html">
                Collapse Hierarchy
            </a>
    
    
            </li>
                                <li class="">
            <a href="../form-template-method.html">
                Form Template Method
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-inheritance-with-delegation.html">
                Replace Inheritance with Delegation
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-delegation-with-inheritance.html">
                Replace Delegation with Inheritance
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                        </ul>
    
            </li>
                        </ul>
    
            </li>
                                <li class="trail">
            <a href="../design-patterns.html">
                <i class="fa fa-fw fa-puzzle-piece" aria-hidden="true"></i> Design Patterns
            </a>
    
            <ul >
                            <li class="">
            <a href="what-is-pattern.html">
                What is a Pattern
            </a>
    
            <ul >
                            <li class="">
            <a href="what-is-pattern.html">
                What's a design pattern?
            </a>
    
    
            </li>
                                <li class="">
            <a href="history.html">
                History of patterns
            </a>
    
    
            </li>
                                <li class="">
            <a href="why-learn-patterns.html">
                Why should I learn patterns?
            </a>
    
    
            </li>
                                <li class="">
            <a href="criticism.html">
                Criticism of patterns
            </a>
    
    
            </li>
                                <li class="">
            <a href="classification.html">
                Classification of patterns
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="catalog.html">
                Catalog
            </a>
    
    
            </li>
                                <li class="menu-third-level">
            <a href="creational-patterns.html">
                Creational Patterns
            </a>
    
            <ul >
                            <li class="">
            <a href="factory-method.html">
                Factory Method
            </a>
    
    
            </li>
                                <li class="">
            <a href="abstract-factory.html">
                Abstract Factory
            </a>
    
    
            </li>
                                <li class="">
            <a href="builder.html">
                Builder
            </a>
    
    
            </li>
                                <li class="">
            <a href="prototype.html">
                Prototype
            </a>
    
    
            </li>
                                <li class="">
            <a href="singleton.html">
                Singleton
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="menu-third-level trail">
            <a href="structural-patterns.html">
                Structural Patterns
            </a>
    
            <ul >
                            <li class="">
            <a href="adapter.html">
                Adapter
            </a>
    
    
            </li>
                                <li class="">
            <a href="bridge.html">
                Bridge
            </a>
    
    
            </li>
                                <li class="">
            <a href="composite.html">
                Composite
            </a>
    
    
            </li>
                                <li class="">
            <a href="decorator.html">
                Decorator
            </a>
    
    
            </li>
                                <li class="">
            <a href="facade.html">
                Facade
            </a>
    
    
            </li>
                                <li class="trail active">
            <a href="flyweight.html">
                Flyweight
            </a>
    
    
            </li>
                                <li class="">
            <a href="proxy.html">
                Proxy
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="menu-third-level">
            <a href="behavioral-patterns.html">
                Behavioral Patterns
            </a>
    
            <ul >
                            <li class="">
            <a href="chain-of-responsibility.html">
                Chain of Responsibility
            </a>
    
    
            </li>
                                <li class="">
            <a href="command.html">
                Command
            </a>
    
    
            </li>
                                <li class="">
            <a href="iterator.html">
                Iterator
            </a>
    
    
            </li>
                                <li class="">
            <a href="mediator.html">
                Mediator
            </a>
    
    
            </li>
                                <li class="">
            <a href="memento.html">
                Memento
            </a>
    
    
            </li>
                                <li class="">
            <a href="observer.html">
                Observer
            </a>
    
    
            </li>
                                <li class="">
            <a href="state.html">
                State
            </a>
    
    
            </li>
                                <li class="">
            <a href="strategy.html">
                Strategy
            </a>
    
    
            </li>
                                <li class="">
            <a href="template-method.html">
                Template Method
            </a>
    
    
            </li>
                                <li class="">
            <a href="visitor.html">
                Visitor
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="menu-code-examples">
            <a href="examples.html">
                Code Examples
            </a>
    
            <ul >
                            <li class="menu-code-examples-item">
            <a href="csharp.html">
                C#
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="cpp.html">
                C++
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="go.html">
                Go
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="java.html">
                Java
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="php.html">
                PHP
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="python.html">
                Python
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="ruby.html">
                Ruby
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="swift.html">
                Swift
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="typescript.html">
                TypeScript
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                        </ul>
    
            </li>
                        </ul>
    
            </div>
        <div class="sidebar-controls">
            <div class="sidebar-controls-container">
                <a href="../login.html" title="Log in"><i
                            class="fa fa-fw fa-fw fa-user"></i> Log in</a>
                <a href="https://feedback.refactoring.guru/" class="userecho-public" rel="nofollow" title="Feedback"><i class="fa fa-fw fa-fw fa-envelope" aria-hidden="true"></i> Contact us</a>
            </div>
        </div>
    </div>
</aside>
    <footer class="footer center-content">
    <div class="footer-container center-content-container">
        <div class="footer-inner container-fluid">
            <div class="row">
                <div class="col-8 col-md-10">
                    <ul class="footer-list footer-list-horizontal">
                        <li><a href="../index.html">Home</a></li>
                        <li><a href="../refactoring.html">Refactoring</a></li>
                        <li><a href="../design-patterns.html">Design Patterns</a></li>
                        <li><a href="../store.html">Premium Content</a></li>
                        <li><a href="https://refactoring.userecho.com/" rel="nofollow" class="userecho-public">Forum</a></li>
                        <li><a href="https://refactoring.userecho.com/" rel="nofollow" class="userecho-private">Contact us</a></li>
                    </ul>
                </div>
                <div class="col-4 col-md-2">
                    <ul class="footer-list footer-list-iconic">
                                                    <li><a href="https://www.facebook.com/refactoring.guru"><i class="fa fa-facebook-official"></i></a></li>
                                                <li><a href="../sendy/form.html" rel="nofollow"><i class="fa fa-envelope" aria-hidden="true"></i></a></li>
                        <li><a href="https://github.com/RefactoringGuru"><i class="fa fa-github-circled"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="footer-second">
        <div class="footer-container center-content-container">
            <div class="footer-inner container-fluid">
                <div class="row">
                    <div class="col-12 col-sm-8">
                        <i class="fa fa-fw fa-copyright"></i> 2014-2022 <a href="../index.html">Refactoring.Guru</a>. <span style="white-space: nowrap">All rights reserved.</span><br>
                        <object class="fa-fw" style="height: 0.8rem; filter: invert(50%);"  type="image/svg+xml" data="../images/content-public/icons/fa-building4895.svg?id=afddb5806968b0a9acfc1df75a181234">
                            <img class="fa-fw" style="height: 0.8rem;" src="../images/content-public/icons/fa-building4895.svg?id=afddb5806968b0a9acfc1df75a181234" alt="Organization address"/>
                        </object> Khmelnitske shosse 19 / 27, Kamianets-Podilskyi, Ukraine, 32305<br>
                        <i class="fa fa-fw fa-envelope"></i>  Email: support@refactoring.guru

                        <div class="mt-2">
                            <i class="fa fa-fw fa-image"></i> Illustrations by <a href="http://zhart.us/" rel="nofollow"><span style="white-space: nowrap">Dmitry Zhart</span></a></div>
                    </div>
                    <div class="footer-links-right col-12 col-sm-4 mt-4 mt-sm-0">
                        <div class="row">
                            <div class="col-8 col-sm-12">
                                <ul class="footer-list">
                                    <li><a href="../terms.html"><span>Terms &amp; Conditions</span></a>
                                    </li>
                                    <li><a href="../privacy-policy.html"><span>Privacy Policy</span></a>
                                    </li>
                                    <li><a href="../content-usage-policy.html"><span>Content Usage Policy</span></a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>

</div>


    <script>
function extend(){var extended={};var deep=false;var i=0;var length=arguments["length"];if(Object["prototype"]["toString"]["call"](arguments[0])=== '[object Boolean]'){deep= arguments[0];i++};var merge=function(obj){for(var prop in obj){if(Object["prototype"]["hasOwnProperty"]["call"](obj,prop)){if(deep&& Object["prototype"]["toString"]["call"](obj[prop])=== '[object Object]'){extended[prop]= extend(true,extended[prop],obj[prop])}else {extended[prop]= obj[prop]}}}};for(;i< length;i++){var obj=arguments[i];merge(obj)};return extended}
function defer(method) {if (window.jQuery) {method();} else {setTimeout(function() { defer(method) }, 50);}}
</script>
<script>
+function(sd){sd = (typeof sd === "string") ? JSON.parse(atob(sd)) : sd;for(var property in sd){if(window[property]!== null&&  typeof window[property]=== 'object'){window[property]= extend(true,window[property],sd[property])}else {window[property]= sd[property]}}}("eyJsb2NhbGUiOiJlbiIsImxvY2FsZV9wcmVmaXgiOiIiLCJsb2NhbGl6ZWRfdXJsX3ByZWZpeF9tIjoiaHR0cHM6XC9cL3JlZmFjdG9yaW5nLmd1cnVcLyIsInVybF9wcmVmaXhfbSI6Imh0dHBzOlwvXC9yZWZhY3RvcmluZy5ndXJ1XC8iLCJsb2NhbGl6ZWRfdXJsX3ByZWZpeCI6Imh0dHBzOlwvXC9yZWZhY3RvcmluZy5ndXJ1XC8iLCJ1cmxfcHJlZml4IjoiaHR0cHM6XC9cL3JlZmFjdG9yaW5nLmd1cnVcLyIsImNoaW5lc2VfaG9tZSI6Imh0dHBzOlwvXC9yZWZhY3RvcmluZ2d1cnUuY25cLyIsInVzZXJfZWNob19hbGlhcyI6InJlZmFjdG9yaW5nIiwidXNlcl9lY2hvX2hvc3QiOiJmZWVkYmFjay5yZWZhY3RvcmluZy5ndXJ1IiwidXNlcl9lY2hvX3ByaXZhdGVfZm9ydW0iOiIyIiwidXNlcl9lY2hvX2xvY2FsZSI6ImVuIiwidXNlcl9lY2hvX3B1YmxpY19mb3J1bSI6IjMiLCJ1c2VyX2VjaG9fcHVibGljX2ZvcnVtX3VybCI6Imh0dHBzOlwvXC9mZWVkYmFjay5yZWZhY3RvcmluZy5ndXJ1XC8iLCJ1c2VyX2VjaG9fc3NvX3Rva2VuIjoiIn0=");
</script>

    <script defer>
        if (window.dataLayer && window.google_optimize) {
            window.dataLayer.push({'event': 'optimize.activate'});
        }
    </script>
 
<script>(function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;h.start=1*new Date;
        h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};
        (a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;
    })(window,document.documentElement,'async-hide','dataLayer',4000,
        {'GTM-M58XZN4':true});</script>
<link rel="preconnect dns-prefetch" href="https://www.google-analytics.com/">
<script>
    var getCookie = function(name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(';');
        for(var i=0;i < ca.length;i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') c = c.substring(1,c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
        }
        return null;
    };
    var eraseCookie = function (name) {
        document.cookie = name+'=; Path=/; Max-Age=-99999999;';
    };

    window.google_analytics = 'UA-521840-40';

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','../../www.google-analytics.com/analytics.js','ga');

    var ga_queue = [];
    window.gaOnCreate = function(){
        ga_queue.push(arguments);
    };

            doTracking();
    
    function doTracking(clientId) {
        window.gaOnCreate = function(){
            ga.apply(this, arguments);
        };

        var options = {
            'siteSpeedSampleRate': 100
        };
        if (clientId) {
            options.clientId = clientId;
        }
        ga('create', 'UA-521840-40', options);

                    ga('require', 'GTM-M58XZN4');
            window.google_optimize = 'GTM-M58XZN4';
        
        // Fix broken Social Login referrer.
        window.social_login_provider = window.social_login_provider || getCookie('social_login_provider');
        if (window.social_login_provider) {
            ga('set', 'referrer', null);
            ga('send', 'social', window.social_login_provider, 'login', window.location.href);
            eraseCookie('social_login_provider');
        }

        var user_id = getCookie('user_id');
        if (user_id) {
            ga('set', 'userId', user_id);
        } else {
            ga('set', 'userId', null);
        }

        var location = document.location.href;
        if (typeof window.analytics_path_prefix === 'string') {
            if (/^(https?:\/\/[^\/]+?)\/$/.test(location)) {
                location = location.replace(/(https?:\/\/[^\/]+?)\//, '$1' + window.analytics_path_prefix);
            }
            else {
                location = location.replace(/(https?:\/\/[^\/]+?)\//, '$1' + window.analytics_path_prefix + '/');
            }
            ga('set', 'location', location);
        }

        if (typeof window.analytics_location_prefix === 'string') {
            location = location.replace(/(https?:\/\/[^\/]+?)\//, window.analytics_location_prefix);
            ga('set', 'location', location);
        }

        ga('require', 'ec');
        ga('send', 'pageview', (typeof window.analytics_path_prefix === 'string' ? window.analytics_path_prefix : '') + document.location.pathname);

        ga_queue.forEach(function(item){
            ga.apply(this, item);
        });
    }
</script>

<script defer>
    window.socialLikesButtons = {
                facebook: {
            counterUrl: "",
            convertNumber: null
        },
                        };
</script>

<script defer>
    var CodeMirrorScripts = ["/js/codemirror.min.js?id=24aa863dfde7c99eb17d4102684aea27"];
</script>



    <script>window.loadContent = true;window.loadCart = true;</script>
</body>

<!-- Mirrored from refactoring.guru/design-patterns/flyweight by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 07 Jun 2022 19:14:05 GMT -->
</html>