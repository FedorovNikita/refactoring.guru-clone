<!DOCTYPE html>
<html lang="ru">

<!-- Mirrored from refactoring.guru/ru/design-patterns/memento/java/example by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 07 Jun 2022 19:23:45 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# website: http://ogp.me/ns/website#">
    <meta charset="utf-8">
    <title>Снимок на Java</title>

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="alternate" href="../../../../design-patterns/memento/java/example.html" hreflang="x-default"/>
    <link rel="alternate" href="../../../../es/design-patterns/memento/java/example.html" hreflang="es"/>
    <link rel="alternate" href="../../../../fr/design-patterns/memento/java/example.html" hreflang="fr"/>
    <link rel="alternate" href="../../../../ja/design-patterns/memento/java/example.html" hreflang="ja"/>
    <link rel="alternate" href="../../../../ko/design-patterns/memento/java/example.html" hreflang="ko"/>
    <link rel="alternate" href="../../../../pl/design-patterns/memento/java/example.html" hreflang="pl"/>
    <link rel="alternate" href="../../../../pt-br/design-patterns/memento/java/example.html" hreflang="pt-br"/>
    <link rel="alternate" href="example.html" hreflang="ru"/>
    <link rel="alternate" href="../../../../uk/design-patterns/memento/java/example.html" hreflang="uk"/>
    <link rel="alternate" href="https://refactoringguru.cn/design-patterns/memento/java/example" hreflang="zh"/>

    <meta name="description" content="Пример паттерна Снимок (Memento) на языке программирования Java. Код с детальными комментариями на русском языке. Снимок — это поведенческий паттерн, позволяющий делать снимки внутреннего состояния объектов, а затем восстанавливать их.">

    <link rel="canonical" href="example.html"/>

    <link rel="icon" type="image/x-icon" href="../../../../favicon.png"/>

<script type="application/ld+json">
{"@context": "http://schema.org", "@graph": [{"@type":"Person","@id":"https://refactoring.guru/ru#founder","name":"Александр Швец"},{"@type":"Organization","@id":"https://refactoring.guru/ru#organization","name":"Refactoring.Guru / Рефакторинг.Гуру","description":"Рефакторинг.Гуру посвящён тёмным материям программирования: рефакторингу, паттернам проектирования, принципам SOLID и другим важным темам из мира программирования.","image":{"@type":"ImageObject","@id":"https://refactoring.guru/ru#organizationlogo","url":"https://refactoring.guru/images/content-public/logos/logo-plain.png","caption":"Refactoring.Guru"},"logo":{"@id":"https://refactoring.guru/ru#organizationlogo"},"founder":{"@id":"https://refactoring.guru/ru#founder"},"sameAs":["https://www.facebook.com/refactoring.guru","https://twitter.com/RefactoringGuru","https://github.com/RefactoringGuru"]},{"@type":"WebSite","@id":"https://refactoring.guru/ru#website","url":"https://refactoring.guru/ru","name":"Refactoring.Guru / Рефакторинг.Гуру","description":"Рефакторинг.Гуру посвящён тёмным материям программирования: рефакторингу, паттернам проектирования, принципам SOLID и другим важным темам из мира программирования.","author":{"@id":"https://refactoring.guru/ru#founder"},"publisher":{"@id":"https://refactoring.guru/ru#organization"},"copyrightYear":2014},{"@type":"WebPage","@id":"https://refactoring.guru/ru/design-patterns/memento/java/example#webpage","url":"https://refactoring.guru/ru/design-patterns/memento/java/example","inLanguage":"ru","name":"Снимок на Java","description":"Пример паттерна Снимок (Memento) на языке программирования Java. Код с детальными комментариями на русском языке. Снимок — это поведенческий паттерн, позволяющий делать снимки внутреннего состояния объектов, а затем восстанавливать их.","isPartOf":{"@id":"https://refactoring.guru/ru#website"},"breadcrumb":{"@id":"https://refactoring.guru/ru/design-patterns/memento/java/example#breadcrumb"},"primaryImageOfPage":{"@id":"https://refactoring.guru/ru/design-patterns/memento/java/example#primaryimage"},"image":{"@type":"ImageObject","@id":"https://refactoring.guru/ru/design-patterns/memento/java/example#primaryimage","url":"https://refactoring.guru/images/patterns/cards/memento-mini-3x.png","width":420,"height":300}},{"@type":"Article","@id":"https://refactoring.guru/ru/design-patterns/memento/java/example#article","isPartOf":{"@id":"https://refactoring.guru/ru/design-patterns/memento/java/example#webpage"},"mainEntityOfPage":{"@id":"https://refactoring.guru/ru/design-patterns/memento/java/example#webpage"},"author":{"@id":"https://refactoring.guru/ru#founder"},"publisher":{"@id":"https://refactoring.guru/ru#organization"},"headline":"Снимок на Java","datePublished":"2021-01-01","dateModified":"2022-01-01","articleSection":"Снимок","image":{"@id":"https://refactoring.guru/ru/design-patterns/memento/java/example#primaryimage"}},{"@type":"BreadcrumbList","@id":"https://refactoring.guru/ru/design-patterns/memento/java/example#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Главная","item":"https://refactoring.guru/ru"},{"@type":"ListItem","position":2,"name":"Паттерны проектирования","item":"https://refactoring.guru/ru/design-patterns"},{"@type":"ListItem","position":3,"name":"Снимок","item":"https://refactoring.guru/ru/design-patterns/memento"},{"@type":"ListItem","position":4,"name":"Java","item":"https://refactoring.guru/ru/design-patterns/java"}]},{"@type":"SoftwareSourceCode","@id":"https://refactoring.guru/ru/design-patterns/memento/java/example#code","isPartOf":{"@id":"https://refactoring.guru/ru/design-patterns/memento/java/example#webpage"},"mainEntityOfPage":{"@id":"https://refactoring.guru/ru/design-patterns/memento/java/example#webpage"},"author":{"@id":"https://refactoring.guru/ru#founder"},"publisher":{"@id":"https://refactoring.guru/ru#organization"},"headline":"Снимок на Java","datePublished":"2021-01-01","dateModified":"2022-01-01","programmingLanguage":"Java","codeSampleType":"full"}] }
</script>

<meta property="fb:app_id" content="666819623386327" />
<meta property="og:type"  content="website" />
<meta property="og:image" content="https://refactoring.guru/ru/images/refactoring/social/facebook-share-preview.png?id=dbf9e98269595be86eb668f365be6868"/>

        <link rel="stylesheet" href="../../../../css/public-packed.min29c2.css?id=72df70415a2662bdd8f64ffd40983c30">

<style type="text/css">
    @font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:local("PT Sans"),local("PTSans-Regular"),url(../../../../fonts/PTSans/ptsans-regular_cyrillic-extc4ca.woff2?1) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:local("PT Sans"),local("PTSans-Regular"),url(../../../../fonts/PTSans/ptsans-regular_cyrillicc4ca.woff2?1) format("woff2");unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:local("PT Sans"),local("PTSans-Regular"),url(../../../../fonts/PTSans/ptsans-regular_latin-extc4ca.woff2?1) format("woff2");unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:local("PT Sans"),local("PTSans-Regular"),url(../../../../fonts/PTSans/ptsans-regular_latinc4ca.woff2?1) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:local("PT Sans"),local("PTSans-Regular"),url(../../../../fonts/PTSans/ptsans-regular_enc4ca.woff2?1) format("woff2");unicode-range:U+0-FF,U+131,U+142,U+152,U+153,U+2BB,U+2BC,U+2C6,U+2DA,U+2DC,U+420,U+423,U+430,U+438-43A,U+43D,U+440,U+441,U+443,U+44C,U+457,U+2000-206F,U+2074,U+20AA-20AC,U+20B4,U+20B9,U+20BA,U+20BD,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:local("PT Sans Bold"),local("PTSans-Bold"),url(../../../../fonts/PTSans/ptsans-bold_cyrillic-extc4ca.woff2?1) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:local("PT Sans Bold"),local("PTSans-Bold"),url(../../../../fonts/PTSans/ptsans-bold_cyrillicc4ca.woff2?1) format("woff2");unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:local("PT Sans Bold"),local("PTSans-Bold"),url(../../../../fonts/PTSans/ptsans-bold_latin-extc4ca.woff2?1) format("woff2");unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:local("PT Sans Bold"),local("PTSans-Bold"),url(../../../../fonts/PTSans/ptsans-bold_latinc4ca.woff2?1) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:local("PT Sans Bold"),local("PTSans-Bold"),url(../../../../fonts/PTSans/ptsans-bold_enc4ca.woff2?1) format("woff2");unicode-range:U+0-FF,U+131,U+142,U+152,U+153,U+2BB,U+2BC,U+2C6,U+2DA,U+2DC,U+420,U+423,U+430,U+438-43A,U+43D,U+440,U+441,U+443,U+44C,U+457,U+2000-206F,U+2074,U+20AA-20AC,U+20B4,U+20B9,U+20BA,U+20BD,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}
</style>
<link rel="preload" href="../../../../fonts/PTSans/ptsans-regular_enc4ca.woff2?1" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="../../../../fonts/PTSans/ptsans-bold_enc4ca.woff2?1" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="../../../../fonts/PTSans/ptsans-regular_cyrillicc4ca.woff2?1" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="../../../../fonts/PTSans/ptsans-bold_cyrillicc4ca.woff2?1" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="../../../../fonts/fontello/fontawesomea92a.woff2?15843843" as="font" type="font/woff2" crossorigin>


<script defer src="../../../../js/public.min1749.js?id=77d40430343920ca57d184f85668a382"></script>



</head>
<body class="locale-ru    announcement   memento-in-java" data-body_class="memento-in-java">

<div class="body-holder">


            <div class="announcement-block prom" style="background:black;" data-id="DIDP-announcement" data-creative-id="ru" data-position="top"><div class="announcement-block-inner">
                САЙТ ЗАБЛОКИРОВАН РОСКОМНАДЗОРОМ <span style="color: red; font-weight: bold;">ИЗ-ЗА КАРТИНКИ ЕНОТА</span>. <a href="https://feedback.refactoring.guru/ru/communities/1/topics/4116-sajt-zablokirovan-v-rossii">С VPN всё работает »</a>
            </div></div>
    
    <div class="cart-placeholder">
    <div class="cart-block-container" style="display:none">
        <div class="cart-block btn-group">
            <a href="#checkout" class="btn cart open-checkout">
                <span class="cart-text"></span>&nbsp;<strong class="cart-total font-money"></strong>
            </a><a href="#checkout" class="btn btn-secondary checkout open-checkout"><i class="fa fa-shopping-cart" aria-hidden="true"></i> <span class="btn-text-span d-none d-sm-inline-block d-lg-none d-hg-inline-block"></span></a>
        </div>
    </div>
</div>
    <main role="main" class="main-content top-content center-content " data-page_class="">
        <div class="main-content-container center-content-container">
                        <div class="pattern pattern-example page text">
<article>
    <div class="breadcrumb">
                                    <a class="home" href="../../../../index.html"><i class="fa fa-home" aria-hidden="true"></i></a>
                                                / <a class="type" href="../../../design-patterns.html">Паттерны проектирования</a>
                                                / <a class="type" href="../../memento.html">Снимок</a>
                                                / <a class="type" href="../../java.html">Java</a>
                        </div>

    <a href="../../memento.html" class="pattern-card-example memento-in-java">
        <span class="pattern-image"><img alt="Снимок" src="../../../../images/patterns/cards/memento-mini723d.png?id=8b2ea4dc2c5d15775a654808cc9de099" srcset="/images/patterns/cards/memento-mini-2x.png?id=1d7cba189261dd84b11369a6838b1055 2x"></span>
    </a>

    <h1 class="title"><strong>Снимок</strong> на Java</h1>

    <div class="pattern-example-brief">
        <p class="big"><b>Снимок</b> — это поведенческий паттерн, позволяющий делать снимки внутреннего состояния объектов, а затем восстанавливать их.</p>
<p>При этом Снимок не раскрывает подробностей реализации объектов, и клиент не имеет доступа к защищённой информации объекта.</p>

    </div>

    <div style="text-align:center; margin-bottom: 40px;">
        <a href="../../memento.html" class="btn btn-lg btn-primary"><i class="fa fa-newspaper" aria-hidden="true"></i> Подробней о Снимке <i class="fa fa-arrow-right" aria-hidden="true"></i></a>
    </div>

        <h2 id="lang-features">Особенности паттерна на Java</h2>

    <p><strong>Сложность:</strong> <span class="fa-stars"><i class="fa fa-fw fa-star" aria-hidden="true"></i><i class="fa fa-fw fa-star" aria-hidden="true"></i><i class="fa fa-fw fa-star" aria-hidden="true"></i></span></p>
<p><strong>Популярность:</strong> <span class="fa-stars"><i class="fa fa-fw fa-star" aria-hidden="true"></i><i class="fa fa-fw fa-star-o" aria-hidden="true"></i><i class="fa fa-fw fa-star-o" aria-hidden="true"></i></span></p>
<p><strong>Применимость:</strong> Снимок на Java чаще всего реализуют с помощью сериализации. Но это не единственный, да и не самый эффективный метод сохранения состояния объектов во время выполнения программы.</p>
<p>Примеры Снимка в стандартных библиотеках Java:</p>
<ul>
<li>Все реализации <a href="https://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html"><code>java.io.Serializable</code></a> могут быть использованы как аналог Снимка.</li>
<li>Все реализации <a href="https://docs.oracle.com/javaee/7/api/javax/faces/component/StateHolder.html"><code>javax.faces.component.StateHolder</code></a>
</li>
</ul>

    
    <div class="sidebar-navigation with-scroll">
            
        <div class="en-title">
            Навигация
        </div>

                    
        <div class="en-intro">
            <i class="fa fa-fw fa-newspaper" aria-hidden="true"></i>&nbsp;<a href="#">Интро</a>
        </div>

                    
        <div class="en-intro">
            <i class="fa fa-fw fa-newspaper" aria-hidden="true"></i>&nbsp;<a href="#example-0">Отмена в редакторе фигур</a>
        </div>

                    
        <div class="en-file">
            <i class="fa fa-fw fa-folder-open" aria-hidden="true"></i>&nbsp;editor
        </div>

                                <div class="en-inside">
        
        <div class="en-file">
            <i class="fa fa-fw fa-angle-right" aria-hidden="true"></i>&nbsp;<i class="fa fa-fw fa-file-code" aria-hidden="true"></i>&nbsp;<a href="#example-0--editor-Editor-java">Editor</a>
        </div>

                    </div>
                                <div class="en-inside">
        
        <div class="en-file">
            <i class="fa fa-fw fa-angle-right" aria-hidden="true"></i>&nbsp;<i class="fa fa-fw fa-file-code" aria-hidden="true"></i>&nbsp;<a href="#example-0--editor-Canvas-java">Canvas</a>
        </div>

                    </div>
                    
        <div class="en-file">
            <i class="fa fa-fw fa-folder-open" aria-hidden="true"></i>&nbsp;history
        </div>

                                <div class="en-inside">
        
        <div class="en-file">
            <i class="fa fa-fw fa-angle-right" aria-hidden="true"></i>&nbsp;<i class="fa fa-fw fa-file-code" aria-hidden="true"></i>&nbsp;<a href="#example-0--history-History-java">History</a>
        </div>

                    </div>
                                <div class="en-inside">
        
        <div class="en-file">
            <i class="fa fa-fw fa-angle-right" aria-hidden="true"></i>&nbsp;<i class="fa fa-fw fa-file-code" aria-hidden="true"></i>&nbsp;<a href="#example-0--history-Memento-java">Memento</a>
        </div>

                    </div>
                    
        <div class="en-file">
            <i class="fa fa-fw fa-folder-open" aria-hidden="true"></i>&nbsp;commands
        </div>

                                <div class="en-inside">
        
        <div class="en-file">
            <i class="fa fa-fw fa-angle-right" aria-hidden="true"></i>&nbsp;<i class="fa fa-fw fa-file-code" aria-hidden="true"></i>&nbsp;<a href="#example-0--commands-Command-java">Command</a>
        </div>

                    </div>
                                <div class="en-inside">
        
        <div class="en-file">
            <i class="fa fa-fw fa-angle-right" aria-hidden="true"></i>&nbsp;<i class="fa fa-fw fa-file-code" aria-hidden="true"></i>&nbsp;<a href="#example-0--commands-ColorCommand-java">Color&shy;Command</a>
        </div>

                    </div>
                                <div class="en-inside">
        
        <div class="en-file">
            <i class="fa fa-fw fa-angle-right" aria-hidden="true"></i>&nbsp;<i class="fa fa-fw fa-file-code" aria-hidden="true"></i>&nbsp;<a href="#example-0--commands-MoveCommand-java">Move&shy;Command</a>
        </div>

                    </div>
                    
        <div class="en-file">
            <i class="fa fa-fw fa-folder-open" aria-hidden="true"></i>&nbsp;shapes
        </div>

                                <div class="en-inside">
        
        <div class="en-file">
            <i class="fa fa-fw fa-angle-right" aria-hidden="true"></i>&nbsp;<i class="fa fa-fw fa-file-code" aria-hidden="true"></i>&nbsp;<a href="#example-0--shapes-Shape-java">Shape</a>
        </div>

                    </div>
                                <div class="en-inside">
        
        <div class="en-file">
            <i class="fa fa-fw fa-angle-right" aria-hidden="true"></i>&nbsp;<i class="fa fa-fw fa-file-code" aria-hidden="true"></i>&nbsp;<a href="#example-0--shapes-BaseShape-java">Base&shy;Shape</a>
        </div>

                    </div>
                                <div class="en-inside">
        
        <div class="en-file">
            <i class="fa fa-fw fa-angle-right" aria-hidden="true"></i>&nbsp;<i class="fa fa-fw fa-file-code" aria-hidden="true"></i>&nbsp;<a href="#example-0--shapes-Circle-java">Circle</a>
        </div>

                    </div>
                                <div class="en-inside">
        
        <div class="en-file">
            <i class="fa fa-fw fa-angle-right" aria-hidden="true"></i>&nbsp;<i class="fa fa-fw fa-file-code" aria-hidden="true"></i>&nbsp;<a href="#example-0--shapes-Dot-java">Dot</a>
        </div>

                    </div>
                                <div class="en-inside">
        
        <div class="en-file">
            <i class="fa fa-fw fa-angle-right" aria-hidden="true"></i>&nbsp;<i class="fa fa-fw fa-file-code" aria-hidden="true"></i>&nbsp;<a href="#example-0--shapes-Rectangle-java">Rectangle</a>
        </div>

                    </div>
                                <div class="en-inside">
        
        <div class="en-file">
            <i class="fa fa-fw fa-angle-right" aria-hidden="true"></i>&nbsp;<i class="fa fa-fw fa-file-code" aria-hidden="true"></i>&nbsp;<a href="#example-0--shapes-CompoundShape-java">Compound&shy;Shape</a>
        </div>

                    </div>
                    
        <div class="en-file">
            <i class="fa fa-fw fa-file-code" aria-hidden="true"></i>&nbsp;<a href="#example-0--Demo-java">Demo</a>
        </div>

                    
        <div class="en-file">
            <i class="fa fa-fw fa-file-image" aria-hidden="true"></i>&nbsp;<a href="#example-0--OutputDemo-png">Output&shy;Demo</a>
        </div>

                </div>

            <a id="example-0"></a>
                    <h2 id="example-0-title">Отмена в редакторе фигур</h2>
            <p>В данном графическом редакторе мы можем менять цвет и позицию фигур. Пользователь может отменять или повторять действия, используя горячие клавиши.</p>
<p>Механизм отмены построен при помощи паттерна Снимок и Команды. Перед совершением команды, редактор сохраняет в истории снимок своего состояния. Если нужно отменить команду, редактор берет последнюю запись из истории и восстанавливает состояние из снимка. Для последующей отмены берется команда дальше из истории.</p>
<p>Отмененные команды хранятся в истории пока пользователь не совершит какое-то действие. Это нужно, чтобы иметь возможность повторять отменённые команды.</p>
<h2 class="example-title"><a class="anchor" id="example-0--editor"><i class="fa fa-fw fa-folder-open" aria-hidden="true"></i></a> <strong>editor</strong> </h2><h4><a class="anchor" id="example-0--editor-Editor-java"><i class="fa fa-fw fa-file-code" aria-hidden="true"></i></a> <strong>editor/Editor.java:</strong>  Редактор</h4>
<figure class="code">
<pre class="code" lang="java">package refactoring_guru.memento.example.editor;

import refactoring_guru.memento.example.commands.Command;
import refactoring_guru.memento.example.history.History;
import refactoring_guru.memento.example.history.Memento;
import refactoring_guru.memento.example.shapes.CompoundShape;
import refactoring_guru.memento.example.shapes.Shape;

import javax.swing.*;
import java.io.*;
import java.util.Base64;

public class Editor extends JComponent {
    private Canvas canvas;
    private CompoundShape allShapes = new CompoundShape();
    private History history;

    public Editor() {
        canvas = new Canvas(this);
        history = new History();
    }

    public void loadShapes(Shape... shapes) {
        allShapes.clear();
        allShapes.add(shapes);
        canvas.refresh();
    }

    public CompoundShape getShapes() {
        return allShapes;
    }

    public void execute(Command c) {
        history.push(c, new Memento(this));
        c.execute();
    }

    public void undo() {
        if (history.undo())
            canvas.repaint();
    }

    public void redo() {
        if (history.redo())
            canvas.repaint();
    }

    public String backup() {
        try {
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            ObjectOutputStream oos = new ObjectOutputStream(baos);
            oos.writeObject(this.allShapes);
            oos.close();
            return Base64.getEncoder().encodeToString(baos.toByteArray());
        } catch (IOException e) {
            return &quot;&quot;;
        }
    }

    public void restore(String state) {
        try {
            byte[] data = Base64.getDecoder().decode(state);
            ObjectInputStream ois = new ObjectInputStream(new ByteArrayInputStream(data));
            this.allShapes = (CompoundShape) ois.readObject();
            ois.close();
        } catch (ClassNotFoundException e) {
            System.out.print(&quot;ClassNotFoundException occurred.&quot;);
        } catch (IOException e) {
            System.out.print(&quot;IOException occurred.&quot;);
        }
    }
}
</pre>
</figure>
<h4><a class="anchor" id="example-0--editor-Canvas-java"><i class="fa fa-fw fa-file-code" aria-hidden="true"></i></a> <strong>editor/Canvas.java:</strong>  Холст</h4>
<figure class="code">
<pre class="code" lang="java">package refactoring_guru.memento.example.editor;

import refactoring_guru.memento.example.commands.ColorCommand;
import refactoring_guru.memento.example.commands.MoveCommand;
import refactoring_guru.memento.example.shapes.Shape;

import javax.swing.*;
import javax.swing.border.Border;
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;

class Canvas extends java.awt.Canvas {
    private Editor editor;
    private JFrame frame;
    private static final int PADDING = 10;

    Canvas(Editor editor) {
        this.editor = editor;
        createFrame();
        attachKeyboardListeners();
        attachMouseListeners();
        refresh();
    }

    private void createFrame() {
        frame = new JFrame();
        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        frame.setLocationRelativeTo(null);

        JPanel contentPanel = new JPanel();
        Border padding = BorderFactory.createEmptyBorder(PADDING, PADDING, PADDING, PADDING);
        contentPanel.setBorder(padding);
        contentPanel.setLayout(new BoxLayout(contentPanel, BoxLayout.Y_AXIS));
        frame.setContentPane(contentPanel);

        contentPanel.add(new JLabel(&quot;Select and drag to move.&quot;), BorderLayout.PAGE_END);
        contentPanel.add(new JLabel(&quot;Right click to change color.&quot;), BorderLayout.PAGE_END);
        contentPanel.add(new JLabel(&quot;Undo: Ctrl+Z, Redo: Ctrl+R&quot;), BorderLayout.PAGE_END);
        contentPanel.add(this);
        frame.setVisible(true);
        contentPanel.setBackground(Color.LIGHT_GRAY);
    }

    private void attachKeyboardListeners() {
        addKeyListener(new KeyAdapter() {
            @Override
            public void keyPressed(KeyEvent e) {
                if ((e.getModifiers() &amp; KeyEvent.CTRL_MASK) != 0) {
                    switch (e.getKeyCode()) {
                        case KeyEvent.VK_Z:
                            editor.undo();
                            break;
                        case KeyEvent.VK_R:
                            editor.redo();
                            break;
                    }
                }
            }
        });
    }

    private void attachMouseListeners() {
        MouseAdapter colorizer = new MouseAdapter() {
            @Override
            public void mousePressed(MouseEvent e) {
                if (e.getButton() != MouseEvent.BUTTON3) {
                    return;
                }
                Shape target = editor.getShapes().getChildAt(e.getX(), e.getY());
                if (target != null) {
                    editor.execute(new ColorCommand(editor, new Color((int) (Math.random() * 0x1000000))));
                    repaint();
                }
            }
        };
        addMouseListener(colorizer);

        MouseAdapter selector = new MouseAdapter() {
            @Override
            public void mousePressed(MouseEvent e) {
                if (e.getButton() != MouseEvent.BUTTON1) {
                    return;
                }

                Shape target = editor.getShapes().getChildAt(e.getX(), e.getY());
                boolean ctrl = (e.getModifiers() &amp; ActionEvent.CTRL_MASK) == ActionEvent.CTRL_MASK;

                if (target == null) {
                    if (!ctrl) {
                        editor.getShapes().unSelect();
                    }
                } else {
                    if (ctrl) {
                        if (target.isSelected()) {
                            target.unSelect();
                        } else {
                            target.select();
                        }
                    } else {
                        if (!target.isSelected()) {
                            editor.getShapes().unSelect();
                        }
                        target.select();
                    }
                }
                repaint();
            }
        };
        addMouseListener(selector);


        MouseAdapter dragger = new MouseAdapter() {
            MoveCommand moveCommand;

            @Override
            public void mouseDragged(MouseEvent e) {
                if ((e.getModifiersEx() &amp; MouseEvent.BUTTON1_DOWN_MASK) != MouseEvent.BUTTON1_DOWN_MASK) {
                    return;
                }
                if (moveCommand == null) {
                    moveCommand = new MoveCommand(editor);
                    moveCommand.start(e.getX(), e.getY());
                }
                moveCommand.move(e.getX(), e.getY());
                repaint();
            }

            @Override
            public void mouseReleased(MouseEvent e) {
                if (e.getButton() != MouseEvent.BUTTON1 || moveCommand == null) {
                    return;
                }
                moveCommand.stop(e.getX(), e.getY());
                editor.execute(moveCommand);
                this.moveCommand = null;
                repaint();
            }
        };
        addMouseListener(dragger);
        addMouseMotionListener(dragger);
    }

    public int getWidth() {
        return editor.getShapes().getX() + editor.getShapes().getWidth() + PADDING;
    }

    public int getHeight() {
        return editor.getShapes().getY() + editor.getShapes().getHeight() + PADDING;
    }

    void refresh() {
        this.setSize(getWidth(), getHeight());
        frame.pack();
    }

    public void update(Graphics g) {
        paint(g);
    }

    public void paint(Graphics graphics) {
        BufferedImage buffer = new BufferedImage(this.getWidth(), this.getHeight(), BufferedImage.TYPE_INT_RGB);
        Graphics2D ig2 = buffer.createGraphics();
        ig2.setBackground(Color.WHITE);
        ig2.clearRect(0, 0, this.getWidth(), this.getHeight());

        editor.getShapes().paint(buffer.getGraphics());

        graphics.drawImage(buffer, 0, 0, null);
    }
}
</pre>
</figure>
<h2 class="example-title"><a class="anchor" id="example-0--history"><i class="fa fa-fw fa-folder-open" aria-hidden="true"></i></a> <strong>history</strong> </h2><h4><a class="anchor" id="example-0--history-History-java"><i class="fa fa-fw fa-file-code" aria-hidden="true"></i></a> <strong>history/History.java:</strong>  История использует снимки и команды</h4>
<figure class="code">
<pre class="code" lang="java">package refactoring_guru.memento.example.history;

import refactoring_guru.memento.example.commands.Command;

import java.util.ArrayList;
import java.util.List;

public class History {
    private List&lt;Pair&gt; history = new ArrayList&lt;Pair&gt;();
    private int virtualSize = 0;

    private class Pair {
        Command command;
        Memento memento;
        Pair(Command c, Memento m) {
            command = c;
            memento = m;
        }

        private Command getCommand() {
            return command;
        }

        private Memento getMemento() {
            return memento;
        }
    }

    public void push(Command c, Memento m) {
        if (virtualSize != history.size() &amp;&amp; virtualSize &gt; 0) {
            history = history.subList(0, virtualSize - 1);
        }
        history.add(new Pair(c, m));
        virtualSize = history.size();
    }

    public boolean undo() {
        Pair pair = getUndo();
        if (pair == null) {
            return false;
        }
        System.out.println(&quot;Undoing: &quot; + pair.getCommand().getName());
        pair.getMemento().restore();
        return true;
    }

    public boolean redo() {
        Pair pair = getRedo();
        if (pair == null) {
            return false;
        }
        System.out.println(&quot;Redoing: &quot; + pair.getCommand().getName());
        pair.getMemento().restore();
        pair.getCommand().execute();
        return true;
    }

    private Pair getUndo() {
        if (virtualSize == 0) {
            return null;
        }
        virtualSize = Math.max(0, virtualSize - 1);
        return history.get(virtualSize);
    }

    private Pair getRedo() {
        if (virtualSize == history.size()) {
            return null;
        }
        virtualSize = Math.min(history.size(), virtualSize + 1);
        return history.get(virtualSize - 1);
    }
}
</pre>
</figure>
<h4><a class="anchor" id="example-0--history-Memento-java"><i class="fa fa-fw fa-file-code" aria-hidden="true"></i></a> <strong>history/Memento.java:</strong>  Снимок</h4>
<figure class="code">
<pre class="code" lang="java">package refactoring_guru.memento.example.history;

import refactoring_guru.memento.example.editor.Editor;

public class Memento {
    private String backup;
    private Editor editor;

    public Memento(Editor editor) {
        this.editor = editor;
        this.backup = editor.backup();
    }

    public void restore() {
        editor.restore(backup);
    }
}
</pre>
</figure>
<h2 class="example-title"><a class="anchor" id="example-0--commands"><i class="fa fa-fw fa-folder-open" aria-hidden="true"></i></a> <strong>commands</strong> </h2><h4><a class="anchor" id="example-0--commands-Command-java"><i class="fa fa-fw fa-file-code" aria-hidden="true"></i></a> <strong>commands/Command.java:</strong>  Интерфейс команд</h4>
<figure class="code">
<pre class="code" lang="java">package refactoring_guru.memento.example.commands;

public interface Command {
    String getName();
    void execute();
}
</pre>
</figure>
<h4><a class="anchor" id="example-0--commands-ColorCommand-java"><i class="fa fa-fw fa-file-code" aria-hidden="true"></i></a> <strong>commands/ColorCommand.java:</strong>  Команда смены цвета</h4>
<figure class="code">
<pre class="code" lang="java">package refactoring_guru.memento.example.commands;

import refactoring_guru.memento.example.editor.Editor;
import refactoring_guru.memento.example.shapes.Shape;

import java.awt.*;

public class ColorCommand implements Command {
    private Editor editor;
    private Color color;

    public ColorCommand(Editor editor, Color color) {
        this.editor = editor;
        this.color = color;
    }

    @Override
    public String getName() {
        return &quot;Colorize: &quot; + color.toString();
    }

    @Override
    public void execute() {
        for (Shape child : editor.getShapes().getSelected()) {
            child.setColor(color);
        }
    }
}
</pre>
</figure>
<h4><a class="anchor" id="example-0--commands-MoveCommand-java"><i class="fa fa-fw fa-file-code" aria-hidden="true"></i></a> <strong>commands/MoveCommand.java:</strong>  Команда перемещения</h4>
<figure class="code">
<pre class="code" lang="java">package refactoring_guru.memento.example.commands;

import refactoring_guru.memento.example.editor.Editor;
import refactoring_guru.memento.example.shapes.Shape;

public class MoveCommand implements Command {
    private Editor editor;
    private int startX, startY;
    private int endX, endY;

    public MoveCommand(Editor editor) {
        this.editor = editor;
    }

    @Override
    public String getName() {
        return &quot;Move by X:&quot; + (endX - startX) + &quot; Y:&quot; + (endY - startY);
    }

    public void start(int x, int y) {
        startX = x;
        startY = y;
        for (Shape child : editor.getShapes().getSelected()) {
            child.drag();
        }
    }

    public void move(int x, int y) {
        for (Shape child : editor.getShapes().getSelected()) {
            child.moveTo(x - startX, y - startY);
        }
    }

    public void stop(int x, int y) {
        endX = x;
        endY = y;
        for (Shape child : editor.getShapes().getSelected()) {
            child.drop();
        }
    }

    @Override
    public void execute() {
        for (Shape child : editor.getShapes().getSelected()) {
            child.moveBy(endX - startX, endY - startY);
        }
    }
}
</pre>
</figure>
<h2 class="example-title"><a class="anchor" id="example-0--shapes"><i class="fa fa-fw fa-folder-open" aria-hidden="true"></i></a> <strong>shapes:</strong>  Разнообразные фигуры</h2><h4><a class="anchor" id="example-0--shapes-Shape-java"><i class="fa fa-fw fa-file-code" aria-hidden="true"></i></a> <strong>shapes/Shape.java</strong> </h4>
<figure class="code">
<pre class="code" lang="java">package refactoring_guru.memento.example.shapes;

import java.awt.*;
import java.io.Serializable;

public interface Shape extends Serializable {
    int getX();
    int getY();
    int getWidth();
    int getHeight();
    void drag();
    void drop();
    void moveTo(int x, int y);
    void moveBy(int x, int y);
    boolean isInsideBounds(int x, int y);
    Color getColor();
    void setColor(Color color);
    void select();
    void unSelect();
    boolean isSelected();
    void paint(Graphics graphics);
}
</pre>
</figure>
<h4><a class="anchor" id="example-0--shapes-BaseShape-java"><i class="fa fa-fw fa-file-code" aria-hidden="true"></i></a> <strong>shapes/BaseShape.java</strong> </h4>
<figure class="code">
<pre class="code" lang="java">package refactoring_guru.memento.example.shapes;

import java.awt.*;

public abstract class BaseShape implements Shape {
    int x, y;
    private int dx = 0, dy = 0;
    private Color color;
    private boolean selected = false;

    BaseShape(int x, int y, Color color) {
        this.x = x;
        this.y = y;
        this.color = color;
    }

    @Override
    public int getX() {
        return x;
    }

    @Override
    public int getY() {
        return y;
    }

    @Override
    public int getWidth() {
        return 0;
    }

    @Override
    public int getHeight() {
        return 0;
    }

    @Override
    public void drag() {
        dx = x;
        dy = y;
    }

    @Override
    public void moveTo(int x, int y) {
        this.x = dx + x;
        this.y = dy + y;
    }

    @Override
    public void moveBy(int x, int y) {
        this.x += x;
        this.y += y;
    }

    @Override
    public void drop() {
        this.x = dx;
        this.y = dy;
    }

    @Override
    public boolean isInsideBounds(int x, int y) {
        return x &gt; getX() &amp;&amp; x &lt; (getX() + getWidth()) &amp;&amp;
                y &gt; getY() &amp;&amp; y &lt; (getY() + getHeight());
    }

    @Override
    public Color getColor() {
        return color;
    }

    @Override
    public void setColor(Color color) {
        this.color = color;
    }

    @Override
    public void select() {
        selected = true;
    }

    @Override
    public void unSelect() {
        selected = false;
    }

    @Override
    public boolean isSelected() {
        return selected;
    }

    void enableSelectionStyle(Graphics graphics) {
        graphics.setColor(Color.LIGHT_GRAY);

        Graphics2D g2 = (Graphics2D) graphics;
        float dash1[] = {2.0f};
        g2.setStroke(new BasicStroke(1.0f,
                BasicStroke.CAP_BUTT,
                BasicStroke.JOIN_MITER,
                2.0f, dash1, 0.0f));
    }

    void disableSelectionStyle(Graphics graphics) {
        graphics.setColor(color);
        Graphics2D g2 = (Graphics2D) graphics;
        g2.setStroke(new BasicStroke());
    }

    @Override
    public void paint(Graphics graphics) {
        if (isSelected()) {
            enableSelectionStyle(graphics);
        }
        else {
            disableSelectionStyle(graphics);
        }

        // ...
    }
}
</pre>
</figure>
<h4><a class="anchor" id="example-0--shapes-Circle-java"><i class="fa fa-fw fa-file-code" aria-hidden="true"></i></a> <strong>shapes/Circle.java</strong> </h4>
<figure class="code">
<pre class="code" lang="java">package refactoring_guru.memento.example.shapes;

import java.awt.*;

public class Circle extends BaseShape {
    private int radius;

    public Circle(int x, int y, int radius, Color color) {
        super(x, y, color);
        this.radius = radius;
    }

    @Override
    public int getWidth() {
        return radius * 2;
    }

    @Override
    public int getHeight() {
        return radius * 2;
    }

    @Override
    public void paint(Graphics graphics) {
        super.paint(graphics);
        graphics.drawOval(x, y, getWidth() - 1, getHeight() - 1);
    }
}
</pre>
</figure>
<h4><a class="anchor" id="example-0--shapes-Dot-java"><i class="fa fa-fw fa-file-code" aria-hidden="true"></i></a> <strong>shapes/Dot.java</strong> </h4>
<figure class="code">
<pre class="code" lang="java">package refactoring_guru.memento.example.shapes;

import java.awt.*;

public class Dot extends BaseShape {
    private final int DOT_SIZE = 3;

    public Dot(int x, int y, Color color) {
        super(x, y, color);
    }

    @Override
    public int getWidth() {
        return DOT_SIZE;
    }

    @Override
    public int getHeight() {
        return DOT_SIZE;
    }

    @Override
    public void paint(Graphics graphics) {
        super.paint(graphics);
        graphics.fillRect(x - 1, y - 1, getWidth(), getHeight());
    }
}
</pre>
</figure>
<h4><a class="anchor" id="example-0--shapes-Rectangle-java"><i class="fa fa-fw fa-file-code" aria-hidden="true"></i></a> <strong>shapes/Rectangle.java</strong> </h4>
<figure class="code">
<pre class="code" lang="java">package refactoring_guru.memento.example.shapes;

import java.awt.*;

public class Rectangle extends BaseShape {
    private int width;
    private int height;

    public Rectangle(int x, int y, int width, int height, Color color) {
        super(x, y, color);
        this.width = width;
        this.height = height;
    }

    @Override
    public int getWidth() {
        return width;
    }

    @Override
    public int getHeight() {
        return height;
    }

    @Override
    public void paint(Graphics graphics) {
        super.paint(graphics);
        graphics.drawRect(x, y, getWidth() - 1, getHeight() - 1);
    }
}
</pre>
</figure>
<h4><a class="anchor" id="example-0--shapes-CompoundShape-java"><i class="fa fa-fw fa-file-code" aria-hidden="true"></i></a> <strong>shapes/CompoundShape.java</strong> </h4>
<figure class="code">
<pre class="code" lang="java">package refactoring_guru.memento.example.shapes;

import java.awt.*;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class CompoundShape extends BaseShape {
    private List&lt;Shape&gt; children = new ArrayList&lt;&gt;();

    public CompoundShape(Shape... components) {
        super(0, 0, Color.BLACK);
        add(components);
    }

    public void add(Shape component) {
        children.add(component);
    }

    public void add(Shape... components) {
        children.addAll(Arrays.asList(components));
    }

    public void remove(Shape child) {
        children.remove(child);
    }

    public void remove(Shape... components) {
        children.removeAll(Arrays.asList(components));
    }

    public void clear() {
        children.clear();
    }

    @Override
    public int getX() {
        if (children.size() == 0) {
            return 0;
        }
        int x = children.get(0).getX();
        for (Shape child : children) {
            if (child.getX() &lt; x) {
                x = child.getX();
            }
        }
        return x;
    }

    @Override
    public int getY() {
        if (children.size() == 0) {
            return 0;
        }
        int y = children.get(0).getY();
        for (Shape child : children) {
            if (child.getY() &lt; y) {
                y = child.getY();
            }
        }
        return y;
    }

    @Override
    public int getWidth() {
        int maxWidth = 0;
        int x = getX();
        for (Shape child : children) {
            int childsRelativeX = child.getX() - x;
            int childWidth = childsRelativeX + child.getWidth();
            if (childWidth &gt; maxWidth) {
                maxWidth = childWidth;
            }
        }
        return maxWidth;
    }

    @Override
    public int getHeight() {
        int maxHeight = 0;
        int y = getY();
        for (Shape child : children) {
            int childsRelativeY = child.getY() - y;
            int childHeight = childsRelativeY + child.getHeight();
            if (childHeight &gt; maxHeight) {
                maxHeight = childHeight;
            }
        }
        return maxHeight;
    }

    @Override
    public void drag() {
        for (Shape child : children) {
            child.drag();
        }
    }

    @Override
    public void drop() {
        for (Shape child : children) {
            child.drop();
        }
    }

    @Override
    public void moveTo(int x, int y) {
        for (Shape child : children) {
            child.moveTo(x, y);
        }
    }

    @Override
    public void moveBy(int x, int y) {
        for (Shape child : children) {
            child.moveBy(x, y);
        }
    }

    @Override
    public boolean isInsideBounds(int x, int y) {
        for (Shape child : children) {
            if (child.isInsideBounds(x, y)) {
                return true;
            }
        }
        return false;
    }

    @Override
    public void setColor(Color color) {
        super.setColor(color);
        for (Shape child : children) {
            child.setColor(color);
        }
    }

    @Override
    public void unSelect() {
        super.unSelect();
        for (Shape child : children) {
            child.unSelect();
        }
    }

    public Shape getChildAt(int x, int y) {
        for (Shape child : children) {
            if (child.isInsideBounds(x, y)) {
                return child;
            }
        }
        return null;
    }

    public boolean selectChildAt(int x, int y) {
        Shape child = getChildAt(x,y);
        if (child != null) {
            child.select();
            return true;
        }
        return false;
    }

    public List&lt;Shape&gt; getSelected() {
        List&lt;Shape&gt; selected = new ArrayList&lt;&gt;();
        for (Shape child : children) {
            if (child.isSelected()) {
                selected.add(child);
            }
        }
        return selected;
    }

    @Override
    public void paint(Graphics graphics) {
        if (isSelected()) {
            enableSelectionStyle(graphics);
            graphics.drawRect(getX() - 1, getY() - 1, getWidth() + 1, getHeight() + 1);
            disableSelectionStyle(graphics);
        }

        for (Shape child : children) {
            child.paint(graphics);
        }
    }
}
</pre>
</figure>
<h4><a class="anchor" id="example-0--Demo-java"><i class="fa fa-fw fa-file-code" aria-hidden="true"></i></a> <strong>Demo.java:</strong>  Клиентский код</h4>
<figure class="code">
<pre class="code" lang="java">package refactoring_guru.memento.example;

import refactoring_guru.memento.example.editor.Editor;
import refactoring_guru.memento.example.shapes.Circle;
import refactoring_guru.memento.example.shapes.CompoundShape;
import refactoring_guru.memento.example.shapes.Dot;
import refactoring_guru.memento.example.shapes.Rectangle;

import java.awt.*;

public class Demo {
    public static void main(String[] args) {
        Editor editor = new Editor();
        editor.loadShapes(
                new Circle(10, 10, 10, Color.BLUE),

                new CompoundShape(
                        new Circle(110, 110, 50, Color.RED),
                        new Dot(160, 160, Color.RED)
                ),

                new CompoundShape(
                        new Rectangle(250, 250, 100, 100, Color.GREEN),
                        new Dot(240, 240, Color.GREEN),
                        new Dot(240, 360, Color.GREEN),
                        new Dot(360, 360, Color.GREEN),
                        new Dot(360, 240, Color.GREEN)
                )
        );
    }
}
</pre>
</figure>
<h4><a class="anchor" id="example-0--OutputDemo-png"><i class="fa fa-fw fa-file-image" aria-hidden="true"></i></a> <strong>OutputDemo.png:</strong>  Снимок работы программы</h4>
<img src="../../../../images/patterns/examples/java/memento/OutputDemo495d.png?id=efdf8339c32722d0450fefc4a0f70d97" alt="" />

            
    

    </article>

<nav class="prev-next">
                    <div class="next">
                <h4>Читаем дальше</h4>
                <a rel="next" href="../../observer/java/example.html" class="btn btn-primary">Наблюдатель на Java&nbsp;<span class="fa fa-arrow-right"></span></a>
            </div>
                            <div class="prev">
                <h4>Вернуться назад</h4>
                <a rel="prev" href="../../mediator/java/example.html" class="btn btn-default"><span class="fa fa-arrow-left"></span>&nbsp;Посредник на Java </a>
            </div>
            </nav>

<h2><strong>Снимок</strong> на других языках программирования</h2>

<a href="../csharp/example.html" title="Снимок на C#" class="prog-lang-link"><img src="../../../../images/patterns/icons/csharp8c8a.svg?id=da64592defc6e86d57c39c66e9de3e58" alt="Снимок на C#"></a>
<a href="../cpp/example.html" title="Снимок на C++" class="prog-lang-link"><img src="../../../../images/patterns/icons/cpp9770.svg?id=f7782ed8b8666246bfcc3f8fefc3b858" alt="Снимок на C++"></a>
<a href="../php/example.html" title="Снимок на PHP" class="prog-lang-link"><img src="../../../../images/patterns/icons/phpb8be.svg?id=be1906eb26b71ec1d3b93720d6156618" alt="Снимок на PHP"></a>
<a href="../python/example.html" title="Снимок на Python" class="prog-lang-link"><img src="../../../../images/patterns/icons/python25f6.svg?id=6d815d43c0f7050a1151b43e51569c9f" alt="Снимок на Python"></a>
<a href="../ruby/example.html" title="Снимок на Ruby" class="prog-lang-link"><img src="../../../../images/patterns/icons/ruby3275.svg?id=b065b718c914bf8e960ef731600be1eb" alt="Снимок на Ruby"></a>
<a href="../swift/example.html" title="Снимок на Swift" class="prog-lang-link"><img src="../../../../images/patterns/icons/swift68dd.svg?id=0b716c2d52ec3a48fbe91ac031070c1d" alt="Снимок на Swift"></a>
<a href="../typescript/example.html" title="Снимок на TypeScript" class="prog-lang-link"><img src="../../../../images/patterns/icons/typescript325e.svg?id=2239d0f16cb703540c205dd8cb0c0cb7" alt="Снимок на TypeScript"></a>
<a href="../go/example.html" title="Снимок на Go" class="prog-lang-link"><img src="../../../../images/patterns/icons/go3287.svg?id=1a89927eb99b1ea3fde7701d97970aca" alt="Снимок на Go"></a>

</div>

<aside class="feature content-secondary">
    <div class="prom banner-sidebar banner banner-striped banner-examples" data-id="DP: Examples-IDE" data-creative-id="examples-sidebar-ru" data-position="sidebar">
        <div class="banner-inner" style="font-size: 14px; line-height: 21px;">
            <div class="banner-examples-img">
                <a href="../../book.html">
                    <img width="215" height="158" loading="lazy" src="../../../../images/patterns/banners/examples-ide91ca.png?id=3115b4b548fb96b75974e2de8f4f49bc" srcset="/images/patterns/banners/examples-ide-2x.png?id=93c007a6d157b97c28eb213f59d716ae 2x">
                </a>
            </div>
            <div class="banner-examples-fade">
                <a href="../../book.html" class="btn btn-secondary btn-block"><i class="fa fa-file-archive" aria-hidden="true"></i> Архив с примерами</a>
            </div>
            <div class="banner-examples-text" style="margin-top: 1rem;">
                <p>Купи книгу <b>Погружение в Паттерны</b> и получи архив с десятками детальных примеров, которые можно открывать прямо в IDE.</p>
                <a href="../../book.html" class="btn btn-secondary btn-block"><i class="fa fa-book" aria-hidden="true"></i> Узнать больше…</a>
            </div>
        </div>
    </div>


</aside>
                    </div>
    </main>

    <nav class="navigation" role="navigation">
    <div class="navigation-container">
        <a href="#menu" class="navigation-toggle"><i class="fa fa-bars"></i></a>
        <a class="navigation-brand" href="../../../../ru.html">
            <img alt="Refactoring.Guru" src="../../../../images/content-public/logos/logo-military-mobile78b4.png?id=65ecbd1e688fc695bc20c22a1e8450d9" srcset="/images/content-public/logos/logo-military-mobile-2x.png?id=0f52141f57f67fb678da8407e254b0a3 2x"
                  width="94"                   height="64"             >
        </a>
        <div class="social-likes-block" data-url="../../../../index.html">
    <div data-service="facebook" class="facebook" title="Поделиться в Facebook">Facebook</div>
        <div data-service="vkontakte" class="vkontakte" title="Поделиться ВКонтакте">Вконтакте</div>
        <div data-service="twitter" class="twitter" title="Поделиться в Twitter">Twitter</div>
</div>        <ul class="navigation-menu">
                        <li class="dropdown d-lg-none">
                <a class="dropdown-toggle" id="dropdownLanguage" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fa fa-globe" aria-hidden="true"></i> <span class="caption d-none d-xl-inline-block">Язык</span>
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownLanguage">
                                                                                                        <a href="../../../../design-patterns/memento/java/example.html" class="dropdown-item locale-link " data-locale="en" title="English">English</a>
                                                                                                                <a href="../../../../es/design-patterns/memento/java/example.html" class="dropdown-item locale-link " data-locale="es" title="Español">Español</a>
                                                                                                                <a href="../../../../fr/design-patterns/memento/java/example.html" class="dropdown-item locale-link " data-locale="fr" title="Français">Français</a>
                                                                                                                                                                                                                        <a href="../../../../pl/design-patterns/memento/java/example.html" class="dropdown-item locale-link " data-locale="pl" title="Polski">Polski</a>
                                                                                                                <a href="../../../../pt-br/design-patterns/memento/java/example.html" class="dropdown-item locale-link " data-locale="pt-br" title="Português Brasileiro">Português Brasileiro</a>
                                                                                                                <a href="example.html" class="dropdown-item locale-link active" data-locale="ru" title="Русский">Русский</a>
                                                                                                                <a href="../../../../uk/design-patterns/memento/java/example.html" class="dropdown-item locale-link " data-locale="uk" title="Українська">Українська</a>
                                                                                                                <a href="https://refactoringguru.cn/design-patterns/memento/java/example" class="dropdown-item locale-link " data-locale="zh" title="中文">中文</a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </div>
            </li>
                        <li class="nav-contact">
                <a class="userecho-private" href="https://feedback.refactoring.guru/communities/1-russkij-russian?show_feedback_form_private=true" rel="nofollow" title="Связаться">
                    <i class="fa fa-envelope"></i> <span class="caption d-none d-xl-inline-block">Связаться</span>
                </a>
            </li>
                                                <li class="nav-login">
                        <a href="../../../login.html" title="Войти"><i class="fa fa-user"></i> <span class="caption d-none d-xl-inline-block">Войти</span></a>
                    </li>
                                    </ul>
    </div>
    <div>
        <a class="russia-stop" href="../../../help-ukraine.html">
                            HELP UKRAINE <b>STOP RUSSIA</b>
                    </a>
    </div>
</nav>
    <aside class="sidebar main-menu nano">
    <a href="#menu-close" class="navigation-toggle"><i class="fa fa-fw fa-times"></i></a>
    <div class="nano-content">
                    <div class="main-menu-lang d-none d-lg-flex main-menu-lang-count-8">
                                                                                        <a href="../../../../design-patterns/memento/java/example.html" class="locale-link locale-link-en " data-locale="en" title="English"><span class="d-lg-none">English</span><span class="d-none d-lg-inline">English</span></a>
                                                                                                <a href="../../../../es/design-patterns/memento/java/example.html" class="locale-link locale-link-es " data-locale="es" title="Español"><span class="d-lg-none">Español</span><span class="d-none d-lg-inline">Español</span></a>
                                                                                                <a href="../../../../fr/design-patterns/memento/java/example.html" class="locale-link locale-link-fr " data-locale="fr" title="Français"><span class="d-lg-none">Français</span><span class="d-none d-lg-inline">Français</span></a>
                                                                                                                                                                                        <a href="../../../../pl/design-patterns/memento/java/example.html" class="locale-link locale-link-pl " data-locale="pl" title="Polski"><span class="d-lg-none">Polski</span><span class="d-none d-lg-inline">Polski</span></a>
                                                                                                <a href="../../../../pt-br/design-patterns/memento/java/example.html" class="locale-link locale-link-pt-br " data-locale="pt-br" title="Português Brasileiro"><span class="d-lg-none">Português Brasileiro</span><span class="d-none d-lg-inline">Português-Br</span></a>
                                                                                                <a href="example.html" class="locale-link locale-link-ru active" data-locale="ru" title="Русский"><span class="d-lg-none">Русский</span><span class="d-none d-lg-inline">Русский</span></a>
                                                                                                <a href="../../../../uk/design-patterns/memento/java/example.html" class="locale-link locale-link-uk " data-locale="uk" title="Українська"><span class="d-lg-none">Українська</span><span class="d-none d-lg-inline">Українська</span></a>
                                                                                                <a href="https://refactoringguru.cn/design-patterns/memento/java/example" class="locale-link locale-link-zh " data-locale="zh" title="中文"><span class="d-lg-none">中文</span><span class="d-none d-lg-inline">中文</span></a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </div>
        
        <a class="menu-brand" href="../../../../ru.html">
                            <img width=200 height=241 loading="lazy" alt="Refactoring.Guru" src="../../../../images/content-public/logos/logo-militaryd1c3.png?id=3eaf203cb26279327252e2c5f5d37c7f" srcset="/images/content-public/logos/logo-military-2x.png?id=5af1a599d8a4170c9a42e6fa18148b98 2x">
                    </a>
        <div>
            <a class="russia-stop" href="../../../help-ukraine.html">
                                    HELP UKRAINE
                    <br><b>STOP RUSSIA</b>
                            </a>
        </div>


        <div class="menu-container" style="position: relative">
                        <ul class="menu-list">
                            <li class="featured">
            <a href="../../../store.html">
                <i class="fa fa-fw fa-star" aria-hidden="true"></i> Премиум контент
            </a>
    
            <ul >
                            <li class="featured menu-fs15">
            <a href="../../book.html">
                <i class="fa fa-fw fa-book" aria-hidden="true"></i> Книга о паттернах
            </a>
    
    
            </li>
                                <li class="featured menu-fs15">
            <a href="../../../refactoring/course.html">
                <i class="fa fa-fw fa-graduation-cap" aria-hidden="true"></i> Курс по рефакторингу
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../../../refactoring.html">
                <i class="fa fa-fw fa-scissors" aria-hidden="true"></i> Рефакторинг
            </a>
    
            <ul >
                            <li class="">
            <a href="../../../refactoring/what-is-refactoring.html">
                Введение в рефакторинг
            </a>
    
            <ul >
                            <li class="">
            <a href="../../../refactoring/what-is-refactoring.html">
                Чистый код
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../refactoring/technical-debt.html">
                Технический долг
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../refactoring/when.html">
                Когда рефакторить
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../refactoring/how-to.html">
                Как рефакторить
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../../../refactoring/catalog.html">
                Каталог
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../refactoring/smells.html">
                Запахи кода
            </a>
    
            <ul >
                            <li class="">
            <a href="../../../refactoring/smells/bloaters.html">
                Раздувальщики
            </a>
    
            <ul >
                            <li class="">
            <a href="../../../smells/long-method.html">
                Длинный метод
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../smells/large-class.html">
                Большой класс
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../smells/primitive-obsession.html">
                Одержимость элементарными типами
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../smells/long-parameter-list.html">
                Длинный список параметров
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../smells/data-clumps.html">
                Группы данных
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../../../refactoring/smells/oo-abusers.html">
                Нарушители объектно-ориентированного дизайна
            </a>
    
            <ul >
                            <li class="">
            <a href="../../../smells/switch-statements.html">
                Операторы switch
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../smells/temporary-field.html">
                Временное поле
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../smells/refused-bequest.html">
                Отказ от наследства
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../smells/alternative-classes-with-different-interfaces.html">
                Альтернативные классы с разными интерфейсами
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../../../refactoring/smells/change-preventers.html">
                Утяжелители изменений
            </a>
    
            <ul >
                            <li class="">
            <a href="../../../smells/divergent-change.html">
                Расходящиеся модификации
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../smells/shotgun-surgery.html">
                Стрельба дробью
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../smells/parallel-inheritance-hierarchies.html">
                Параллельные иерархии наследования
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../../../refactoring/smells/dispensables.html">
                Замусориватели
            </a>
    
            <ul >
                            <li class="">
            <a href="../../../smells/comments.html">
                Комментарии
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../smells/duplicate-code.html">
                Дублирование кода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../smells/lazy-class.html">
                Ленивый класс
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../smells/data-class.html">
                Класс данных
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../smells/dead-code.html">
                Мёртвый код
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../smells/speculative-generality.html">
                Теоретическая общность
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../../../refactoring/smells/couplers.html">
                Опутыватели связями
            </a>
    
            <ul >
                            <li class="">
            <a href="../../../smells/feature-envy.html">
                Завистливые функции
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../smells/inappropriate-intimacy.html">
                Неуместная близость
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../smells/message-chains.html">
                Цепочка вызовов
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../smells/middle-man.html">
                Посредник
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../../../refactoring/smells/other.html">
                Остальные запахи
            </a>
    
            <ul >
                            <li class="">
            <a href="../../../smells/incomplete-library-class.html">
                Неполнота библиотечного класса
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../../../refactoring/techniques.html">
                Техники
            </a>
    
            <ul >
                            <li class="">
            <a href="../../../refactoring/techniques/composing-methods.html">
                Составление методов
            </a>
    
            <ul >
                            <li class="">
            <a href="../../../extract-method.html">
                Извлечение метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../inline-method.html">
                Встраивание метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../extract-variable.html">
                Извлечение переменной
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../inline-temp.html">
                Встраивание переменной
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../replace-temp-with-query.html">
                Замена переменной вызовом метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../split-temporary-variable.html">
                Расщепление переменной
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../remove-assignments-to-parameters.html">
                Удаление присваиваний параметрам
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../replace-method-with-method-object.html">
                Замена метода объектом методов
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../substitute-algorithm.html">
                Замена алгоритма
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../../../refactoring/techniques/moving-features-between-objects.html">
                Перемещение функций между объектами
            </a>
    
            <ul >
                            <li class="">
            <a href="../../../move-method.html">
                Перемещение метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../move-field.html">
                Перемещение поля
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../extract-class.html">
                Извлечение класса
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../inline-class.html">
                Встраивание класса
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../hide-delegate.html">
                Сокрытие делегирования
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../remove-middle-man.html">
                Удаление посредника
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../introduce-foreign-method.html">
                Введение внешнего метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../introduce-local-extension.html">
                Введение локального расширения
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../../../refactoring/techniques/organizing-data.html">
                Организация данных
            </a>
    
            <ul >
                            <li class="">
            <a href="../../../self-encapsulate-field.html">
                Самоинкапсуляция поля
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../replace-data-value-with-object.html">
                Замена простого поля объектом
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../change-value-to-reference.html">
                Замена значения ссылкой
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../change-reference-to-value.html">
                Замена ссылки значением
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../replace-array-with-object.html">
                Замена поля-массива объектом
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../duplicate-observed-data.html">
                Дублирование видимых данных
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../change-unidirectional-association-to-bidirectional.html">
                Замена однонаправленной связи двунаправленной
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../change-bidirectional-association-to-unidirectional.html">
                Замена двунаправленной связи однонаправленной
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../replace-magic-number-with-symbolic-constant.html">
                Замена магического числа символьной константой
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../encapsulate-field.html">
                Инкапсуляция поля
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../encapsulate-collection.html">
                Инкапсуляция коллекции
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../replace-type-code-with-class.html">
                Замена кодирования типа классом
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../replace-type-code-with-subclasses.html">
                Замена кодирования типа подклассами
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../replace-type-code-with-state-strategy.html">
                Замена кодирования типа состоянием/стратегией
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../replace-subclass-with-fields.html">
                Замена подкласса полями
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../../../refactoring/techniques/simplifying-conditional-expressions.html">
                Упрощение условных выражений
            </a>
    
            <ul >
                            <li class="">
            <a href="../../../decompose-conditional.html">
                Разбиение условного оператора
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../consolidate-conditional-expression.html">
                Объединение условных операторов
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../consolidate-duplicate-conditional-fragments.html">
                Объединение дублирующихся фрагментов в условных операторах
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../remove-control-flag.html">
                Удаление управляющего флага
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../replace-nested-conditional-with-guard-clauses.html">
                Замена вложенных условных операторов граничным оператором
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../replace-conditional-with-polymorphism.html">
                Замена условного оператора полиморфизмом
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../introduce-null-object.html">
                Введение Null-объекта
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../introduce-assertion.html">
                Введение проверки утверждения
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../../../refactoring/techniques/simplifying-method-calls.html">
                Упрощение вызовов методов
            </a>
    
            <ul >
                            <li class="">
            <a href="../../../rename-method.html">
                Переименование метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../add-parameter.html">
                Добавление параметра
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../remove-parameter.html">
                Удаление параметра
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../separate-query-from-modifier.html">
                Разделение запроса и модификатора
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../parameterize-method.html">
                Параметризация метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../replace-parameter-with-explicit-methods.html">
                Замена параметра набором специализированных методов
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../preserve-whole-object.html">
                Передача всего объекта
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../replace-parameter-with-method-call.html">
                Замена параметра вызовом метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../introduce-parameter-object.html">
                Замена параметров объектом
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../remove-setting-method.html">
                Удаление сеттера
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../hide-method.html">
                Сокрытие метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../replace-constructor-with-factory-method.html">
                Замена конструктора фабричным методом
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../replace-error-code-with-exception.html">
                Замена кода ошибки исключением
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../replace-exception-with-test.html">
                Замена исключения проверкой условия
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../../../refactoring/techniques/dealing-with-generalization.html">
                Решение задач обобщения
            </a>
    
            <ul >
                            <li class="">
            <a href="../../../pull-up-field.html">
                Подъём поля
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../pull-up-method.html">
                Подъём метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../pull-up-constructor-body.html">
                Подъём тела конструктора
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../push-down-method.html">
                Спуск метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../push-down-field.html">
                Спуск поля
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../extract-subclass.html">
                Извлечение подкласса
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../extract-superclass.html">
                Извлечение суперкласса
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../extract-interface.html">
                Извлечение интерфейса
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../collapse-hierarchy.html">
                Свёртывание иерархии
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../form-template-method.html">
                Создание шаблонного метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../replace-inheritance-with-delegation.html">
                Замена наследования делегированием
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../../replace-delegation-with-inheritance.html">
                Замена делегирования наследованием
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                        </ul>
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../../../design-patterns.html">
                <i class="fa fa-fw fa-puzzle-piece" aria-hidden="true"></i> Паттерны
            </a>
    
            <ul >
                            <li class="">
            <a href="../../what-is-pattern.html">
                Введение в паттерны
            </a>
    
            <ul >
                            <li class="">
            <a href="../../what-is-pattern.html">
                Что такое Паттерн?
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../history.html">
                История паттернов
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../why-learn-patterns.html">
                Зачем знать паттерны?
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../criticism.html">
                Критика паттернов
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../classification.html">
                Классификация паттернов
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../../catalog.html">
                Каталог
            </a>
    
    
            </li>
                                <li class="menu-third-level">
            <a href="../../creational-patterns.html">
                Порождающие
            </a>
    
            <ul >
                            <li class="">
            <a href="../../factory-method.html">
                Фабричный метод
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../abstract-factory.html">
                Абстрактная фабрика
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../builder.html">
                Строитель
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../prototype.html">
                Прототип
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../singleton.html">
                Одиночка
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="menu-third-level">
            <a href="../../structural-patterns.html">
                Структурные
            </a>
    
            <ul >
                            <li class="">
            <a href="../../adapter.html">
                Адаптер
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../bridge.html">
                Мост
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../composite.html">
                Компоновщик
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../decorator.html">
                Декоратор
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../facade.html">
                Фасад
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../flyweight.html">
                Легковес
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../proxy.html">
                Заместитель
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="menu-third-level">
            <a href="../../behavioral-patterns.html">
                Поведенческие
            </a>
    
            <ul >
                            <li class="">
            <a href="../../chain-of-responsibility.html">
                Цепочка обязанностей
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../command.html">
                Команда
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../iterator.html">
                Итератор
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../mediator.html">
                Посредник
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../memento.html">
                Снимок
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../observer.html">
                Наблюдатель
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../state.html">
                Состояние
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../strategy.html">
                Стратегия
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../template-method.html">
                Шаблонный метод
            </a>
    
    
            </li>
                                <li class="">
            <a href="../../visitor.html">
                Посетитель
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="menu-code-examples">
            <a href="../../examples.html">
                Примеры кода
            </a>
    
            <ul >
                            <li class="menu-code-examples-item">
            <a href="../../csharp.html">
                C#
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="../../cpp.html">
                C++
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="../../go.html">
                Go
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="../../java.html">
                Java
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="../../php.html">
                PHP
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="../../python.html">
                Python
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="../../ruby.html">
                Ruby
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="../../swift.html">
                Swift
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="../../typescript.html">
                TypeScript
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                        </ul>
    
            </li>
                        </ul>
    
            </div>
        <div class="sidebar-controls">
            <div class="sidebar-controls-container">
                <a href="../../../login.html" title="Войти"><i
                            class="fa fa-fw fa-fw fa-user"></i> Войти</a>
                <a href="https://feedback.refactoring.guru/communities/1-russkij-russian" class="userecho-public" rel="nofollow" title="Обратная связь"><i class="fa fa-fw fa-fw fa-envelope" aria-hidden="true"></i> Связаться</a>
            </div>
        </div>
    </div>
</aside>
    <footer class="footer center-content">
    <div class="footer-container center-content-container">
        <div class="footer-inner container-fluid">
            <div class="row">
                <div class="col-8 col-md-10">
                    <ul class="footer-list footer-list-horizontal">
                        <li><a href="../../../../ru.html">Главная</a></li>
                        <li><a href="../../../refactoring.html">Рефакторинг</a></li>
                        <li><a href="../../../design-patterns.html">Паттерны</a></li>
                        <li><a href="../../../store.html">Премиум контент</a></li>
                        <li><a href="https://refactoring.userecho.com/" rel="nofollow" class="userecho-public">Форум</a></li>
                        <li><a href="https://refactoring.userecho.com/" rel="nofollow" class="userecho-private">Связаться</a></li>
                    </ul>
                </div>
                <div class="col-4 col-md-2">
                    <ul class="footer-list footer-list-iconic">
                                                    <li><a href="https://www.facebook.com/refactoring.guru"><i class="fa fa-facebook-official"></i></a></li>
                                                <li><a href="../../../sendy/form.html" rel="nofollow"><i class="fa fa-envelope" aria-hidden="true"></i></a></li>
                        <li><a href="https://github.com/RefactoringGuru"><i class="fa fa-github-circled"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="footer-second">
        <div class="footer-container center-content-container">
            <div class="footer-inner container-fluid">
                <div class="row">
                    <div class="col-12 col-sm-8">
                        <i class="fa fa-fw fa-copyright"></i> 2014-2022 <a href="../../../../ru.html">Refactoring.Guru</a>. <span style="white-space: nowrap">Все права защищены.</span><br>
                        <object class="fa-fw" style="height: 0.8rem; filter: invert(50%);"  type="image/svg+xml" data="../../../../images/content-public/icons/fa-building4895.svg?id=afddb5806968b0a9acfc1df75a181234">
                            <img class="fa-fw" style="height: 0.8rem;" src="../../../../images/content-public/icons/fa-building4895.svg?id=afddb5806968b0a9acfc1df75a181234" alt="Organization address"/>
                        </object> Хмельницкое шоссе 19 / 27, Каменец-Подольский, Украина, 32305<br>
                        <i class="fa fa-fw fa-envelope"></i>  Email: support@refactoring.guru

                        <div class="mt-2">
                            <i class="fa fa-fw fa-image"></i> Иллюстрации нарисовал <a href="http://zhart.us/" rel="nofollow"><span style="white-space: nowrap">Дмитрий Жарт</span></a></div>
                    </div>
                    <div class="footer-links-right col-12 col-sm-4 mt-4 mt-sm-0">
                        <div class="row">
                            <div class="col-8 col-sm-12">
                                <ul class="footer-list">
                                    <li><a href="../../../terms.html"><span>Условия использования</span></a>
                                    </li>
                                    <li><a href="../../../privacy-policy.html"><span>Политика конфиденциальности</span></a>
                                    </li>
                                    <li><a href="../../../content-usage-policy.html"><span>Использование контента</span></a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>

</div>


    <script>
function extend(){var extended={};var deep=false;var i=0;var length=arguments["length"];if(Object["prototype"]["toString"]["call"](arguments[0])=== '[object Boolean]'){deep= arguments[0];i++};var merge=function(obj){for(var prop in obj){if(Object["prototype"]["hasOwnProperty"]["call"](obj,prop)){if(deep&& Object["prototype"]["toString"]["call"](obj[prop])=== '[object Object]'){extended[prop]= extend(true,extended[prop],obj[prop])}else {extended[prop]= obj[prop]}}}};for(;i< length;i++){var obj=arguments[i];merge(obj)};return extended}
function defer(method) {if (window.jQuery) {method();} else {setTimeout(function() { defer(method) }, 50);}}
</script>
<script>
+function(sd){sd = (typeof sd === "string") ? JSON.parse(atob(sd)) : sd;for(var property in sd){if(window[property]!== null&&  typeof window[property]=== 'object'){window[property]= extend(true,window[property],sd[property])}else {window[property]= sd[property]}}}("eyJsb2NhbGUiOiJydSIsImxvY2FsZV9wcmVmaXgiOiJydVwvIiwibG9jYWxpemVkX3VybF9wcmVmaXhfbSI6Imh0dHBzOlwvXC9yZWZhY3RvcmluZy5ndXJ1XC9ydVwvIiwidXJsX3ByZWZpeF9tIjoiaHR0cHM6XC9cL3JlZmFjdG9yaW5nLmd1cnVcLyIsImxvY2FsaXplZF91cmxfcHJlZml4IjoiaHR0cHM6XC9cL3JlZmFjdG9yaW5nLmd1cnVcL3J1XC8iLCJ1cmxfcHJlZml4IjoiaHR0cHM6XC9cL3JlZmFjdG9yaW5nLmd1cnVcLyIsImNoaW5lc2VfaG9tZSI6Imh0dHBzOlwvXC9yZWZhY3RvcmluZ2d1cnUuY25cLyIsInVzZXJfZWNob19hbGlhcyI6InJlZmFjdG9yaW5nIiwidXNlcl9lY2hvX2hvc3QiOiJmZWVkYmFjay5yZWZhY3RvcmluZy5ndXJ1IiwidXNlcl9lY2hvX3ByaXZhdGVfZm9ydW0iOiIyIiwidXNlcl9lY2hvX2xvY2FsZSI6InJ1IiwidXNlcl9lY2hvX3B1YmxpY19mb3J1bSI6IjEiLCJ1c2VyX2VjaG9fcHVibGljX2ZvcnVtX3VybCI6Imh0dHBzOlwvXC9mZWVkYmFjay5yZWZhY3RvcmluZy5ndXJ1XC9jb21tdW5pdGllc1wvMS1ydXNza2lqLXJ1c3NpYW4iLCJ1c2VyX2VjaG9fc3NvX3Rva2VuIjoiIn0=");
</script>

    <script defer>
        if (window.dataLayer && window.google_optimize) {
            window.dataLayer.push({'event': 'optimize.activate'});
        }
    </script>
 
<script>(function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;h.start=1*new Date;
        h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};
        (a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;
    })(window,document.documentElement,'async-hide','dataLayer',4000,
        {'GTM-M58XZN4':true});</script>
<link rel="preconnect dns-prefetch" href="https://www.google-analytics.com/">
<script>
    var getCookie = function(name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(';');
        for(var i=0;i < ca.length;i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') c = c.substring(1,c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
        }
        return null;
    };
    var eraseCookie = function (name) {
        document.cookie = name+'=; Path=/; Max-Age=-99999999;';
    };

    window.google_analytics = 'UA-521840-40';

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','../../../../../www.google-analytics.com/analytics.js','ga');

    var ga_queue = [];
    window.gaOnCreate = function(){
        ga_queue.push(arguments);
    };

            doTracking();
    
    function doTracking(clientId) {
        window.gaOnCreate = function(){
            ga.apply(this, arguments);
        };

        var options = {
            'siteSpeedSampleRate': 100
        };
        if (clientId) {
            options.clientId = clientId;
        }
        ga('create', 'UA-521840-40', options);

                    ga('require', 'GTM-M58XZN4');
            window.google_optimize = 'GTM-M58XZN4';
        
        // Fix broken Social Login referrer.
        window.social_login_provider = window.social_login_provider || getCookie('social_login_provider');
        if (window.social_login_provider) {
            ga('set', 'referrer', null);
            ga('send', 'social', window.social_login_provider, 'login', window.location.href);
            eraseCookie('social_login_provider');
        }

        var user_id = getCookie('user_id');
        if (user_id) {
            ga('set', 'userId', user_id);
        } else {
            ga('set', 'userId', null);
        }

        var location = document.location.href;
        if (typeof window.analytics_path_prefix === 'string') {
            if (/^(https?:\/\/[^\/]+?)\/$/.test(location)) {
                location = location.replace(/(https?:\/\/[^\/]+?)\//, '$1' + window.analytics_path_prefix);
            }
            else {
                location = location.replace(/(https?:\/\/[^\/]+?)\//, '$1' + window.analytics_path_prefix + '/');
            }
            ga('set', 'location', location);
        }

        if (typeof window.analytics_location_prefix === 'string') {
            location = location.replace(/(https?:\/\/[^\/]+?)\//, window.analytics_location_prefix);
            ga('set', 'location', location);
        }

        ga('require', 'ec');
        ga('send', 'pageview', (typeof window.analytics_path_prefix === 'string' ? window.analytics_path_prefix : '') + document.location.pathname);

        ga_queue.forEach(function(item){
            ga.apply(this, item);
        });
    }
</script>

<script defer>
    window.socialLikesButtons = {
                facebook: {
            counterUrl: "",
            convertNumber: null
        },
                            vkontakte: {
            counterUrl: "",
            counter: null
        },
            };
</script>

<script defer>
    var CodeMirrorScripts = ["/js/codemirror.min.js?id=24aa863dfde7c99eb17d4102684aea27"];
</script>



    <script>window.loadContent = true;window.loadCart = true;</script>
</body>

<!-- Mirrored from refactoring.guru/ru/design-patterns/memento/java/example by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 07 Jun 2022 19:23:45 GMT -->
</html>