<!DOCTYPE html>
<html lang="ru">

<!-- Mirrored from refactoring.guru/ru/design-patterns/chain-of-responsibility by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 07 Jun 2022 19:12:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# website: http://ogp.me/ns/website#">
    <meta charset="utf-8">
    <title>Цепочка обязанностей</title>

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="alternate" href="../../design-patterns/chain-of-responsibility.html" hreflang="x-default"/>
    <link rel="alternate" href="../../es/design-patterns/chain-of-responsibility.html" hreflang="es"/>
    <link rel="alternate" href="../../fr/design-patterns/chain-of-responsibility.html" hreflang="fr"/>
    <link rel="alternate" href="../../ja/design-patterns/chain-of-responsibility.html" hreflang="ja"/>
    <link rel="alternate" href="../../ko/design-patterns/chain-of-responsibility.html" hreflang="ko"/>
    <link rel="alternate" href="../../pl/design-patterns/chain-of-responsibility.html" hreflang="pl"/>
    <link rel="alternate" href="../../pt-br/design-patterns/chain-of-responsibility.html" hreflang="pt-br"/>
    <link rel="alternate" href="chain-of-responsibility.html" hreflang="ru"/>
    <link rel="alternate" href="../../uk/design-patterns/chain-of-responsibility.html" hreflang="uk"/>
    <link rel="alternate" href="https://refactoringguru.cn/design-patterns/chain-of-responsibility" hreflang="zh"/>

    <meta name="description" content="Цепочка обязанностей — это поведенческий паттерн проектирования, который позволяет передавать запросы последовательно по цепочке обработчиков. Каждый последующий обработчик решает, может ли он обработать запрос сам и стоит ли передавать запрос дальше по цепи.">

    <link rel="canonical" href="chain-of-responsibility.html"/>

    <link rel="icon" type="image/x-icon" href="../../favicon.png"/>

<script type="application/ld+json">
{"@context": "http://schema.org", "@graph": [{"@type":"Person","@id":"https://refactoring.guru/ru#founder","name":"Александр Швец"},{"@type":"Organization","@id":"https://refactoring.guru/ru#organization","name":"Refactoring.Guru / Рефакторинг.Гуру","description":"Рефакторинг.Гуру посвящён тёмным материям программирования: рефакторингу, паттернам проектирования, принципам SOLID и другим важным темам из мира программирования.","image":{"@type":"ImageObject","@id":"https://refactoring.guru/ru#organizationlogo","url":"https://refactoring.guru/images/content-public/logos/logo-plain.png","caption":"Refactoring.Guru"},"logo":{"@id":"https://refactoring.guru/ru#organizationlogo"},"founder":{"@id":"https://refactoring.guru/ru#founder"},"sameAs":["https://www.facebook.com/refactoring.guru","https://twitter.com/RefactoringGuru","https://github.com/RefactoringGuru"]},{"@type":"WebSite","@id":"https://refactoring.guru/ru#website","url":"https://refactoring.guru/ru","name":"Refactoring.Guru / Рефакторинг.Гуру","description":"Рефакторинг.Гуру посвящён тёмным материям программирования: рефакторингу, паттернам проектирования, принципам SOLID и другим важным темам из мира программирования.","author":{"@id":"https://refactoring.guru/ru#founder"},"publisher":{"@id":"https://refactoring.guru/ru#organization"},"copyrightYear":2014},{"@type":"WebPage","@id":"https://refactoring.guru/ru/design-patterns/chain-of-responsibility#webpage","url":"https://refactoring.guru/ru/design-patterns/chain-of-responsibility","inLanguage":"ru","name":"Цепочка обязанностей","description":"Цепочка обязанностей — это поведенческий паттерн проектирования, который позволяет передавать запросы последовательно по цепочке обработчиков. Каждый последующий обработчик решает, может ли он обработать запрос сам и стоит ли передавать запрос дальше по цепи.","isPartOf":{"@id":"https://refactoring.guru/ru#website"},"breadcrumb":{"@id":"https://refactoring.guru/ru/design-patterns/chain-of-responsibility#breadcrumb"},"primaryImageOfPage":{"@id":"https://refactoring.guru/ru/design-patterns/chain-of-responsibility#primaryimage"},"image":{"@type":"ImageObject","@id":"https://refactoring.guru/ru/design-patterns/chain-of-responsibility#primaryimage","url":"https://refactoring.guru/images/patterns/content/chain-of-responsibility/chain-of-responsibility-3x.png","width":1920,"height":1200}},{"@type":"Article","@id":"https://refactoring.guru/ru/design-patterns/chain-of-responsibility#article","isPartOf":{"@id":"https://refactoring.guru/ru/design-patterns/chain-of-responsibility#webpage"},"mainEntityOfPage":{"@id":"https://refactoring.guru/ru/design-patterns/chain-of-responsibility#webpage"},"author":{"@id":"https://refactoring.guru/ru#founder"},"publisher":{"@id":"https://refactoring.guru/ru#organization"},"headline":"Цепочка обязанностей","datePublished":"2021-01-01","dateModified":"2022-01-01","articleSection":"Паттерны","image":{"@id":"https://refactoring.guru/ru/design-patterns/chain-of-responsibility#primaryimage"}},{"@type":"BreadcrumbList","@id":"https://refactoring.guru/ru/design-patterns/chain-of-responsibility#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Главная","item":"https://refactoring.guru/ru"},{"@type":"ListItem","position":2,"name":"Паттерны проектирования","item":"https://refactoring.guru/ru/design-patterns"},{"@type":"ListItem","position":3,"name":"Поведенческие паттерны","item":"https://refactoring.guru/ru/design-patterns/behavioral-patterns"}]}] }
</script>

<meta property="fb:app_id" content="666819623386327" />
<meta property="og:type"  content="website" />
<meta property="og:image" content="https://refactoring.guru/ru/images/refactoring/social/facebook-share-preview.png?id=dbf9e98269595be86eb668f365be6868"/>

        <link rel="stylesheet" href="../../css/public-packed.min29c2.css?id=72df70415a2662bdd8f64ffd40983c30">

<style type="text/css">
    @font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:local("PT Sans"),local("PTSans-Regular"),url(../../fonts/PTSans/ptsans-regular_cyrillic-extc4ca.woff2?1) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:local("PT Sans"),local("PTSans-Regular"),url(../../fonts/PTSans/ptsans-regular_cyrillicc4ca.woff2?1) format("woff2");unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:local("PT Sans"),local("PTSans-Regular"),url(../../fonts/PTSans/ptsans-regular_latin-extc4ca.woff2?1) format("woff2");unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:local("PT Sans"),local("PTSans-Regular"),url(../../fonts/PTSans/ptsans-regular_latinc4ca.woff2?1) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'PT Sans';font-style:normal;font-weight:400;font-display:swap;src:local("PT Sans"),local("PTSans-Regular"),url(../../fonts/PTSans/ptsans-regular_enc4ca.woff2?1) format("woff2");unicode-range:U+0-FF,U+131,U+142,U+152,U+153,U+2BB,U+2BC,U+2C6,U+2DA,U+2DC,U+420,U+423,U+430,U+438-43A,U+43D,U+440,U+441,U+443,U+44C,U+457,U+2000-206F,U+2074,U+20AA-20AC,U+20B4,U+20B9,U+20BA,U+20BD,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:local("PT Sans Bold"),local("PTSans-Bold"),url(../../fonts/PTSans/ptsans-bold_cyrillic-extc4ca.woff2?1) format("woff2");unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:local("PT Sans Bold"),local("PTSans-Bold"),url(../../fonts/PTSans/ptsans-bold_cyrillicc4ca.woff2?1) format("woff2");unicode-range:U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:local("PT Sans Bold"),local("PTSans-Bold"),url(../../fonts/PTSans/ptsans-bold_latin-extc4ca.woff2?1) format("woff2");unicode-range:U+0100-024F,U+0259,U+1E00-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:local("PT Sans Bold"),local("PTSans-Bold"),url(../../fonts/PTSans/ptsans-bold_latinc4ca.woff2?1) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:'PT Sans';font-style:normal;font-weight:700;font-display:swap;src:local("PT Sans Bold"),local("PTSans-Bold"),url(../../fonts/PTSans/ptsans-bold_enc4ca.woff2?1) format("woff2");unicode-range:U+0-FF,U+131,U+142,U+152,U+153,U+2BB,U+2BC,U+2C6,U+2DA,U+2DC,U+420,U+423,U+430,U+438-43A,U+43D,U+440,U+441,U+443,U+44C,U+457,U+2000-206F,U+2074,U+20AA-20AC,U+20B4,U+20B9,U+20BA,U+20BD,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}
</style>
<link rel="preload" href="../../fonts/PTSans/ptsans-regular_enc4ca.woff2?1" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="../../fonts/PTSans/ptsans-bold_enc4ca.woff2?1" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="../../fonts/PTSans/ptsans-regular_cyrillicc4ca.woff2?1" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="../../fonts/PTSans/ptsans-bold_cyrillicc4ca.woff2?1" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="../../fonts/fontello/fontawesomea92a.woff2?15843843" as="font" type="font/woff2" crossorigin>


<script defer src="../../js/public.min1749.js?id=77d40430343920ca57d184f85668a382"></script>



</head>
<body class="locale-ru    announcement   chain-of-responsibility" data-body_class="chain-of-responsibility">

<div class="body-holder">


            <div class="announcement-block prom" style="background:black;" data-id="DIDP-announcement" data-creative-id="ru" data-position="top"><div class="announcement-block-inner">
                САЙТ ЗАБЛОКИРОВАН РОСКОМНАДЗОРОМ <span style="color: red; font-weight: bold;">ИЗ-ЗА КАРТИНКИ ЕНОТА</span>. <a href="https://feedback.refactoring.guru/ru/communities/1/topics/4116-sajt-zablokirovan-v-rossii">С VPN всё работает »</a>
            </div></div>
    
    <div class="cart-placeholder">
    <div class="cart-block-container" style="display:none">
        <div class="cart-block btn-group">
            <a href="#checkout" class="btn cart open-checkout">
                <span class="cart-text"></span>&nbsp;<strong class="cart-total font-money"></strong>
            </a><a href="#checkout" class="btn btn-secondary checkout open-checkout"><i class="fa fa-shopping-cart" aria-hidden="true"></i> <span class="btn-text-span d-none d-sm-inline-block d-lg-none d-hg-inline-block"></span></a>
        </div>
    </div>
</div>
    <main role="main" class="main-content top-content center-content " data-page_class="">
        <div class="main-content-container center-content-container">
                        <div class="pattern page text">
<article>
    <div class="breadcrumb">
                                    <a class="home" href="../../index.html"><i class="fa fa-home" aria-hidden="true"></i></a>
                                                / <a class="type" href="../design-patterns.html">Паттерны проектирования</a>
                                                / <a class="type" href="behavioral-patterns.html">Поведенческие паттерны</a>
                        </div>
    <h1 class="title">Цепочка обязанностей</h1>

    <script type="text/javascript">
        // Shorten examples titles for users.
        var h1 = document.getElementsByTagName("H1")[0];
        if (h1.offsetHeight > 160) {
            h1.className += ' smaller';
        }

        // Small beautification for pattern examples.
        var title = h1.innerHTML;
        title = title.replace(/^(Java|C\+\+|C#|PHP|Python|Ruby|Delphi): (.*)$/, '<strong>$1:</strong> $2');
        h1.innerHTML = title;
    </script>

            <div class="aka">
            Также известен как: <span style="display:inline-block">CoR,&nbsp;</span><span style="display:inline-block">Chain of Command,&nbsp;</span><span style="display:inline-block">Chain of Responsibility</span>
        </div>
    
    

    <div class="section intent">
<h2 id="intent"><i class="fa fa-flip-horizontal fa-comment-alt-dots" aria-hidden="true"></i> Суть паттерна</h2>
<p><strong>Цепочка обязанностей</strong> — это поведенческий паттерн проектирования, который позволяет передавать запросы последовательно по цепочке обработчиков. Каждый последующий обработчик решает, может ли он обработать запрос сам и стоит ли передавать запрос дальше по цепи.</p>
<figure class="image"><img src="../../images/patterns/content/chain-of-responsibility/chain-of-responsibilityf2d1.png?id=56c10d0dc712546cc283cfb3fb463458" alt="Паттерн Цепочка&amp;nbsp;обязанностей" width="640" srcset="/images/patterns/content/chain-of-responsibility/chain-of-responsibility-2x.png?id=cc104b0a00a410f37fb39da80f392b88 2x" /></figure>
</div>
<div class="section problem">
<h2 id="problem"><i class="fa fa-frown" aria-hidden="true"></i> Проблема</h2>
<p>Представьте, что вы делаете систему приёма онлайн-заказов. Вы хотите ограничить к ней доступ так, чтобы только авторизованные пользователи могли создавать заказы. Кроме того, определённые пользователи, владеющие правами администратора, должны иметь полный доступ к заказам.</p>
<p>Вы быстро сообразили, что эти проверки нужно выполнять последовательно. Ведь пользователя можно попытаться «залогинить» в систему, если его запрос содержит логин и пароль. Но если такая попытка не удалась, то проверять расширенные права доступа попросту не имеет смысла.</p>
<figure class="image"><img src="../../images/patterns/diagrams/chain-of-responsibility/problem1-rufceb.png?id=85981afa10f1e1f5bfa51bf8f18ff774" alt="Проблема, которую решает Цепочка обязанностей" width="600" srcset="/images/patterns/diagrams/chain-of-responsibility/problem1-ru-2x.png?id=ceec9e9d1ba1597bb01c6d8328aaf995 2x" loading="lazy" /><figcaption>
<p>Запрос проходит ряд проверок перед доступом в систему заказов.</p>
</figcaption></figure>
<p>На протяжении следующих нескольких месяцев вам пришлось добавить ещё несколько таких последовательных проверок.</p>
<ul>
<li>
<p>Кто-то резонно заметил, что неплохо бы проверять данные, передаваемые в запросе перед тем, как вносить их в систему — вдруг запрос содержит данные о покупке несуществующих продуктов.</p>
</li>
<li>
<p>Кто-то предложил блокировать массовые отправки формы с одним и тем же логином, чтобы предотвратить подбор паролей ботами.</p>
</li>
<li>
<p>Кто-то заметил, что форму заказа неплохо бы доставать из кеша, если она уже была однажды показана.</p>
</li>
</ul>
<figure class="image"><img src="../../images/patterns/diagrams/chain-of-responsibility/problem2-ru1ba6.png?id=400543b25c39681d2cbdb5b1bb8cf75b" alt="Со временем код проверок становится всё более запутанным" width="610" srcset="/images/patterns/diagrams/chain-of-responsibility/problem2-ru-2x.png?id=69263ba7c95ed20e7da24775e1158ece 2x" loading="lazy" /><figcaption>
<p>Со временем код проверок становится всё более запутанным.</p>
</figcaption></figure>
<p>С каждой новой «фичей» код проверок, выглядящий как большой клубок условных операторов, всё больше и больше раздувался. При изменении одного правила приходилось трогать код всех проверок. А для того, чтобы применить проверки к другим ресурсам, пришлось продублировать их код в других классах.</p>
<p>Поддерживать такой код стало не только очень хлопотно, но и затратно. И вот в один прекрасный день вы получаете задачу рефакторинга...</p>
</div>
<div class="section solution">
<h2 id="solution"><i class="fa fa-smile-beam" aria-hidden="true"></i> Решение</h2>
<p>Как и многие другие поведенческие паттерны, Цепочка обязанностей базируется на том, чтобы превратить отдельные поведения в объекты. В нашем случае каждая проверка переедет в отдельный класс с единственным методом выполнения. Данные запроса, над которым происходит проверка, будут передаваться в метод как аргументы.</p>
<p>А теперь по-настоящему важный этап. Паттерн предлагает связать объекты обработчиков в одну цепь. Каждый из них будет иметь ссылку на следующий обработчик в цепи. Таким образом, при получении запроса обработчик сможет не только сам что-то с ним сделать, но и передать обработку следующему объекту в цепочке.</p>
<p>Передавая запросы в первый обработчик цепочки, вы можете быть уверены,  что все объекты в цепи смогут его обработать. При этом длина цепочки не имеет никакого значения.</p>
<p>И последний штрих. Обработчик не обязательно должен передавать запрос дальше, причём эта особенность может быть использована по-разному.</p>
<p>В примере с фильтрацией доступа обработчики прерывают дальнейшие проверки, если текущая проверка не прошла. Ведь нет смысла тратить попусту ресурсы, если и так понятно, что с запросом что-то не так.</p>
<figure class="image"><img src="../../images/patterns/diagrams/chain-of-responsibility/solution1-rudb57.png?id=c1c1477e534ab88833a6183a9c2a1193" alt="Обработчики следуют в цепочке один за другим" width="640" srcset="/images/patterns/diagrams/chain-of-responsibility/solution1-ru-2x.png?id=4f94c55000334239f94f0e54925f19b8 2x" loading="lazy" /><figcaption>
<p>Обработчики следуют в цепочке один за другим.</p>
</figcaption></figure>
<p>Но есть и другой подход, при котором обработчики прерывают цепь только когда они <em>могут</em> обработать запрос. В этом случае запрос движется по цепи, пока не найдётся обработчик, который может его обработать. Очень часто такой подход используется для передачи событий, создаваемых классами графического интерфейса в результате взаимодействия с пользователем.</p>
<p>Например, когда пользователь кликает по кнопке, программа выстраивает цепочку из объекта этой кнопки, всех её родительских элементов и общего окна приложения на конце. Событие клика передаётся по этой цепи до тех пор, пока не найдётся объект, способный его обработать. Этот пример примечателен ещё и тем, что цепочку всегда можно выделить из древовидной структуры объектов, в которую обычно и свёрнуты элементы пользовательского интерфейса.</p>
<figure class="image"><img src="../../images/patterns/diagrams/chain-of-responsibility/solution2-ru4e42.png?id=cb0aeb4420e7ab9add900e13c82b072d" alt="Цепочку можно выделить даже из дерева объектов" width="520" srcset="/images/patterns/diagrams/chain-of-responsibility/solution2-ru-2x.png?id=ac4da36da79c8a8a006f331ee2746292 2x" loading="lazy" /><figcaption>
<p>Цепочку можно выделить даже из дерева объектов.</p>
</figcaption></figure>
<p>Очень важно, чтобы все объекты цепочки имели общий интерфейс. Обычно каждому конкретному обработчику достаточно знать только то, что следующий объект в цепи имеет метод <code>выполнить</code>. Благодаря этому связи между объектами цепочки будут более гибкими. Кроме того, вы сможете формировать цепочки на лету из разнообразных объектов, не привязываясь к конкретным классам.</p>
</div>
<div class="section analogy">
<h2 id="analogy"><i class="fa fa-car-side" aria-hidden="true"></i> Аналогия из жизни</h2>
<figure class="image"><img src="../../images/patterns/content/chain-of-responsibility/chain-of-responsibility-comic-1-ru7700.png?id=36f613d78baebc27d21d2a94deb3992f" alt="Пример общения с поддержкой" width="600" srcset="/images/patterns/content/chain-of-responsibility/chain-of-responsibility-comic-1-ru-2x.png?id=d7f6e32b22e12f3a6a4f271838468ef8 2x" loading="lazy" /><figcaption>
<p>Пример общения с поддержкой.</p>
</figcaption></figure>
<p>Вы купили новую видеокарту. Она автоматически определилась и заработала под Windows, но в вашей любимой Ubuntu «завести» её не удалось. Со слабой надеждой вы звоните в службу поддержки.</p>
<p>Первым вы слышите голос автоответчика, предлагающий выбор из десятка стандартных решений. Ни один из вариантов не подходит, и робот соединяет вас с живым оператором.</p>
<p>Увы, но рядовой оператор поддержки умеет общаться только заученными фразами и давать шаблонные ответы. После очередного предложения «выключить и включить компьютер» вы просите связать вас с настоящими инженерами.</p>
<p>Оператор перебрасывает звонок дежурному инженеру, изнывающему от скуки в своей каморке. Уж он-то знает, как вам помочь! Инженер рассказывает вам, где скачать подходящие драйвера и как настроить их под Ubuntu. Запрос удовлетворён. Вы кладёте трубку.</p>
</div>
<div class="section structure-container">
<h2 id="structure"><i class="fa fa-sitemap" aria-hidden="true"></i> Структура</h2>
<div class="structure">
<div class="struct-image1 struct-image">
<figure class="image"><img class="structure-img-non-indexed d-none d-xl-block" src="../../images/patterns/diagrams/chain-of-responsibility/structure03c9.png?id=848f0fc8dca57a44974d63f8181f5406" alt="Структура классов паттерна Цепочка обязанностей" width="380" srcset="/images/patterns/diagrams/chain-of-responsibility/structure-2x.png?id=bb837faaac88e7f2a16f751d0beaa201 2x" loading="lazy" /><img class="structure-img-indexed d-xl-none" src="../../images/patterns/diagrams/chain-of-responsibility/structure-indexedfcb6.png?id=e13a5bf44f9ca47299223116af77cbef" alt="Структура классов паттерна Цепочка обязанностей" width="380" srcset="/images/patterns/diagrams/chain-of-responsibility/structure-indexed-2x.png?id=4f27e2c48e635f45a78472d707a8df3c 2x" loading="lazy" /></figure>
</div>
<ol><li class="struct-li1">
<p><strong>Обработчик</strong> определяет общий для всех конкретных обработчиков интерфейс. Обычно достаточно описать единственный метод обработки запросов, но иногда здесь может быть объявлен и метод выставления следующего обработчика.</p>
</li>
<li class="struct-li2">
<p><strong>Базовый обработчик</strong> — опциональный класс, который позволяет избавиться от дублирования одного и того же кода во всех конкретных обработчиках.</p>
<p>Обычно этот класс имеет поле для хранения ссылки на следующий обработчик в цепочке. Клиент связывает обработчики в цепь, подавая ссылку на следующий обработчик через конструктор или сеттер поля. Также здесь можно реализовать базовый метод обработки, который бы просто перенаправлял запрос следующему обработчику, проверив его наличие.</p>
</li>
<li class="struct-li3">
<p><strong>Конкретные обработчики</strong> содержат код обработки запросов. При получении запроса каждый обработчик решает, может ли он обработать запрос, а также стоит ли передать его следующему объекту.</p>
<p>В большинстве случаев обработчики могут работать сами по себе и быть неизменяемыми, получив все нужные детали через параметры конструктора.</p>
</li>
<li class="struct-li4">
<p><strong>Клиент</strong> может либо сформировать цепочку обработчиков единожды, либо перестраивать её динамически, в зависимости от логики программы. Клиент может отправлять запросы любому из объектов цепочки, не обязательно первому из них.</p>
</li></ol>
<style structure type="text/css" >
@media (min-width: 1200px) {
.structure {
margin: 0;
width: auto;
height: 530px;
}

.struct-image {
left: 280px;
top: 80px;
}

.struct-li1 {
left: 0px;
top: 20px;
width: 280px;
height: 170px;
}

.struct-li2 {
left: 0px;
top: 210px;
width: 280px;
height: 330px;
}

.struct-li3 {
left: 670px;
top: 230px;
width: 230px;
height: 330px;
}

.struct-li4 {
left: 670px;
top: 0px;
width: 230px;
height: 210px;
}
}

</style>
</div></div>
<div class="section pseudocode">
<h2 id="pseudocode"><i class="fa fa-hashtag" aria-hidden="true"></i> Псевдокод</h2>
<p>В этом примере <strong>Цепочка обязанностей</strong> отвечает за показ контекстной помощи для активных элементов пользовательского интерфейса.</p>
<figure class="image"><img src="../../images/patterns/diagrams/chain-of-responsibility/example-ru4e05.png?id=9e9b6643933273864826aadedb8e23f8" alt="Структура классов примера паттерна Цепочка обязанностей" width="610" srcset="/images/patterns/diagrams/chain-of-responsibility/example-ru-2x.png?id=78d62a61aa19796018c791b444d50686 2x" loading="lazy" /><figcaption>
<p>Графический интерфейс построен с помощью компоновщика, где у каждого элемента есть ссылка на свой элемент-контейнер. Цепочку можно выстроить, пройдясь по всем контейнерам, в которые вложен элемент.</p>
</figcaption></figure>
<p>Графический интерфейс приложения обычно структурирован в виде дерева. Класс <code>Диалог</code>, отображающий всё окно приложения — это корень дерева. Диалог содержит <code>Панели</code>, которые, в свою очередь, могут содержать либо другие вложенные панели, либо простые элементы, вроде <code>Кнопок</code>.</p>
<p>Простые элементы могут показывать небольшие подсказки, если для них указан текст помощи. Но есть и более сложные компоненты, для которых этот способ демонстрации помощи слишком прост. Они определяют собственный способ отображения контекстной помощи.</p>
<figure class="image"><img src="../../images/patterns/diagrams/chain-of-responsibility/example2-ru557a.png?id=e7efb8d48e671549f58007043efed006" alt="Структура классов примера паттерна Цепочка обязанностей" width="250" srcset="/images/patterns/diagrams/chain-of-responsibility/example2-ru-2x.png?id=c532b84577037132b60c68507bedd05f 2x" loading="lazy" /><figcaption>
<p>Пример вызова контекстной помощи в цепочке объектов UI.</p>
</figcaption></figure>
<p>Когда пользователь наводит указатель мыши на элемент и жмёт клавишу <code>F1</code>, приложение шлёт этому элементу запрос на показ помощи. Если он не содержит никакой справочной информации, запрос путешествует далее по списку контейнера элемента, пока не находится тот, который способен отобразить помощь.</p>
<figure class="code">
<pre class="code" lang="pseudocode">// Интерфейс обработчиков.
interface ComponentWithContextualHelp is
    method showHelp()


// Базовый класс простых компонентов.
abstract class Component implements ComponentWithContextualHelp is
    field tooltipText: string

    // Контейнер, содержащий компонент, служит в качестве
    // следующего звена цепочки.
    protected field container: Container

    // Базовое поведение компонента заключается в том, чтобы
    // показать всплывающую подсказку, если для неё задан текст.
    // В обратном случае — перенаправить запрос своему
    // контейнеру, если тот существует.
    method showHelp() is
        if (tooltipText != null)
            // Показать подсказку.
        else
            container.showHelp()


// Контейнеры могут включать в себя как простые компоненты, так
// и другие контейнеры. Здесь формируются связи цепочки. Класс
// контейнера унаследует метод showHelp от своего родителя —
// базового компонента.
abstract class Container extends Component is
    protected field children: array of Component

    method add(child) is
        children.add(child)
        child.container = this


// Большинство примитивных компонентов устроит базовое поведение
// показа помощи через подсказку, которое они унаследуют из
// класса Component.
class Button extends Component is
    // ...

// Но сложные компоненты могут переопределять метод показа
// помощи по-своему. Но и в этом случае они всегда могут
// вернуться к базовой реализации, вызвав метод родителя.
class Panel extends Container is
    field modalHelpText: string

    method showHelp() is
        if (modalHelpText != null)
            // Показать модальное окно с помощью.
        else
            super.showHelp()

// ...то же, что и выше...
class Dialog extends Container is
    field wikiPageURL: string

    method showHelp() is
        if (wikiPageURL != null)
            // Открыть страницу Wiki в браузере.
        else
            super.showHelp()


// Клиентский код.
class Application is
    // Каждое приложение конфигурирует цепочку по-своему.
    method createUI() is
        dialog = new Dialog(&quot;Budget Reports&quot;)
        dialog.wikiPageURL = &quot;http://...&quot;
        panel = new Panel(0, 0, 400, 800)
        panel.modalHelpText = &quot;This panel does...&quot;
        ok = new Button(250, 760, 50, 20, &quot;OK&quot;)
        ok.tooltipText = &quot;This is an OK button that...&quot;
        cancel = new Button(320, 760, 50, 20, &quot;Cancel&quot;)
        // ...
        panel.add(ok)
        panel.add(cancel)
        dialog.add(panel)

    // Представьте, что здесь произойдёт.
    method onF1KeyPress() is
        component = this.getComponentAtMouseCoords()
        component.showHelp()
</pre>
</figure>
</div>
<div class="section applicability-container">
<h2 id="applicability"><i class="fa fa-lightbulb-on" aria-hidden="true"></i> Применимость</h2>
<div class="applicability">
<div class="applicability-problem">
<p><i class="fa fa-fw fa-bug" aria-hidden="true"></i> Когда программа должна обрабатывать разнообразные запросы несколькими способами, но заранее неизвестно, какие конкретно запросы будут приходить и какие обработчики для них понадобятся.</p>
</div><div class="applicability-solution">
<p><i class="fa fa-fw fa-bolt" aria-hidden="true"></i> С помощью Цепочки обязанностей вы можете связать потенциальных обработчиков в одну цепь и при получении запроса поочерёдно спрашивать каждого из них, не хочет ли он обработать запрос.</p>
</div>
<div class="applicability-problem">
<p><i class="fa fa-fw fa-bug" aria-hidden="true"></i> Когда важно, чтобы обработчики выполнялись один за другим в строгом порядке.</p>
</div><div class="applicability-solution">
<p><i class="fa fa-fw fa-bolt" aria-hidden="true"></i> Цепочка обязанностей позволяет запускать обработчиков последовательно один за другим в том порядке, в котором они находятся в цепочке.</p>
</div>
<div class="applicability-problem">
<p><i class="fa fa-fw fa-bug" aria-hidden="true"></i> Когда набор объектов, способных обработать запрос, должен задаваться динамически.</p>
</div><div class="applicability-solution">
<p><i class="fa fa-fw fa-bolt" aria-hidden="true"></i> В любой момент вы можете вмешаться в существующую цепочку и переназначить связи так, чтобы убрать или добавить новое звено.</p>
</div>
</div></div>
<div class="section checklist">
<h2 id="checklist"><i class="fa fa-clipboard-list-check" aria-hidden="true"></i> Шаги реализации</h2>
<ol>
<li>
<p>Создайте интерфейс обработчика и опишите в нём основной метод обработки.</p>
<p>Продумайте, в каком виде клиент должен передавать данные запроса в обработчик. Самый гибкий способ — превратить данные запроса в объект и передавать его целиком через параметры метода обработчика.</p>
</li>
<li>
<p>Имеет смысл создать абстрактный базовый класс обработчиков, чтобы не дублировать реализацию метода получения следующего обработчика во всех конкретных обработчиках.</p>
<p>Добавьте в базовый обработчик поле для хранения ссылки на следующий объект цепочки. Устанавливайте начальное значение этого поля через конструктор. Это сделает объекты обработчиков неизменяемыми. Но если программа предполагает динамическую перестройку цепочек, можете добавить и сеттер для поля.</p>
<p>Реализуйте базовый метод обработки так, чтобы он перенаправлял запрос следующему объекту, проверив его наличие. Это позволит полностью скрыть поле-ссылку от подклассов, дав им возможность передавать запросы дальше по цепи, обращаясь к родительской реализации метода.</p>
</li>
<li>
<p>Один за другим создайте классы конкретных обработчиков и реализуйте в них методы обработки запросов. При получении запроса каждый обработчик должен решить:</p>
<ul>
<li>Может ли он обработать запрос или нет?</li>
<li>Следует ли передать запрос следующему обработчику или нет?</li>
</ul>
</li>
<li>
<p>Клиент может собирать цепочку обработчиков самостоятельно, опираясь на свою бизнес-логику, либо получать уже готовые цепочки извне. В последнем случае цепочки собираются фабричными объектами, опираясь на конфигурацию приложения или параметры окружения.</p>
</li>
<li>
<p>Клиент может посылать запросы любому обработчику в цепи, а не только первому. Запрос будет передаваться по цепочке до тех пор, пока какой-то обработчик не откажется передавать его дальше, либо когда будет достигнут конец цепи.</p>
</li>
<li>
<p>Клиент должен знать о динамической природе цепочки и быть готов к таким случаям:</p>
<ul>
<li>Цепочка может состоять из единственного объекта.</li>
<li>Запросы могут не достигать конца цепи.</li>
<li>Запросы могут достигать конца, оставаясь необработанными.</li>
</ul>
</li>
</ol>
</div>
<div class="section pros-cons">
<h2 id="pros-cons"><i class="fa fa-balance-scale" aria-hidden="true"></i> Преимущества и недостатки</h2>
<div class="row"><div class="col-sm-6">
<ul>
<li>
<i class="fa fa-fw fa-check" aria-hidden="true"></i> Уменьшает зависимость между клиентом и обработчиками.</li>
<li>
<i class="fa fa-fw fa-check" aria-hidden="true"></i> Реализует <em>принцип единственной обязанности</em>.</li>
<li>
<i class="fa fa-fw fa-check" aria-hidden="true"></i> Реализует <em>принцип открытости/закрытости</em>.</li>
</ul>
</div><div class="col-sm-6">
<ul>
<li>
<i class="fa fa-fw fa-times" aria-hidden="true"></i> Запрос может остаться никем не обработанным.</li>
</ul>
</div></div></div>
<div class="section relations">
<h2 id="relations"><i class="fa fa-exchange-alt" aria-hidden="true"></i> Отношения с другими паттернами</h2>
<ul>
<li>
<p><a href="chain-of-responsibility.html">Цепочка обязанностей</a>, <a href="command.html">Команда</a>, <a href="mediator.html">Посредник</a> и <a href="observer.html">Наблюдатель</a> показывают различные способы работы отправителей запросов с их получателями:</p>
<ul>
<li>
<em>Цепочка обязанностей</em> передаёт запрос последовательно через цепочку потенциальных получателей, ожидая, что какой-то из них обработает запрос.</li>
<li>
<em>Команда</em> устанавливает косвенную одностороннюю связь от отправителей к получателям.</li>
<li>
<em>Посредник</em> убирает прямую связь между отправителями и получателями, заставляя их общаться опосредованно, через себя.</li>
<li>
<em>Наблюдатель</em> передаёт запрос одновременно всем заинтересованным получателям, но позволяет им динамически подписываться или отписываться от таких оповещений.</li>
</ul>
</li>
<li>
<p><a href="chain-of-responsibility.html">Цепочку обязанностей</a> часто используют вместе с <a href="composite.html">Компоновщиком</a>. В этом случае запрос передаётся от дочерних компонентов к их родителям.</p>
</li>
<li>
<p>Обработчики в <a href="chain-of-responsibility.html">Цепочке обязанностей</a> могут быть выполнены в виде <a href="command.html">Команд</a>. В этом случае множество разных операций может быть выполнено над одним и тем же контекстом, коим является запрос.</p>
<p>Но есть и другой подход, в котором сам запрос является <em>Командой</em>, посланной по цепочке объектов. В этом случае одна и та же операция может быть выполнена над множеством разных контекстов, представленных в виде цепочки.</p>
</li>
<li>
<p><a href="chain-of-responsibility.html">Цепочка обязанностей</a> и <a href="decorator.html">Декоратор</a> имеют очень похожие структуры. Оба паттерна базируются на принципе рекурсивного выполнения операции через серию связанных объектов. Но есть и несколько важных отличий.</p>
<p>Обработчики в <em>Цепочке обязанностей</em> могут выполнять произвольные действия, независимые друг от друга, а также в любой момент прерывать дальнейшую передачу по цепочке. С другой стороны <em>Декораторы</em> расширяют какое-то определённое действие, не ломая интерфейс базовой операции и не прерывая выполнение остальных декораторов.</p>
</li>
</ul>
</div>
<div class="section implementations">
<h2 id="implementations"><i class="fa fa-code" aria-hidden="true"></i> Примеры реализации паттерна</h2>
<p><a href="chain-of-responsibility/java/example.html" title="Цепочка обязанностей на Java" class="prog-lang-link"><img width="53" height="53" loading="lazy" src="../../images/patterns/icons/java9ca9.svg?id=e6d87e2dca08c953fe3acd1275ed4f4e" alt="Цепочка обязанностей на Java"></a>
<a href="chain-of-responsibility/csharp/example.html" title="Цепочка обязанностей на C#" class="prog-lang-link"><img width="53" height="53" loading="lazy" src="../../images/patterns/icons/csharp8c8a.svg?id=da64592defc6e86d57c39c66e9de3e58" alt="Цепочка обязанностей на C#"></a>
<a href="chain-of-responsibility/cpp/example.html" title="Цепочка обязанностей на C++" class="prog-lang-link"><img width="53" height="53" loading="lazy" src="../../images/patterns/icons/cpp9770.svg?id=f7782ed8b8666246bfcc3f8fefc3b858" alt="Цепочка обязанностей на C++"></a>
<a href="chain-of-responsibility/php/example.html" title="Цепочка обязанностей на PHP" class="prog-lang-link"><img width="53" height="53" loading="lazy" src="../../images/patterns/icons/phpb8be.svg?id=be1906eb26b71ec1d3b93720d6156618" alt="Цепочка обязанностей на PHP"></a>
<a href="chain-of-responsibility/python/example.html" title="Цепочка обязанностей на Python" class="prog-lang-link"><img width="53" height="53" loading="lazy" src="../../images/patterns/icons/python25f6.svg?id=6d815d43c0f7050a1151b43e51569c9f" alt="Цепочка обязанностей на Python"></a>
<a href="chain-of-responsibility/ruby/example.html" title="Цепочка обязанностей на Ruby" class="prog-lang-link"><img width="53" height="53" loading="lazy" src="../../images/patterns/icons/ruby3275.svg?id=b065b718c914bf8e960ef731600be1eb" alt="Цепочка обязанностей на Ruby"></a>
<a href="chain-of-responsibility/swift/example.html" title="Цепочка обязанностей на Swift" class="prog-lang-link"><img width="53" height="53" loading="lazy" src="../../images/patterns/icons/swift68dd.svg?id=0b716c2d52ec3a48fbe91ac031070c1d" alt="Цепочка обязанностей на Swift"></a>
<a href="chain-of-responsibility/typescript/example.html" title="Цепочка обязанностей на TypeScript" class="prog-lang-link"><img width="53" height="53" loading="lazy" src="../../images/patterns/icons/typescript325e.svg?id=2239d0f16cb703540c205dd8cb0c0cb7" alt="Цепочка обязанностей на TypeScript"></a>
<a href="chain-of-responsibility/go/example.html" title="Цепочка обязанностей на Go" class="prog-lang-link"><img width="53" height="53" loading="lazy" src="../../images/patterns/icons/go3287.svg?id=1a89927eb99b1ea3fde7701d97970aca" alt="Цепочка обязанностей на Go"></a></p>
</div>


    <div class="banner-set" id="book-promo">
            <div class="prom banner-content banner-bg banner-striped banner-with-image" data-id="DP: 1: Ne vtykay" data-creative-id="standard-ru" data-position="content_bottom">
                <div class="banner-image">
                    <a href="book.html">
                        <img width="200" height="200" loading="lazy" src="../../images/patterns/banners/patterns-book-banner-1-b158a.png?id=0877cab2f0102d98cd07b50af0e5beea" srcset="/images/patterns/banners/patterns-book-banner-1-b-2x.png?id=5572aa55e5b09e59780aca9e0ea8e44b 2x">
                    </a>
                </div>

                <div class="banner-text">
                    <h3 class="title">Не втыкай в транспорте</h3>
                    <p class="big">Лучше почитай нашу книгу о паттернах проектирования.</p>
                    <p>Теперь это удобно делать даже во время поездок в общественном транспорте.</p>

                    <a class="btn btn-secondary" href="book.html"><i class="fa fa-book" aria-hidden="true"></i> Узнать больше…</a>
                </div>
            </div>
        </div>

    </article>

<nav class="prev-next">
                    <div class="next">
                <h4>Читаем дальше</h4>
                <a rel="next" href="command.html" class="btn btn-primary">Команда&nbsp;<span class="fa fa-arrow-right"></span></a>
            </div>
                            <div class="prev">
                <h4>Вернуться назад</h4>
                <a rel="prev" href="behavioral-patterns.html" class="btn btn-default"><span class="fa fa-arrow-left"></span>&nbsp;Поведенческие паттерны </a>
            </div>
            </nav>
</div>

<aside class="feature content-secondary">
    <div class="prom banner-sidebar" data-id="DP: Sidebar" data-creative-id="standard-sidebar-ru" data-position="sidebar">
        <div class="banner-inner">
            <div class="image3d-book-right">
                <div class="image3d-cover" style="background: #0b3752;">
                    <a href="book.html">
                        <img width="250" height="375" loading="lazy" src="../../images/patterns/book/web-cover-ruee5e.png?id=ea25feb28a6deb8aa4af6a633904a568" srcset="/images/patterns/book/web-cover-ru-2x.png?id=95101b307f6dba409f28a417746ff3c1 2x">
                    </a>
                </div>
            </div>
            <div style="margin-top: 1rem">
                <p class="text-center">Эта статья является частью нашей электронной книги <strong>Погружение в Паттерны Проектирования</strong>.</p>
                <a href="book.html" class="btn btn-secondary btn-block"><i class="fa fa-book" aria-hidden="true"></i> Узнать больше…</a>
            </div>
        </div>
    </div>


</aside>
                    </div>
    </main>

    <nav class="navigation" role="navigation">
    <div class="navigation-container">
        <a href="#menu" class="navigation-toggle"><i class="fa fa-bars"></i></a>
        <a class="navigation-brand" href="../../ru.html">
            <img alt="Refactoring.Guru" src="../../images/content-public/logos/logo-military-mobile78b4.png?id=65ecbd1e688fc695bc20c22a1e8450d9" srcset="/images/content-public/logos/logo-military-mobile-2x.png?id=0f52141f57f67fb678da8407e254b0a3 2x"
                  width="94"                   height="64"             >
        </a>
        <div class="social-likes-block" data-url="../../index.html">
    <div data-service="facebook" class="facebook" title="Поделиться в Facebook">Facebook</div>
        <div data-service="vkontakte" class="vkontakte" title="Поделиться ВКонтакте">Вконтакте</div>
        <div data-service="twitter" class="twitter" title="Поделиться в Twitter">Twitter</div>
</div>        <ul class="navigation-menu">
                        <li class="dropdown d-lg-none">
                <a class="dropdown-toggle" id="dropdownLanguage" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fa fa-globe" aria-hidden="true"></i> <span class="caption d-none d-xl-inline-block">Язык</span>
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownLanguage">
                                                                                                        <a href="../../design-patterns/chain-of-responsibility.html" class="dropdown-item locale-link " data-locale="en" title="English">English</a>
                                                                                                                <a href="../../es/design-patterns/chain-of-responsibility.html" class="dropdown-item locale-link " data-locale="es" title="Español">Español</a>
                                                                                                                <a href="../../fr/design-patterns/chain-of-responsibility.html" class="dropdown-item locale-link " data-locale="fr" title="Français">Français</a>
                                                                                                                                                                                                                        <a href="../../pl/design-patterns/chain-of-responsibility.html" class="dropdown-item locale-link " data-locale="pl" title="Polski">Polski</a>
                                                                                                                <a href="../../pt-br/design-patterns/chain-of-responsibility.html" class="dropdown-item locale-link " data-locale="pt-br" title="Português Brasileiro">Português Brasileiro</a>
                                                                                                                <a href="chain-of-responsibility.html" class="dropdown-item locale-link active" data-locale="ru" title="Русский">Русский</a>
                                                                                                                <a href="../../uk/design-patterns/chain-of-responsibility.html" class="dropdown-item locale-link " data-locale="uk" title="Українська">Українська</a>
                                                                                                                <a href="https://refactoringguru.cn/design-patterns/chain-of-responsibility" class="dropdown-item locale-link " data-locale="zh" title="中文">中文</a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </div>
            </li>
                        <li class="nav-contact">
                <a class="userecho-private" href="https://feedback.refactoring.guru/communities/1-russkij-russian?show_feedback_form_private=true" rel="nofollow" title="Связаться">
                    <i class="fa fa-envelope"></i> <span class="caption d-none d-xl-inline-block">Связаться</span>
                </a>
            </li>
                                                <li class="nav-login">
                        <a href="../login.html" title="Войти"><i class="fa fa-user"></i> <span class="caption d-none d-xl-inline-block">Войти</span></a>
                    </li>
                                    </ul>
    </div>
    <div>
        <a class="russia-stop" href="../help-ukraine.html">
                            HELP UKRAINE <b>STOP RUSSIA</b>
                    </a>
    </div>
</nav>
    <aside class="sidebar main-menu nano">
    <a href="#menu-close" class="navigation-toggle"><i class="fa fa-fw fa-times"></i></a>
    <div class="nano-content">
                    <div class="main-menu-lang d-none d-lg-flex main-menu-lang-count-8">
                                                                                        <a href="../../design-patterns/chain-of-responsibility.html" class="locale-link locale-link-en " data-locale="en" title="English"><span class="d-lg-none">English</span><span class="d-none d-lg-inline">English</span></a>
                                                                                                <a href="../../es/design-patterns/chain-of-responsibility.html" class="locale-link locale-link-es " data-locale="es" title="Español"><span class="d-lg-none">Español</span><span class="d-none d-lg-inline">Español</span></a>
                                                                                                <a href="../../fr/design-patterns/chain-of-responsibility.html" class="locale-link locale-link-fr " data-locale="fr" title="Français"><span class="d-lg-none">Français</span><span class="d-none d-lg-inline">Français</span></a>
                                                                                                                                                                                        <a href="../../pl/design-patterns/chain-of-responsibility.html" class="locale-link locale-link-pl " data-locale="pl" title="Polski"><span class="d-lg-none">Polski</span><span class="d-none d-lg-inline">Polski</span></a>
                                                                                                <a href="../../pt-br/design-patterns/chain-of-responsibility.html" class="locale-link locale-link-pt-br " data-locale="pt-br" title="Português Brasileiro"><span class="d-lg-none">Português Brasileiro</span><span class="d-none d-lg-inline">Português-Br</span></a>
                                                                                                <a href="chain-of-responsibility.html" class="locale-link locale-link-ru active" data-locale="ru" title="Русский"><span class="d-lg-none">Русский</span><span class="d-none d-lg-inline">Русский</span></a>
                                                                                                <a href="../../uk/design-patterns/chain-of-responsibility.html" class="locale-link locale-link-uk " data-locale="uk" title="Українська"><span class="d-lg-none">Українська</span><span class="d-none d-lg-inline">Українська</span></a>
                                                                                                <a href="https://refactoringguru.cn/design-patterns/chain-of-responsibility" class="locale-link locale-link-zh " data-locale="zh" title="中文"><span class="d-lg-none">中文</span><span class="d-none d-lg-inline">中文</span></a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                </div>
        
        <a class="menu-brand" href="../../ru.html">
                            <img width=200 height=241 loading="lazy" alt="Refactoring.Guru" src="../../images/content-public/logos/logo-militaryd1c3.png?id=3eaf203cb26279327252e2c5f5d37c7f" srcset="/images/content-public/logos/logo-military-2x.png?id=5af1a599d8a4170c9a42e6fa18148b98 2x">
                    </a>
        <div>
            <a class="russia-stop" href="../help-ukraine.html">
                                    HELP UKRAINE
                    <br><b>STOP RUSSIA</b>
                            </a>
        </div>


        <div class="menu-container" style="position: relative">
                        <ul class="menu-list trail">
                            <li class="featured">
            <a href="../store.html">
                <i class="fa fa-fw fa-star" aria-hidden="true"></i> Премиум контент
            </a>
    
            <ul >
                            <li class="featured menu-fs15">
            <a href="book.html">
                <i class="fa fa-fw fa-book" aria-hidden="true"></i> Книга о паттернах
            </a>
    
    
            </li>
                                <li class="featured menu-fs15">
            <a href="../refactoring/course.html">
                <i class="fa fa-fw fa-graduation-cap" aria-hidden="true"></i> Курс по рефакторингу
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring.html">
                <i class="fa fa-fw fa-scissors" aria-hidden="true"></i> Рефакторинг
            </a>
    
            <ul >
                            <li class="">
            <a href="../refactoring/what-is-refactoring.html">
                Введение в рефакторинг
            </a>
    
            <ul >
                            <li class="">
            <a href="../refactoring/what-is-refactoring.html">
                Чистый код
            </a>
    
    
            </li>
                                <li class="">
            <a href="../refactoring/technical-debt.html">
                Технический долг
            </a>
    
    
            </li>
                                <li class="">
            <a href="../refactoring/when.html">
                Когда рефакторить
            </a>
    
    
            </li>
                                <li class="">
            <a href="../refactoring/how-to.html">
                Как рефакторить
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/catalog.html">
                Каталог
            </a>
    
    
            </li>
                                <li class="">
            <a href="../refactoring/smells.html">
                Запахи кода
            </a>
    
            <ul >
                            <li class="">
            <a href="../refactoring/smells/bloaters.html">
                Раздувальщики
            </a>
    
            <ul >
                            <li class="">
            <a href="../smells/long-method.html">
                Длинный метод
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/large-class.html">
                Большой класс
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/primitive-obsession.html">
                Одержимость элементарными типами
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/long-parameter-list.html">
                Длинный список параметров
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/data-clumps.html">
                Группы данных
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/smells/oo-abusers.html">
                Нарушители объектно-ориентированного дизайна
            </a>
    
            <ul >
                            <li class="">
            <a href="../smells/switch-statements.html">
                Операторы switch
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/temporary-field.html">
                Временное поле
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/refused-bequest.html">
                Отказ от наследства
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/alternative-classes-with-different-interfaces.html">
                Альтернативные классы с разными интерфейсами
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/smells/change-preventers.html">
                Утяжелители изменений
            </a>
    
            <ul >
                            <li class="">
            <a href="../smells/divergent-change.html">
                Расходящиеся модификации
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/shotgun-surgery.html">
                Стрельба дробью
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/parallel-inheritance-hierarchies.html">
                Параллельные иерархии наследования
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/smells/dispensables.html">
                Замусориватели
            </a>
    
            <ul >
                            <li class="">
            <a href="../smells/comments.html">
                Комментарии
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/duplicate-code.html">
                Дублирование кода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/lazy-class.html">
                Ленивый класс
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/data-class.html">
                Класс данных
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/dead-code.html">
                Мёртвый код
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/speculative-generality.html">
                Теоретическая общность
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/smells/couplers.html">
                Опутыватели связями
            </a>
    
            <ul >
                            <li class="">
            <a href="../smells/feature-envy.html">
                Завистливые функции
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/inappropriate-intimacy.html">
                Неуместная близость
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/message-chains.html">
                Цепочка вызовов
            </a>
    
    
            </li>
                                <li class="">
            <a href="../smells/middle-man.html">
                Посредник
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/smells/other.html">
                Остальные запахи
            </a>
    
            <ul >
                            <li class="">
            <a href="../smells/incomplete-library-class.html">
                Неполнота библиотечного класса
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/techniques.html">
                Техники
            </a>
    
            <ul >
                            <li class="">
            <a href="../refactoring/techniques/composing-methods.html">
                Составление методов
            </a>
    
            <ul >
                            <li class="">
            <a href="../extract-method.html">
                Извлечение метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../inline-method.html">
                Встраивание метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../extract-variable.html">
                Извлечение переменной
            </a>
    
    
            </li>
                                <li class="">
            <a href="../inline-temp.html">
                Встраивание переменной
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-temp-with-query.html">
                Замена переменной вызовом метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../split-temporary-variable.html">
                Расщепление переменной
            </a>
    
    
            </li>
                                <li class="">
            <a href="../remove-assignments-to-parameters.html">
                Удаление присваиваний параметрам
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-method-with-method-object.html">
                Замена метода объектом методов
            </a>
    
    
            </li>
                                <li class="">
            <a href="../substitute-algorithm.html">
                Замена алгоритма
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/techniques/moving-features-between-objects.html">
                Перемещение функций между объектами
            </a>
    
            <ul >
                            <li class="">
            <a href="../move-method.html">
                Перемещение метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../move-field.html">
                Перемещение поля
            </a>
    
    
            </li>
                                <li class="">
            <a href="../extract-class.html">
                Извлечение класса
            </a>
    
    
            </li>
                                <li class="">
            <a href="../inline-class.html">
                Встраивание класса
            </a>
    
    
            </li>
                                <li class="">
            <a href="../hide-delegate.html">
                Сокрытие делегирования
            </a>
    
    
            </li>
                                <li class="">
            <a href="../remove-middle-man.html">
                Удаление посредника
            </a>
    
    
            </li>
                                <li class="">
            <a href="../introduce-foreign-method.html">
                Введение внешнего метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../introduce-local-extension.html">
                Введение локального расширения
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/techniques/organizing-data.html">
                Организация данных
            </a>
    
            <ul >
                            <li class="">
            <a href="../self-encapsulate-field.html">
                Самоинкапсуляция поля
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-data-value-with-object.html">
                Замена простого поля объектом
            </a>
    
    
            </li>
                                <li class="">
            <a href="../change-value-to-reference.html">
                Замена значения ссылкой
            </a>
    
    
            </li>
                                <li class="">
            <a href="../change-reference-to-value.html">
                Замена ссылки значением
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-array-with-object.html">
                Замена поля-массива объектом
            </a>
    
    
            </li>
                                <li class="">
            <a href="../duplicate-observed-data.html">
                Дублирование видимых данных
            </a>
    
    
            </li>
                                <li class="">
            <a href="../change-unidirectional-association-to-bidirectional.html">
                Замена однонаправленной связи двунаправленной
            </a>
    
    
            </li>
                                <li class="">
            <a href="../change-bidirectional-association-to-unidirectional.html">
                Замена двунаправленной связи однонаправленной
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-magic-number-with-symbolic-constant.html">
                Замена магического числа символьной константой
            </a>
    
    
            </li>
                                <li class="">
            <a href="../encapsulate-field.html">
                Инкапсуляция поля
            </a>
    
    
            </li>
                                <li class="">
            <a href="../encapsulate-collection.html">
                Инкапсуляция коллекции
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-type-code-with-class.html">
                Замена кодирования типа классом
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-type-code-with-subclasses.html">
                Замена кодирования типа подклассами
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-type-code-with-state-strategy.html">
                Замена кодирования типа состоянием/стратегией
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-subclass-with-fields.html">
                Замена подкласса полями
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/techniques/simplifying-conditional-expressions.html">
                Упрощение условных выражений
            </a>
    
            <ul >
                            <li class="">
            <a href="../decompose-conditional.html">
                Разбиение условного оператора
            </a>
    
    
            </li>
                                <li class="">
            <a href="../consolidate-conditional-expression.html">
                Объединение условных операторов
            </a>
    
    
            </li>
                                <li class="">
            <a href="../consolidate-duplicate-conditional-fragments.html">
                Объединение дублирующихся фрагментов в условных операторах
            </a>
    
    
            </li>
                                <li class="">
            <a href="../remove-control-flag.html">
                Удаление управляющего флага
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-nested-conditional-with-guard-clauses.html">
                Замена вложенных условных операторов граничным оператором
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-conditional-with-polymorphism.html">
                Замена условного оператора полиморфизмом
            </a>
    
    
            </li>
                                <li class="">
            <a href="../introduce-null-object.html">
                Введение Null-объекта
            </a>
    
    
            </li>
                                <li class="">
            <a href="../introduce-assertion.html">
                Введение проверки утверждения
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/techniques/simplifying-method-calls.html">
                Упрощение вызовов методов
            </a>
    
            <ul >
                            <li class="">
            <a href="../rename-method.html">
                Переименование метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../add-parameter.html">
                Добавление параметра
            </a>
    
    
            </li>
                                <li class="">
            <a href="../remove-parameter.html">
                Удаление параметра
            </a>
    
    
            </li>
                                <li class="">
            <a href="../separate-query-from-modifier.html">
                Разделение запроса и модификатора
            </a>
    
    
            </li>
                                <li class="">
            <a href="../parameterize-method.html">
                Параметризация метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-parameter-with-explicit-methods.html">
                Замена параметра набором специализированных методов
            </a>
    
    
            </li>
                                <li class="">
            <a href="../preserve-whole-object.html">
                Передача всего объекта
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-parameter-with-method-call.html">
                Замена параметра вызовом метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../introduce-parameter-object.html">
                Замена параметров объектом
            </a>
    
    
            </li>
                                <li class="">
            <a href="../remove-setting-method.html">
                Удаление сеттера
            </a>
    
    
            </li>
                                <li class="">
            <a href="../hide-method.html">
                Сокрытие метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-constructor-with-factory-method.html">
                Замена конструктора фабричным методом
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-error-code-with-exception.html">
                Замена кода ошибки исключением
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-exception-with-test.html">
                Замена исключения проверкой условия
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="../refactoring/techniques/dealing-with-generalization.html">
                Решение задач обобщения
            </a>
    
            <ul >
                            <li class="">
            <a href="../pull-up-field.html">
                Подъём поля
            </a>
    
    
            </li>
                                <li class="">
            <a href="../pull-up-method.html">
                Подъём метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../pull-up-constructor-body.html">
                Подъём тела конструктора
            </a>
    
    
            </li>
                                <li class="">
            <a href="../push-down-method.html">
                Спуск метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../push-down-field.html">
                Спуск поля
            </a>
    
    
            </li>
                                <li class="">
            <a href="../extract-subclass.html">
                Извлечение подкласса
            </a>
    
    
            </li>
                                <li class="">
            <a href="../extract-superclass.html">
                Извлечение суперкласса
            </a>
    
    
            </li>
                                <li class="">
            <a href="../extract-interface.html">
                Извлечение интерфейса
            </a>
    
    
            </li>
                                <li class="">
            <a href="../collapse-hierarchy.html">
                Свёртывание иерархии
            </a>
    
    
            </li>
                                <li class="">
            <a href="../form-template-method.html">
                Создание шаблонного метода
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-inheritance-with-delegation.html">
                Замена наследования делегированием
            </a>
    
    
            </li>
                                <li class="">
            <a href="../replace-delegation-with-inheritance.html">
                Замена делегирования наследованием
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                        </ul>
    
            </li>
                        </ul>
    
            </li>
                                <li class="trail">
            <a href="../design-patterns.html">
                <i class="fa fa-fw fa-puzzle-piece" aria-hidden="true"></i> Паттерны
            </a>
    
            <ul >
                            <li class="">
            <a href="what-is-pattern.html">
                Введение в паттерны
            </a>
    
            <ul >
                            <li class="">
            <a href="what-is-pattern.html">
                Что такое Паттерн?
            </a>
    
    
            </li>
                                <li class="">
            <a href="history.html">
                История паттернов
            </a>
    
    
            </li>
                                <li class="">
            <a href="why-learn-patterns.html">
                Зачем знать паттерны?
            </a>
    
    
            </li>
                                <li class="">
            <a href="criticism.html">
                Критика паттернов
            </a>
    
    
            </li>
                                <li class="">
            <a href="classification.html">
                Классификация паттернов
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="">
            <a href="catalog.html">
                Каталог
            </a>
    
    
            </li>
                                <li class="menu-third-level">
            <a href="creational-patterns.html">
                Порождающие
            </a>
    
            <ul >
                            <li class="">
            <a href="factory-method.html">
                Фабричный метод
            </a>
    
    
            </li>
                                <li class="">
            <a href="abstract-factory.html">
                Абстрактная фабрика
            </a>
    
    
            </li>
                                <li class="">
            <a href="builder.html">
                Строитель
            </a>
    
    
            </li>
                                <li class="">
            <a href="prototype.html">
                Прототип
            </a>
    
    
            </li>
                                <li class="">
            <a href="singleton.html">
                Одиночка
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="menu-third-level">
            <a href="structural-patterns.html">
                Структурные
            </a>
    
            <ul >
                            <li class="">
            <a href="adapter.html">
                Адаптер
            </a>
    
    
            </li>
                                <li class="">
            <a href="bridge.html">
                Мост
            </a>
    
    
            </li>
                                <li class="">
            <a href="composite.html">
                Компоновщик
            </a>
    
    
            </li>
                                <li class="">
            <a href="decorator.html">
                Декоратор
            </a>
    
    
            </li>
                                <li class="">
            <a href="facade.html">
                Фасад
            </a>
    
    
            </li>
                                <li class="">
            <a href="flyweight.html">
                Легковес
            </a>
    
    
            </li>
                                <li class="">
            <a href="proxy.html">
                Заместитель
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="menu-third-level trail">
            <a href="behavioral-patterns.html">
                Поведенческие
            </a>
    
            <ul >
                            <li class="trail active">
            <a href="chain-of-responsibility.html">
                Цепочка обязанностей
            </a>
    
    
            </li>
                                <li class="">
            <a href="command.html">
                Команда
            </a>
    
    
            </li>
                                <li class="">
            <a href="iterator.html">
                Итератор
            </a>
    
    
            </li>
                                <li class="">
            <a href="mediator.html">
                Посредник
            </a>
    
    
            </li>
                                <li class="">
            <a href="memento.html">
                Снимок
            </a>
    
    
            </li>
                                <li class="">
            <a href="observer.html">
                Наблюдатель
            </a>
    
    
            </li>
                                <li class="">
            <a href="state.html">
                Состояние
            </a>
    
    
            </li>
                                <li class="">
            <a href="strategy.html">
                Стратегия
            </a>
    
    
            </li>
                                <li class="">
            <a href="template-method.html">
                Шаблонный метод
            </a>
    
    
            </li>
                                <li class="">
            <a href="visitor.html">
                Посетитель
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                                <li class="menu-code-examples">
            <a href="examples.html">
                Примеры кода
            </a>
    
            <ul >
                            <li class="menu-code-examples-item">
            <a href="csharp.html">
                C#
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="cpp.html">
                C++
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="go.html">
                Go
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="java.html">
                Java
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="php.html">
                PHP
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="python.html">
                Python
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="ruby.html">
                Ruby
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="swift.html">
                Swift
            </a>
    
    
            </li>
                                <li class="menu-code-examples-item">
            <a href="typescript.html">
                TypeScript
            </a>
    
    
            </li>
                        </ul>
    
            </li>
                        </ul>
    
            </li>
                        </ul>
    
            </div>
        <div class="sidebar-controls">
            <div class="sidebar-controls-container">
                <a href="../login.html" title="Войти"><i
                            class="fa fa-fw fa-fw fa-user"></i> Войти</a>
                <a href="https://feedback.refactoring.guru/communities/1-russkij-russian" class="userecho-public" rel="nofollow" title="Обратная связь"><i class="fa fa-fw fa-fw fa-envelope" aria-hidden="true"></i> Связаться</a>
            </div>
        </div>
    </div>
</aside>
    <footer class="footer center-content">
    <div class="footer-container center-content-container">
        <div class="footer-inner container-fluid">
            <div class="row">
                <div class="col-8 col-md-10">
                    <ul class="footer-list footer-list-horizontal">
                        <li><a href="../../ru.html">Главная</a></li>
                        <li><a href="../refactoring.html">Рефакторинг</a></li>
                        <li><a href="../design-patterns.html">Паттерны</a></li>
                        <li><a href="../store.html">Премиум контент</a></li>
                        <li><a href="https://refactoring.userecho.com/" rel="nofollow" class="userecho-public">Форум</a></li>
                        <li><a href="https://refactoring.userecho.com/" rel="nofollow" class="userecho-private">Связаться</a></li>
                    </ul>
                </div>
                <div class="col-4 col-md-2">
                    <ul class="footer-list footer-list-iconic">
                                                    <li><a href="https://www.facebook.com/refactoring.guru"><i class="fa fa-facebook-official"></i></a></li>
                                                <li><a href="../sendy/form.html" rel="nofollow"><i class="fa fa-envelope" aria-hidden="true"></i></a></li>
                        <li><a href="https://github.com/RefactoringGuru"><i class="fa fa-github-circled"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="footer-second">
        <div class="footer-container center-content-container">
            <div class="footer-inner container-fluid">
                <div class="row">
                    <div class="col-12 col-sm-8">
                        <i class="fa fa-fw fa-copyright"></i> 2014-2022 <a href="../../ru.html">Refactoring.Guru</a>. <span style="white-space: nowrap">Все права защищены.</span><br>
                        <object class="fa-fw" style="height: 0.8rem; filter: invert(50%);"  type="image/svg+xml" data="../../images/content-public/icons/fa-building4895.svg?id=afddb5806968b0a9acfc1df75a181234">
                            <img class="fa-fw" style="height: 0.8rem;" src="../../images/content-public/icons/fa-building4895.svg?id=afddb5806968b0a9acfc1df75a181234" alt="Organization address"/>
                        </object> Хмельницкое шоссе 19 / 27, Каменец-Подольский, Украина, 32305<br>
                        <i class="fa fa-fw fa-envelope"></i>  Email: support@refactoring.guru

                        <div class="mt-2">
                            <i class="fa fa-fw fa-image"></i> Иллюстрации нарисовал <a href="http://zhart.us/" rel="nofollow"><span style="white-space: nowrap">Дмитрий Жарт</span></a></div>
                    </div>
                    <div class="footer-links-right col-12 col-sm-4 mt-4 mt-sm-0">
                        <div class="row">
                            <div class="col-8 col-sm-12">
                                <ul class="footer-list">
                                    <li><a href="../terms.html"><span>Условия использования</span></a>
                                    </li>
                                    <li><a href="../privacy-policy.html"><span>Политика конфиденциальности</span></a>
                                    </li>
                                    <li><a href="../content-usage-policy.html"><span>Использование контента</span></a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>

</div>


    <script>
function extend(){var extended={};var deep=false;var i=0;var length=arguments["length"];if(Object["prototype"]["toString"]["call"](arguments[0])=== '[object Boolean]'){deep= arguments[0];i++};var merge=function(obj){for(var prop in obj){if(Object["prototype"]["hasOwnProperty"]["call"](obj,prop)){if(deep&& Object["prototype"]["toString"]["call"](obj[prop])=== '[object Object]'){extended[prop]= extend(true,extended[prop],obj[prop])}else {extended[prop]= obj[prop]}}}};for(;i< length;i++){var obj=arguments[i];merge(obj)};return extended}
function defer(method) {if (window.jQuery) {method();} else {setTimeout(function() { defer(method) }, 50);}}
</script>
<script>
+function(sd){sd = (typeof sd === "string") ? JSON.parse(atob(sd)) : sd;for(var property in sd){if(window[property]!== null&&  typeof window[property]=== 'object'){window[property]= extend(true,window[property],sd[property])}else {window[property]= sd[property]}}}("eyJsb2NhbGUiOiJydSIsImxvY2FsZV9wcmVmaXgiOiJydVwvIiwibG9jYWxpemVkX3VybF9wcmVmaXhfbSI6Imh0dHBzOlwvXC9yZWZhY3RvcmluZy5ndXJ1XC9ydVwvIiwidXJsX3ByZWZpeF9tIjoiaHR0cHM6XC9cL3JlZmFjdG9yaW5nLmd1cnVcLyIsImxvY2FsaXplZF91cmxfcHJlZml4IjoiaHR0cHM6XC9cL3JlZmFjdG9yaW5nLmd1cnVcL3J1XC8iLCJ1cmxfcHJlZml4IjoiaHR0cHM6XC9cL3JlZmFjdG9yaW5nLmd1cnVcLyIsImNoaW5lc2VfaG9tZSI6Imh0dHBzOlwvXC9yZWZhY3RvcmluZ2d1cnUuY25cLyIsInVzZXJfZWNob19hbGlhcyI6InJlZmFjdG9yaW5nIiwidXNlcl9lY2hvX2hvc3QiOiJmZWVkYmFjay5yZWZhY3RvcmluZy5ndXJ1IiwidXNlcl9lY2hvX3ByaXZhdGVfZm9ydW0iOiIyIiwidXNlcl9lY2hvX2xvY2FsZSI6InJ1IiwidXNlcl9lY2hvX3B1YmxpY19mb3J1bSI6IjEiLCJ1c2VyX2VjaG9fcHVibGljX2ZvcnVtX3VybCI6Imh0dHBzOlwvXC9mZWVkYmFjay5yZWZhY3RvcmluZy5ndXJ1XC9jb21tdW5pdGllc1wvMS1ydXNza2lqLXJ1c3NpYW4iLCJ1c2VyX2VjaG9fc3NvX3Rva2VuIjoiIn0=");
</script>

    <script defer>
        if (window.dataLayer && window.google_optimize) {
            window.dataLayer.push({'event': 'optimize.activate'});
        }
    </script>
 
<script>(function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;h.start=1*new Date;
        h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};
        (a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;
    })(window,document.documentElement,'async-hide','dataLayer',4000,
        {'GTM-M58XZN4':true});</script>
<link rel="preconnect dns-prefetch" href="https://www.google-analytics.com/">
<script>
    var getCookie = function(name) {
        var nameEQ = name + "=";
        var ca = document.cookie.split(';');
        for(var i=0;i < ca.length;i++) {
            var c = ca[i];
            while (c.charAt(0)==' ') c = c.substring(1,c.length);
            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
        }
        return null;
    };
    var eraseCookie = function (name) {
        document.cookie = name+'=; Path=/; Max-Age=-99999999;';
    };

    window.google_analytics = 'UA-521840-40';

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

    var ga_queue = [];
    window.gaOnCreate = function(){
        ga_queue.push(arguments);
    };

            doTracking();
    
    function doTracking(clientId) {
        window.gaOnCreate = function(){
            ga.apply(this, arguments);
        };

        var options = {
            'siteSpeedSampleRate': 100
        };
        if (clientId) {
            options.clientId = clientId;
        }
        ga('create', 'UA-521840-40', options);

                    ga('require', 'GTM-M58XZN4');
            window.google_optimize = 'GTM-M58XZN4';
        
        // Fix broken Social Login referrer.
        window.social_login_provider = window.social_login_provider || getCookie('social_login_provider');
        if (window.social_login_provider) {
            ga('set', 'referrer', null);
            ga('send', 'social', window.social_login_provider, 'login', window.location.href);
            eraseCookie('social_login_provider');
        }

        var user_id = getCookie('user_id');
        if (user_id) {
            ga('set', 'userId', user_id);
        } else {
            ga('set', 'userId', null);
        }

        var location = document.location.href;
        if (typeof window.analytics_path_prefix === 'string') {
            if (/^(https?:\/\/[^\/]+?)\/$/.test(location)) {
                location = location.replace(/(https?:\/\/[^\/]+?)\//, '$1' + window.analytics_path_prefix);
            }
            else {
                location = location.replace(/(https?:\/\/[^\/]+?)\//, '$1' + window.analytics_path_prefix + '/');
            }
            ga('set', 'location', location);
        }

        if (typeof window.analytics_location_prefix === 'string') {
            location = location.replace(/(https?:\/\/[^\/]+?)\//, window.analytics_location_prefix);
            ga('set', 'location', location);
        }

        ga('require', 'ec');
        ga('send', 'pageview', (typeof window.analytics_path_prefix === 'string' ? window.analytics_path_prefix : '') + document.location.pathname);

        ga_queue.forEach(function(item){
            ga.apply(this, item);
        });
    }
</script>

<script defer>
    window.socialLikesButtons = {
                facebook: {
            counterUrl: "",
            convertNumber: null
        },
                            vkontakte: {
            counterUrl: "",
            counter: null
        },
            };
</script>

<script defer>
    var CodeMirrorScripts = ["/js/codemirror.min.js?id=24aa863dfde7c99eb17d4102684aea27"];
</script>



    <script>window.loadContent = true;window.loadCart = true;</script>
</body>

<!-- Mirrored from refactoring.guru/ru/design-patterns/chain-of-responsibility by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 07 Jun 2022 19:12:32 GMT -->
</html>